import{o as Fn,j as A,_ as tc}from"./tldraw-8740689d.js";import{a as mo,r as E,R as ee,g as Di,$ as vs,e as me,c as qn,M as vo,D as On,S as ui,P as _o,B as Zr,f as nc,T as ic,h as St,m as zo,C as rc}from"./antd-6b0c2e5e.js";import{n as Rn,c as Oi,a as oc,O as ac,t as sc,b as lc,e as _s,W as cc,d as dc,f as uc,A as fc,_ as hc}from"./revesuite-fd4a8878.js";var Qr={},$o=mo;Qr.createRoot=$o.createRoot,Qr.hydrateRoot=$o.hydrateRoot;const gc={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class fi{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||gc,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,r){return r&&!this.debug?null:(typeof e[0]=="string"&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new fi(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new fi(this.logger,e)}}var Ge=new fi;let Ri=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]=this.observers[i]||[],this.observers[i].push(t)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(i=>i!==t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.observers[e]&&[].concat(this.observers[e]).forEach(a=>{a(...i)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(a=>{a.apply(a,[e,...i])})}};function nn(){let n,e;const t=new Promise((i,r)=>{n=i,e=r});return t.resolve=n,t.reject=e,t}function Uo(n){return n==null?"":""+n}function pc(n,e,t){n.forEach(i=>{e[i]&&(t[i]=e[i])})}function bo(n,e,t){function i(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function r(){return!n||typeof n=="string"}const o=typeof e!="string"?[].concat(e):e.split(".");for(;o.length>1;){if(r())return{};const a=i(o.shift());!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={}}return r()?{}:{obj:n,k:i(o.shift())}}function jo(n,e,t){const{obj:i,k:r}=bo(n,e,Object);i[r]=t}function mc(n,e,t,i){const{obj:r,k:o}=bo(n,e,Object);r[o]=r[o]||[],i&&(r[o]=r[o].concat(t)),i||r[o].push(t)}function hi(n,e){const{obj:t,k:i}=bo(n,e);if(t)return t[i]}function vc(n,e,t){const i=hi(n,t);return i!==void 0?i:hi(e,t)}function bs(n,e,t){for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?typeof n[i]=="string"||n[i]instanceof String||typeof e[i]=="string"||e[i]instanceof String?t&&(n[i]=e[i]):bs(n[i],e[i],t):n[i]=e[i]);return n}function Ut(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var _c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function bc(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,e=>_c[e]):n}const yc=[" ",",","?","!",";"];function Tc(n,e,t){e=e||"",t=t||"";const i=yc.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(i.length===0)return!0;const r=new RegExp(`(${i.map(a=>a==="?"?"\\?":a).join("|")})`);let o=!r.test(n);if(!o){const a=n.indexOf(t);a>0&&!r.test(n.substring(0,a))&&(o=!0)}return o}function gi(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const i=e.split(t);let r=n;for(let o=0;o<i.length;++o){if(!r||typeof r[i[o]]=="string"&&o+1<i.length)return;if(r[i[o]]===void 0){let a=2,c=i.slice(o,o+a).join(t),s=r[c];for(;s===void 0&&i.length>o+a;)a++,c=i.slice(o,o+a).join(t),s=r[c];if(s===void 0)return;if(s===null)return null;if(e.endsWith(c)){if(typeof s=="string")return s;if(c&&typeof s[c]=="string")return s[c]}const u=i.slice(o+a).join(t);return u?gi(s,u,t):void 0}r=r[i[o]]}return r}function pi(n){return n&&n.indexOf("_")>0?n.replace("_","-"):n}class Ho extends Ri{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let c=[e,t];i&&typeof i!="string"&&(c=c.concat(i)),i&&typeof i=="string"&&(c=c.concat(o?i.split(o):i)),e.indexOf(".")>-1&&(c=e.split("."));const s=hi(this.data,c);return s||!a||typeof i!="string"?s:gi(this.data&&this.data[e]&&this.data[e][t],i,o)}addResource(e,t,i,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[e,t];i&&(c=c.concat(a?i.split(a):i)),e.indexOf(".")>-1&&(c=e.split("."),r=t,t=c[1]),this.addNamespaces(t),jo(this.data,c,r),o.silent||this.emit("added",e,t,i,r)}addResources(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in i)(typeof i[o]=="string"||Object.prototype.toString.apply(i[o])==="[object Array]")&&this.addResource(e,t,o,i[o],{silent:!0});r.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,r,o){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[e,t];e.indexOf(".")>-1&&(c=e.split("."),r=i,i=t,t=c[1]),this.addNamespaces(t);let s=hi(this.data,c)||{};r?bs(s,i,o):s={...s,...i},jo(this.data,c,s),a.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var ys={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,r){return n.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,t,i,r))}),e}};const Wo={};class mi extends Ri{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),pc(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ge.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,t);return i&&i.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const a=i&&e.indexOf(i)>-1,c=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Tc(e,i,r);if(a&&!c){const s=e.match(this.interpolator.nestingRegexp);if(s&&s.length>0)return{key:e,namespaces:o};const u=e.split(i);(i!==r||i===r&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(r)}return typeof o=="string"&&(o=[o]),{key:e,namespaces:o}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,o=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(e[e.length-1],t),s=c[c.length-1],u=t.lng||this.language,l=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(l){const y=t.nsSeparator||this.options.nsSeparator;return r?{res:`${s}${y}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:s}:`${s}${y}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:s}:a}const g=this.resolve(e,t);let h=g&&g.res;const f=g&&g.usedKey||a,d=g&&g.exactUsedKey||a,p=Object.prototype.toString.apply(h),m=["[object Number]","[object Function]","[object RegExp]"],b=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject;if(_&&h&&(typeof h!="string"&&typeof h!="boolean"&&typeof h!="number")&&m.indexOf(p)<0&&!(typeof b=="string"&&p==="[object Array]")){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...t,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(g.res=y,g):y}if(o){const y=p==="[object Array]",w=y?[]:{},x=y?d:f;for(const C in h)if(Object.prototype.hasOwnProperty.call(h,C)){const R=`${x}${o}${C}`;w[C]=this.translate(R,{...t,joinArrays:!1,ns:c}),w[C]===R&&(w[C]=h[C])}h=w}}else if(_&&typeof b=="string"&&p==="[object Array]")h=h.join(b),h&&(h=this.extendTranslation(h,e,t,i));else{let y=!1,w=!1;const x=t.count!==void 0&&typeof t.count!="string",C=mi.hasDefaultValue(t),R=x?this.pluralResolver.getSuffix(u,t.count,t):"",D=t.ordinal&&x?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",S=t[`defaultValue${R}`]||t[`defaultValue${D}`]||t.defaultValue;!this.isValidLookup(h)&&C&&(y=!0,h=S),this.isValidLookup(h)||(w=!0,h=a);const O=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&w?void 0:h,M=C&&S!==h&&this.options.updateMissing;if(w||y||M){if(this.logger.log(M?"updateKey":"missingKey",u,s,a,M?S:h),o){const P=this.resolve(a,{...t,keySeparator:!1});P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let L=[];const B=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&B&&B[0])for(let P=0;P<B.length;P++)L.push(B[P]);else this.options.saveMissingTo==="all"?L=this.languageUtils.toResolveHierarchy(t.lng||this.language):L.push(t.lng||this.language);const F=(P,z,I)=>{const N=C&&I!==h?I:O;this.options.missingKeyHandler?this.options.missingKeyHandler(P,s,z,N,M,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(P,s,z,N,M,t),this.emit("missingKey",P,s,z,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?L.forEach(P=>{this.pluralResolver.getSuffixes(P,t).forEach(z=>{F([P],a+z,t[`defaultValue${z}`]||S)})}):F(L,a,S))}h=this.extendTranslation(h,e,t,g,i),w&&h===a&&this.options.appendNamespaceToMissingKey&&(h=`${s}:${a}`),(w||y)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${a}`:a,y?h:void 0):h=this.options.parseMissingKeyHandler(h))}return r?(g.res=h,g):h}extendTranslation(e,t,i,r,o){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=typeof e=="string"&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(u){const h=e.match(this.interpolator.nestingRegexp);l=h&&h.length}let g=i.replace&&typeof i.replace!="string"?i.replace:i;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),e=this.interpolator.interpolate(e,g,i.lng||this.language,i),u){const h=e.match(this.interpolator.nestingRegexp),f=h&&h.length;l<f&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(i.lng=r.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,f=new Array(h),d=0;d<h;d++)f[d]=arguments[d];return o&&o[0]===f[0]&&!i.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):a.translate(...f,t)},i)),i.interpolation&&this.interpolator.reset()}const c=i.postProcess||this.options.postProcess,s=typeof c=="string"?[c]:c;return e!=null&&s&&s.length&&i.applyPostProcessor!==!1&&(e=ys.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:r,...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,r,o,a,c;return typeof e=="string"&&(e=[e]),e.forEach(s=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(s,t),l=u.key;r=l;let g=u.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const h=t.count!==void 0&&typeof t.count!="string",f=h&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),d=t.context!==void 0&&(typeof t.context=="string"||typeof t.context=="number")&&t.context!=="",p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);g.forEach(m=>{this.isValidLookup(i)||(c=m,!Wo[`${p[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(c)&&(Wo[`${p[0]}-${m}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(b=>{if(this.isValidLookup(i))return;a=b;const _=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(_,l,b,m,t);else{let y;h&&(y=this.pluralResolver.getSuffix(b,t.count,t));const w=`${this.options.pluralSeparator}zero`,x=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(_.push(l+y),t.ordinal&&y.indexOf(x)===0&&_.push(l+y.replace(x,this.options.pluralSeparator)),f&&_.push(l+w)),d){const C=`${l}${this.options.contextSeparator}${t.context}`;_.push(C),h&&(_.push(C+y),t.ordinal&&y.indexOf(x)===0&&_.push(C+y.replace(x,this.options.pluralSeparator)),f&&_.push(C+w))}}let v;for(;v=_.pop();)this.isValidLookup(i)||(o=v,i=this.getResource(b,m,v,t))}))})}),{res:i,usedKey:r,exactUsedKey:o,usedLng:a,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,r):this.resourceStore.getResource(e,t,i,r)}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}function hr(n){return n.charAt(0).toUpperCase()+n.slice(1)}class Yo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ge.create("languageUtils")}getScriptPartFromCode(e){if(e=pi(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=pi(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(r=>r.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=hr(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=hr(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=hr(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const r=this.getLanguagePartFromCode(i);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(o=>{if(o===r)return o;if(!(o.indexOf("-")<0&&r.indexOf("-")<0)&&o.indexOf(r)===0)return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],o=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):typeof e=="string"&&o(this.formatLanguageCode(e)),i.forEach(a=>{r.indexOf(a)<0&&o(this.formatLanguageCode(a))}),r}}let wc=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ec={1:function(n){return+(n>1)},2:function(n){return+(n!=1)},3:function(n){return 0},4:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},5:function(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},6:function(n){return n==1?0:n>=2&&n<=4?1:2},7:function(n){return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},8:function(n){return n==1?0:n==2?1:n!=8&&n!=11?2:3},9:function(n){return+(n>=2)},10:function(n){return n==1?0:n==2?1:n<7?2:n<11?3:4},11:function(n){return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3},12:function(n){return+(n%10!=1||n%100==11)},13:function(n){return+(n!==0)},14:function(n){return n==1?0:n==2?1:n==3?2:3},15:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2},16:function(n){return n%10==1&&n%100!=11?0:n!==0?1:2},17:function(n){return n==1||n%10==1&&n%100!=11?0:1},18:function(n){return n==0?0:n==1?1:2},19:function(n){return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3},20:function(n){return n==1?0:n==0||n%100>0&&n%100<20?1:2},21:function(n){return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0},22:function(n){return n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3}};const Sc=["v1","v2","v3"],xc=["v4"],Xo={zero:0,one:1,two:2,few:3,many:4,other:5};function Ac(){const n={};return wc.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:Ec[e.fc]}})}),n}class Lc{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Ge.create("pluralResolver"),(!this.options.compatibilityJSON||xc.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Ac()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(pi(e),{type:t.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(r=>`${t}${r}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((r,o)=>Xo[r]-Xo[o]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):i.numbers.map(r=>this.getSuffix(e,r,t)):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,i);return r?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const o=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!Sc.includes(this.options.compatibilityJSON)}}function Vo(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=vc(n,e,t);return!o&&r&&typeof t=="string"&&(o=gi(n,t,i),o===void 0&&(o=gi(e,t,i))),o}class Dc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ge.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=t.escape!==void 0?t.escape:bc,this.escapeValue=t.escapeValue!==void 0?t.escapeValue:!0,this.useRawValueToEscape=t.useRawValueToEscape!==void 0?t.useRawValueToEscape:!1,this.prefix=t.prefix?Ut(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?Ut(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?Ut(t.nestingPrefix):t.nestingPrefixEscaped||Ut("$t("),this.nestingSuffix=t.nestingSuffix?Ut(t.nestingSuffix):t.nestingSuffixEscaped||Ut(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=t.alwaysFormat!==void 0?t.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=`${this.prefix}(.+?)${this.suffix}`;this.regexp=new RegExp(e,"g");const t=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=new RegExp(t,"g");const i=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=new RegExp(i,"g")}interpolate(e,t,i,r){let o,a,c;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(d){return d.replace(/\$/g,"$$$$")}const l=d=>{if(d.indexOf(this.formatSeparator)<0){const _=Vo(t,s,d,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,i,{...r,...t,interpolationkey:d}):_}const p=d.split(this.formatSeparator),m=p.shift().trim(),b=p.join(this.formatSeparator).trim();return this.format(Vo(t,s,m,this.options.keySeparator,this.options.ignoreJSONStructure),b,i,{...r,...t,interpolationkey:m})};this.resetRegExp();const g=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,h=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:d=>u(d)},{regex:this.regexp,safeValue:d=>this.escapeValue?u(this.escape(d)):u(d)}].forEach(d=>{for(c=0;o=d.regex.exec(e);){const p=o[1].trim();if(a=l(p),a===void 0)if(typeof g=="function"){const b=g(e,o,r);a=typeof b=="string"?b:""}else if(r&&Object.prototype.hasOwnProperty.call(r,p))a="";else if(h){a=o[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=Uo(a));const m=d.safeValue(a);if(e=e.replace(o[0],m),h?(d.regex.lastIndex+=a.length,d.regex.lastIndex-=o[0].length):d.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,o,a;function c(s,u){const l=this.nestingOptionsSeparator;if(s.indexOf(l)<0)return s;const g=s.split(new RegExp(`${l}[ ]*{`));let h=`{${g[1]}`;s=g[0],h=this.interpolate(h,a);const f=h.match(/'/g),d=h.match(/"/g);(f&&f.length%2===0&&!d||d.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),u&&(a={...u,...a})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${s}`,p),`${s}${l}${h}`}return delete a.defaultValue,s}for(;r=this.nestingRegexp.exec(e);){let s=[];a={...i},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const l=r[1].split(this.formatSeparator).map(g=>g.trim());r[1]=l.shift(),s=l,u=!0}if(o=t(c.call(this,r[1].trim(),a),a),o&&r[0]===e&&typeof o!="string")return o;typeof o!="string"&&(o=Uo(o)),o||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),o=""),u&&(o=s.reduce((l,g)=>this.format(l,g,i.lng,{...i,interpolationkey:r[1].trim()}),o.trim())),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}function Oc(n){let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(a=>{if(!a)return;const[c,...s]=a.split(":"),u=s.join(":").trim().replace(/^'+|'+$/g,"");t[c.trim()]||(t[c.trim()]=u),u==="false"&&(t[c.trim()]=!1),u==="true"&&(t[c.trim()]=!0),isNaN(u)||(t[c.trim()]=parseInt(u,10))})}return{formatName:e,formatOptions:t}}function jt(n){const e={};return function(i,r,o){const a=r+JSON.stringify(o);let c=e[a];return c||(c=n(pi(r),o),e[a]=c),c(i)}}class Rc{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ge.create("formatter"),this.options=e,this.formats={number:jt((t,i)=>{const r=new Intl.NumberFormat(t,{...i});return o=>r.format(o)}),currency:jt((t,i)=>{const r=new Intl.NumberFormat(t,{...i,style:"currency"});return o=>r.format(o)}),datetime:jt((t,i)=>{const r=new Intl.DateTimeFormat(t,{...i});return o=>r.format(o)}),relativetime:jt((t,i)=>{const r=new Intl.RelativeTimeFormat(t,{...i});return o=>r.format(o,i.range||"day")}),list:jt((t,i)=>{const r=new Intl.ListFormat(t,{...i});return o=>r.format(o)})},this.init(e)}init(e){const i=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=jt(t)}format(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return t.split(this.formatSeparator).reduce((c,s)=>{const{formatName:u,formatOptions:l}=Oc(s);if(this.formats[u]){let g=c;try{const h=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},f=h.locale||h.lng||r.locale||r.lng||i;g=this.formats[u](c,f,{...l,...r,...h})}catch(h){this.logger.warn(h)}return g}else this.logger.warn(`there was no format function for ${u}`);return c},e)}}function Cc(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}class Ic extends Ri{constructor(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=Ge.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,r.backend,r)}queueLoad(e,t,i,r){const o={},a={},c={},s={};return e.forEach(u=>{let l=!0;t.forEach(g=>{const h=`${u}|${g}`;!i.reload&&this.store.hasResourceBundle(u,g)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,l=!1,a[h]===void 0&&(a[h]=!0),o[h]===void 0&&(o[h]=!0),s[g]===void 0&&(s[g]=!0)))}),l||(c[u]=!0)}),(Object.keys(o).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(a),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(s)}}loaded(e,t,i){const r=e.split("|"),o=r[0],a=r[1];t&&this.emit("failedLoading",o,a,t),i&&this.store.addResourceBundle(o,a,i),this.state[e]=t?-1:2;const c={};this.queue.forEach(s=>{mc(s.loaded,[o],a),Cc(s,e),t&&s.errors.push(t),s.pendingCount===0&&!s.done&&(Object.keys(s.loaded).forEach(u=>{c[u]||(c[u]={});const l=s.loaded[u];l.length&&l.forEach(g=>{c[u][g]===void 0&&(c[u][g]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(s=>!s.done)}read(e,t,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:r,wait:o,callback:a});return}this.readingCalls++;const c=(u,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(u&&l&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,r+1,o*2,a)},o);return}a(u,l)},s=this.backend[i].bind(this.backend);if(s.length===2){try{const u=s(e,t);u&&typeof u.then=="function"?u.then(l=>c(null,l)).catch(c):c(null,u)}catch(u){c(u)}return}return s(e,t,c)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof t=="string"&&(t=[t]);const o=this.queueLoad(e,t,i,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),r=i[0],o=i[1];this.read(r,o,"read",void 0,void 0,(a,c)=>{a&&this.logger.warn(`${t}loading namespace ${o} for language ${r} failed`,a),!a&&c&&this.logger.log(`${t}loaded namespace ${o} for language ${r}`,c),this.loaded(e,a,c)})}saveMissing(e,t,i,r,o){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const s={...a,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let l;u.length===5?l=u(e,t,i,r,s):l=u(e,t,i,r),l&&typeof l.then=="function"?l.then(g=>c(null,g)).catch(c):c(null,l)}catch(l){c(l)}else u(e,t,i,r,c,s)}!e||!e[0]||this.store.addResource(e[0],t,i,r)}}}function Go(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const i=e[3]||e[2];Object.keys(i).forEach(r=>{t[r]=i[r]})}return t},interpolation:{escapeValue:!0,format:(n,e,t,i)=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Ko(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function Zn(){}function Nc(n){Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}class Cn extends Ri{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ko(e),this.services={},this.logger=Ge,this.modules={external:[]},Nc(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;typeof t=="function"&&(i=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=Go();this.options={...r,...this.options,...Ko(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);function o(l){return l?typeof l=="function"?new l:l:null}if(!this.options.isClone){this.modules.logger?Ge.init(o(this.modules.logger),this.options):Ge.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Rc);const g=new Yo(this.options);this.store=new Ho(this.options.resources,this.options);const h=this.services;h.logger=Ge,h.resourceStore=this.store,h.languageUtils=g,h.pluralResolver=new Lc(g,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=o(l),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Dc(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Ic(o(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];e.emit(f,...p)}),this.modules.languageDetector&&(h.languageDetector=o(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=o(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new mi(this.services,this.options),this.translator.on("*",function(f){for(var d=arguments.length,p=new Array(d>1?d-1:0),m=1;m<d;m++)p[m-1]=arguments[m];e.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Zn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=function(){return e.store[l](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=function(){return e.store[l](...arguments),e}});const s=nn(),u=()=>{const l=(g,h)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(h),i(g,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),s}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zn;const r=typeof e=="string"?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode")return i();const o=[],a=c=>{if(!c)return;this.services.languageUtils.toResolveHierarchy(c).forEach(u=>{o.indexOf(u)<0&&o.push(u)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(s=>a(s)),this.options.preload&&this.options.preload.forEach(c=>a(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(c)})}else i(null)}reloadResources(e,t,i){const r=nn();return e||(e=this.languages),t||(t=this.options.ns),i||(i=Zn),this.services.backendConnector.reload(e,t,o=>{r.resolve(),i(o)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ys.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const r=nn();this.emit("languageChanging",e);const o=s=>{this.language=s,this.languages=this.services.languageUtils.toResolveHierarchy(s),this.resolvedLanguage=void 0,this.setResolvedLanguage(s)},a=(s,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return i.t(...arguments)}),t&&t(s,function(){return i.t(...arguments)})},c=s=>{!e&&!s&&this.services.languageDetector&&(s=[]);const u=typeof s=="string"?s:this.services.languageUtils.getBestMatchFromCodes(s);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,l=>{a(l,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(e),r}getFixedT(e,t,i){var r=this;const o=function(a,c){let s;if(typeof c!="object"){for(var u=arguments.length,l=new Array(u>2?u-2:0),g=2;g<u;g++)l[g-2]=arguments[g];s=r.options.overloadTranslationOptionHandler([a,c].concat(l))}else s={...c};s.lng=s.lng||o.lng,s.lngs=s.lngs||o.lngs,s.ns=s.ns||o.ns,s.keyPrefix=s.keyPrefix||i||o.keyPrefix;const h=r.options.keySeparator||".";let f;return s.keyPrefix&&Array.isArray(a)?f=a.map(d=>`${s.keyPrefix}${h}${d}`):f=s.keyPrefix?`${s.keyPrefix}${h}${a}`:a,r.t(f,s)};return typeof e=="string"?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=i,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(c,s)=>{const u=this.services.backendConnector.state[`${c}|${s}`];return u===-1||u===2};if(t.precheck){const c=t.precheck(this,a);if(c!==void 0)return c}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(i,e)&&(!r||a(o,e)))}loadNamespaces(e,t){const i=nn();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=nn();typeof e=="string"&&(e=[e]);const r=this.options.preload||[],o=e.filter(a=>r.indexOf(a)<0);return o.length?(this.options.preload=r.concat(o),this.loadResources(a=>{i.resolve(),t&&t(a)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Yo(Go());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Cn(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zn;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},o=new Cn(r);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i&&(o.store=new Ho(this.store.data,r),o.services.resourceStore=o.store),o.translator=new mi(o.services,r),o.translator.on("*",function(c){for(var s=arguments.length,u=new Array(s>1?s-1:0),l=1;l<s;l++)u[l-1]=arguments[l];o.emit(c,...u)}),o.init(r,t),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ge=Cn.createInstance();ge.createInstance=Cn.createInstance;ge.createInstance;ge.dir;ge.init;ge.loadResources;ge.reloadResources;ge.use;ge.changeLanguage;ge.getFixedT;ge.t;ge.exists;ge.setDefaultNamespace;ge.hasLoadedNamespace;ge.loadNamespaces;ge.loadLanguages;function Bc(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Jo={};function eo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&Jo[e[0]]||(typeof e[0]=="string"&&(Jo[e[0]]=new Date),Bc(...e))}const Ts=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}};function qo(n,e,t){n.loadNamespaces(e,Ts(n,t))}function Zo(n,e,t,i){typeof t=="string"&&(t=[t]),t.forEach(r=>{n.options.ns.indexOf(r)<0&&n.options.ns.push(r)}),n.loadLanguages(e,Ts(n,i))}function Fc(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],r=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const a=(c,s)=>{const u=e.services.backendConnector.state[`${c}|${s}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(i,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(i,n)&&(!r||a(o,n)))}function Pc(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(eo("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(r,o)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,n))return!1}}):Fc(n,e,t)}const Mc=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,kc={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},zc=n=>kc[n],$c=n=>n.replace(Mc,zc);let to={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:$c};function Uc(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};to={...to,...n}}function jc(){return to}let ws;function Hc(n){ws=n}function Wc(){return ws}const Yc={type:"3rdParty",init(n){Uc(n.options.react),Hc(n)}},Xc=E.createContext();class Vc{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Gc=(n,e)=>{const t=E.useRef();return E.useEffect(()=>{t.current=e?t.current:n},[n,e]),t.current};function We(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:i,defaultNS:r}=E.useContext(Xc)||{},o=t||i||Wc();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Vc),!o){eo("You will need to pass in an i18next instance by using initReactI18next");const v=(w,x)=>typeof x=="string"?x:x&&typeof x=="object"&&typeof x.defaultValue=="string"?x.defaultValue:Array.isArray(w)?w[w.length-1]:w,y=[v,{},!1];return y.t=v,y.i18n={},y.ready=!1,y}o.options.react&&o.options.react.wait!==void 0&&eo("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...jc(),...o.options.react,...e},{useSuspense:c,keyPrefix:s}=a;let u=n||r||o.options&&o.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(u);const l=(o.isInitialized||o.initializedStoreOnce)&&u.every(v=>Pc(v,o,a));function g(){return o.getFixedT(e.lng||null,a.nsMode==="fallback"?u:u[0],s)}const[h,f]=E.useState(g);let d=u.join();e.lng&&(d=`${e.lng}${d}`);const p=Gc(d),m=E.useRef(!0);E.useEffect(()=>{const{bindI18n:v,bindI18nStore:y}=a;m.current=!0,!l&&!c&&(e.lng?Zo(o,e.lng,u,()=>{m.current&&f(g)}):qo(o,u,()=>{m.current&&f(g)})),l&&p&&p!==d&&m.current&&f(g);function w(){m.current&&f(g)}return v&&o&&o.on(v,w),y&&o&&o.store.on(y,w),()=>{m.current=!1,v&&o&&v.split(" ").forEach(x=>o.off(x,w)),y&&o&&y.split(" ").forEach(x=>o.store.off(x,w))}},[o,d]);const b=E.useRef(!0);E.useEffect(()=>{m.current&&!b.current&&f(g),b.current=!1},[o,s]);const _=[h,o,l];if(_.t=h,_.i18n=o,_.ready=l,l||!l&&!c)return _;throw new Promise(v=>{e.lng?Zo(o,e.lng,u,()=>v()):qo(o,u,()=>v())})}const Kc={customFont:"Custom font",loadCustomFont:"Load custom font",downloadApp:"Download desktop app to enable custom font function"},Jc={title:"Custom Font",fontFile:"Font File",fontName:"Font Name",load:"Load File"},qc={createFolderFirst:"Please create a folder first"},Zc={addFolder:"Add a folder",addNote:"Add a note",addBoard:"Add an Excalidraw whiteboard",rename:"Rename",delete:"Delete",copyRevezoneLink:"Copy revezone link",giveAStar:"Git a Github star",switchLanguage:"Switch Lanugage",systemSetting:"System setting",storagePath:"Local storage path",addMindmap:"Add a mindmap",addTldraw:"Add a Tldraw whiteboard",importFiles:"Import files",import:"Import Files",openDirectory:"Open the folder located"},Qc={noteDesc:"A notion-like note function",boardDesc:"A whiteboard based on Excalidraw",addBoardDesc:"Click me! Add an enhanced Excalidraw board right now.",giveAStarDesc:"Please git a star if Revezone is helpful to you.",systemSettingDesc:"Come and customize the fonts in Excalidraw whiteboard",addTldrawDesc:"Revezone supports Tldraw whiteboard, try it now"},ed={productDesc:"A lightweight local-first graph-centric mind management tool.",operationTip:"This is an empty page. Please add or select a file first in the left sidebar.",operationGuide:"Operation Guide",operationDetailDesc:"Click the icons in left sidebar operation toolbar to add a board/note/folder.",onlineTry:"This is an online trial version which only supports basic functions.",downloadApp:"Download desktop app to enable full function."},td={title:"Links",website:"Official website",github:"Official Github (Give a star if Revezone is helpful to you please)",twitter:"Official Twitter",buyMeACoffee:"By me a coffee",feedMyCat:"Feed my cat",authorTwitter:"Follow author's twitter",authorBilibili:"Official Bilibili",downloadApp:"Download the desktop app"},nd={untitled:"Untitled",defaultFolder:"Default Folder",alpha:"alpha",welcomePage:"Welcome Page"},id={cloud:"Cloud(Comming soon)",local:"Local"},rd={issue:"Report a issue",contactTheAuthor:"Contact the author"},od={title:"Public Beta Notice",description:"Revezone is currently in a public beta, there may still be a few bugs in the product. Please make sure to backup your important data. Please submit a github issue or concat my twitter if you have any questions or suggestions."},ad={customFont:"Custom font",fontsLoaded:"Fonts loaded",loadFontFile:"Load font files",enableCustomFontInBoard:"Enable custom font in board",deleteFont:"Delete font",confirmDelete:"Confirm to delete font",onlineVersionTip:"Customing font not supports in online version, please download the desktop app",fontFirstLoadTip:"Note: After the font is loaded for the first time, the application needs to be restarted for the font to take effect within the whiteboard.",emptyTip:"No custom fonts available"},sd={yes:"Yes",no:"No",confirmDelete:"Confirm to delete"},ld={title:"Please choose your language first!"},cd={changePath:"Change storage path",openPath:"Open storage path",changePathConfirm:"Are you sure you want to modify the user file storage path?",storagePathNotice:"The local storage path customization function is only supported on the Revezone desktop application."},dd={title:"Please complete your initial setup"},ud={menu:Kc,customFontModal:Jc,message:qc,operation:Zc,description:Qc,welcome:ed,links:td,text:nd,storage:id,help:rd,publicBeta:od,customFont:ad,confirm:sd,language:ld,storagePath:cd,userGuideModel:dd},fd={customFont:"自定义字体",loadCustomFont:"加载自定义字体",downloadApp:"下载桌面应用开启自定义字体功能"},hd={title:"自定义字体",fontFile:"字体文件",fontName:"字体名称",load:"加载文件"},gd={createFolderFirst:"请先创建文件夹"},pd={addFolder:"新建文件夹",addNote:"新建笔记",addBoard:"新建 Excalidraw 白板",rename:"重命名",delete:"删除",copyRevezoneLink:"复制 Revezone 链接",giveAStar:"给个 Github Star 吧",switchLanguage:"切换语言",systemSetting:"系统设置",storagePath:"本地存储路径",addMindmap:"新建脑图",addTldraw:"新建 Tldraw 白板",importFiles:"导入文件",import:"导入文件",openDirectory:"打开所在文件夹"},md={noteDesc:"类 Notion 笔记",boardDesc:"增强型 Excalidraw 白板",addBoardDesc:"点我，创建一个 Excalidraw 白板吧",giveAStarDesc:"动动小手给个 Github Star 吧",systemSettingDesc:"快来自定义 Excalidraw 白板中的字体吧",addTldrawDesc:"Revezone 支持 Tldraw 白板了，快快体验吧"},vd={productDesc:"一个轻量级本地优先以图形为中心的思维管理工具。",operationTip:"这是一个空白页，请先在左侧边栏新建或选择某个文件",operationGuide:"操作说明",operationDetailDesc:"点击左侧边栏的操作图标来创建一个白板、笔记、文件夹",onlineTry:"此为线上体验版，只包含基础功能。",downloadApp:"下载桌面应用体验全量功能。"},_d={title:"链接",website:"官网",github:"官方 Github (给个 Star 吧)",twitter:"官方 Twitter",authorTwitter:"关注作者",authorBilibili:"官方 B 站（获取最新产品动态）",buyMeACoffee:"买杯咖啡",feedMyCat:"投喂猫粮(大陆用户)",downloadApp:"下载桌面应用"},bd={untitled:"请输入标题",defaultFolder:"默认文件夹",alpha:"公测版",welcomePage:"欢迎页"},yd={cloud:"云存储(敬请期待)",local:"本地存储"},Td={issue:"提交问题",contactTheAuthor:"联系作者"},wd={title:"公测公告",description:"Revezone 目前处于公测阶段，产品可能还有少量 bug，重要数据请做好备份。如果你有任何问题或建议，欢迎提交 github issue 或者扫码添加微信加入公测群进行反馈。"},Ed={customFont:"自定义字体",fontsLoaded:"已加载字体",loadFontFile:"加载字体文件",enableCustomFontInBoard:"开启白板中的自定义字体",deleteFont:"删除字体",confirmDelete:"确定删除字体",onlineVersionTip:"自定义字体仅在桌面应用中支持，请下载桌面应用",fontFirstLoadTip:"注意：初次加载字体后，需要重启应用，字体才会在白板内生效",emptyTip:"暂无自定义字体"},Sd={yes:"是",no:"否",confirmDelete:"确定删除"},xd={title:"请先选择你的语言!"},Ad={changePath:"更改存储路径",openPath:"打开存储路径",changePathConfirm:"确定修改用户文件存储路径吗？",storagePathNotice:"本地存储路径自定义功能仅在 Revezone 桌面应用端支持"},Ld={title:"请完成你的初始设置"},Dd={menu:fd,customFontModal:hd,message:gd,operation:pd,description:md,welcome:vd,links:_d,text:bd,storage:yd,help:Td,publicBeta:wd,customFont:Ed,confirm:Sd,language:xd,storagePath:Ad,userGuideModel:Ld},Od={customFont:"自定義字體",loadCustomFont:"加載自定義字體",downloadApp:"下載桌面應用開啟自定義字體功能"},Rd={title:"自定義字體",fontFile:"字體文件",fontName:"字體名稱",load:"加載文件"},Cd={createFolderFirst:"請先創建文件夾"},Id={addFolder:"新建文件夾",addNote:"新建筆記",addBoard:"新建 Excalidraw 白板",rename:"重命名",delete:"刪除",copyRevezoneLink:"復制 Revezone 鏈接",giveAStar:"給個 Github Star 吧",switchLanguage:"切換語言",systemSetting:"繫統設置",storagePath:"本地存儲路徑",addMindmap:"新建腦圖",addTldraw:"新建 Tldraw 白板",importFiles:"導入文件",import:"導入文件",openDirectory:"打開所在資料夾"},Nd={noteDesc:"類 Notion 筆記",boardDesc:"基於 Excalidraw 的白闆",addBoardDesc:"點我，創建一個 Excalidraw 白闆吧",giveAStarDesc:"動動小手給個 Github Star 吧",systemSettingDesc:"快來自定義 Excalidraw 白板中的字體吧",addTldrawDesc:"Revezone 支持 Tldraw 白板了，快快體驗吧"},Bd={productDesc:"一個輕量級本地優先以圖形為中心的思維管理工具。",operationTip:"這是一個空白頁，請先在左側邊欄新建或選擇某個文件",operationGuide:"操作說明",operationDetailDesc:"點擊左側邊欄的操作圖標來創建一個白闆、筆記、文件夾",onlineTry:"此為線上體驗版，只包含基礎功能。",downloadApp:"下載桌面應用體驗全量功能。"},Fd={title:"鏈接",website:"官網",github:"官方 Github (給個 Star 吧)",twitter:"官方 Twitter",authorTwitter:"關註作者",authorBilibili:"官方 B 站（獲取最新產品動態）",buyMeACoffee:"買杯咖啡",feedMyCat:"投餵貓糧",downloadApp:"下載桌面應用"},Pd={untitled:"請輸入標題",defaultFolder:"默認文件夾",alpha:"公測版",welcomePage:"歡迎頁"},Md={cloud:"雲存儲(敬請期待)",local:"本地存儲"},kd={issue:"提交問題",contactTheAuthor:"聯繫作者"},zd={title:"公測公告",description:"Revezone 目前處於公測階段，產品可能還有少量 bug，重要數據請做好備份。如果妳有任何問題或建議，歡迎提交 github issue 或者掃碼添加微信反饋。"},$d={customFont:"自定義字體",fontsLoaded:"已加載字體",loadFontFile:"加載字體文件",enableCustomFontInBoard:"開啟白闆中的自定義字體",deleteFont:"刪除字體",confirmDelete:"確定刪除字體",onlineVersionTip:"自定義字體僅在桌面應用中支持，請下載桌面應用",fontFirstLoadTip:"註意：初次加載字體後，需要重啟應用，字體才會在白闆內生效",emptyTip:"暫無自定義字體"},Ud={yes:"是",no:"否",confirmDelete:"確定刪除"},jd={title:"請先選擇妳的語言!"},Hd={changePath:"更改存儲路徑",openPath:"打開存儲路徑",changePathConfirm:"確定修改用戶文件存儲路徑嗎？",storagePathNotice:"本地存儲路徑自定義功能僅在 Revezone 桌面應用端支持"},Wd={title:"請完成你的初始設置"},Yd={menu:Od,customFontModal:Rd,message:Cd,operation:Id,description:Nd,welcome:Bd,links:Fd,text:Pd,storage:Md,help:kd,publicBeta:zd,customFont:$d,confirm:Ud,language:jd,storagePath:Hd,userGuideModel:Wd};ge.use(Yc).init({resources:{en:{translation:ud},"zh-CN":{translation:Dd},"zh-TW":{translation:Yd}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const Xd=[{key:"en",label:"English"},{key:"zh-CN",label:"简体中文"},{key:"zh-TW",label:"繁體中文"}];let Vd=0;function Be(n,e){const t=`atom${++Vd}`,i={toString:()=>t};return typeof n=="function"?i.read=n:(i.init=n,i.read=r=>r(i),i.write=(r,o,a)=>o(i,typeof a=="function"?a(r(i)):a)),e&&(i.write=e),i}const Qo=n=>"init"in n,ea=n=>!!n.write,vi=new WeakMap,Gd=(n,e)=>{vi.set(n,e),n.catch(()=>{}).finally(()=>vi.delete(n))},ta=(n,e)=>{const t=vi.get(n);t&&(vi.delete(n),t(e))},na=(n,e)=>{n.status="fulfilled",n.value=e},ia=(n,e)=>{n.status="rejected",n.reason=e},Kd=n=>typeof n?.then=="function",rn=(n,e)=>"v"in n&&"v"in e&&Object.is(n.v,e.v),ra=(n,e)=>"e"in n&&"e"in e&&Object.is(n.e,e.e),Ht=n=>"v"in n&&n.v instanceof Promise,Jd=(n,e)=>"v"in n&&"v"in e&&n.v.orig&&n.v.orig===e.v.orig,Qn=n=>{if("e"in n)throw n.e;return n.v},qd=()=>{const n=new WeakMap,e=new WeakMap,t=new Map;let i,r,o;const a=D=>n.get(D),c=(D,S)=>{const T=n.get(D);if(n.set(D,S),t.has(D)||t.set(D,T),T&&Ht(T)){const O="v"in S?S.v instanceof Promise?S.v:Promise.resolve(S.v):Promise.reject(S.e);ta(T.v,O)}},s=(D,S,T)=>{const O=new Map;let M=!1;T.forEach((L,B)=>{!L&&B===D&&(L=S),L&&(O.set(B,L),S.d.get(B)!==L&&(M=!0))}),(M||S.d.size!==O.size)&&(S.d=O)},u=(D,S,T)=>{const O=a(D),M={d:O?.d||new Map,v:S};if(T&&s(D,M,T),O&&rn(O,M)&&O.d===M.d)return O;if(O&&Ht(O)&&Ht(M)&&Jd(O,M)){if(O.d===M.d)return O;M.v=O.v}return c(D,M),M},l=(D,S,T,O)=>{if(Kd(S)){let M;const L=new Promise((B,F)=>{let P=!1;S.then(z=>{if(!P){P=!0;const I=a(D),N=u(D,L,T);na(L,z),B(z),I?.d!==N.d&&x(D,N,I?.d)}},z=>{if(!P){P=!0;const I=a(D),N=u(D,L,T);ia(L,z),F(z),I?.d!==N.d&&x(D,N,I?.d)}}),M=z=>{P||(P=!0,z.then(I=>na(L,I),I=>ia(L,I)),B(z))}});return L.orig=S,L.status="pending",Gd(L,B=>{B&&M(B),O?.()}),u(D,L,T)}return u(D,S,T)},g=(D,S,T)=>{const O=a(D),M={d:O?.d||new Map,e:S};return T&&s(D,M,T),O&&ra(O,M)&&O.d===M.d?O:(c(D,M),M)},h=D=>{const S=a(D);if(S&&(S.d.forEach((P,z)=>{z!==D&&!e.has(z)&&h(z)}),Array.from(S.d).every(([P,z])=>{const I=a(P);return P===D||I===z||I&&!Ht(I)&&rn(I,z)})))return S;const T=new Map;let O=!0;const M=P=>{if(P===D){const I=a(P);if(I)return T.set(P,I),Qn(I);if(Qo(P))return T.set(P,void 0),P.init;throw new Error("no atom init")}const z=h(P);return T.set(P,z),Qn(z)};let L,B;const F={get signal(){return L||(L=new AbortController),L.signal},get setSelf(){return!B&&ea(D)&&(B=(...P)=>{if(!O)return v(D,...P)}),B}};try{const P=D.read(M,F);return l(D,P,T,()=>L?.abort())}catch(P){return g(D,P,T)}finally{O=!1}},f=D=>Qn(h(D)),d=D=>{let S=e.get(D);return S||(S=y(D)),S},p=(D,S)=>!S.l.size&&(!S.t.size||S.t.size===1&&S.t.has(D)),m=D=>{const S=e.get(D);S&&p(D,S)&&w(D)},b=D=>{const S=new Map,T=new WeakMap,O=L=>{const B=e.get(L);B?.t.forEach(F=>{F!==L&&(S.set(F,(S.get(F)||new Set).add(L)),T.set(F,(T.get(F)||0)+1),O(F))})};O(D);const M=L=>{const B=e.get(L);B?.t.forEach(F=>{var P;if(F!==L){let z=T.get(F);if(z&&T.set(F,--z),!z){let I=!!((P=S.get(F))!=null&&P.size);if(I){const N=a(F),$=h(F);I=!N||!rn(N,$)}I||S.forEach(N=>N.delete(F))}M(F)}})};M(D)},_=(D,...S)=>{let T=!0;const O=B=>Qn(h(B)),M=(B,...F)=>{let P;if(B===D){if(!Qo(B))throw new Error("atom not writable");const z=a(B),I=l(B,F[0]);(!z||!rn(z,I))&&b(B)}else P=_(B,...F);if(!T){const z=C()}return P},L=D.write(O,M,...S);return T=!1,L},v=(D,...S)=>{const T=_(D,...S),O=C();return T},y=(D,S)=>{const T={t:new Set(S&&[S]),l:new Set};if(e.set(D,T),h(D).d.forEach((O,M)=>{const L=e.get(M);L?L.t.add(D):M!==D&&y(M,D)}),h(D),ea(D)&&D.onMount){const O=D.onMount((...M)=>v(D,...M));O&&(T.u=O)}return T},w=D=>{var S;const T=(S=e.get(D))==null?void 0:S.u;T&&T(),e.delete(D);const O=a(D);O&&(Ht(O)&&ta(O.v),O.d.forEach((M,L)=>{if(L!==D){const B=e.get(L);B&&(B.t.delete(D),p(L,B)&&w(L))}}))},x=(D,S,T)=>{const O=new Set(S.d.keys());T?.forEach((M,L)=>{if(O.has(L)){O.delete(L);return}const B=e.get(L);B&&(B.t.delete(D),p(L,B)&&w(L))}),O.forEach(M=>{const L=e.get(M);L?L.t.add(D):e.has(D)&&y(M,D)})},C=()=>{let D;for(;t.size;){const S=Array.from(t);t.clear(),S.forEach(([T,O])=>{const M=a(T);if(M){M.d!==O?.d&&x(T,M,O?.d);const L=e.get(T);L&&!(O&&!Ht(O)&&(rn(O,M)||ra(O,M)))&&L.l.forEach(B=>B())}})}};return{get:f,set:v,sub:(D,S)=>{const T=d(D),O=C(),M=T.l;return M.add(S),()=>{M.delete(S),m(D)}}}};let gr;const Zd=()=>(gr||(gr=qd()),gr),Qd=E.createContext(void 0),Es=n=>{const e=E.useContext(Qd);return n?.store||e||Zd()},eu=n=>typeof n?.then=="function",tu=ee.use||(n=>{if(n.status==="pending")throw n;if(n.status==="fulfilled")return n.value;throw n.status==="rejected"?n.reason:(n.status="pending",n.then(e=>{n.status="fulfilled",n.value=e},e=>{n.status="rejected",n.reason=e}),n)});function nu(n,e){const t=Es(e),[[i,r,o],a]=E.useReducer(u=>{const l=t.get(n);return Object.is(u[0],l)&&u[1]===t&&u[2]===n?u:[l,t,n]},void 0,()=>[t.get(n),t,n]);let c=i;(r!==t||o!==n)&&(a(),c=t.get(n));const s=e?.delay;return E.useEffect(()=>{const u=t.sub(n,()=>{if(typeof s=="number"){setTimeout(a,s);return}a()});return a(),u},[t,n,s]),E.useDebugValue(c),eu(c)?tu(c):c}function iu(n,e){const t=Es(e);return E.useCallback((...r)=>t.set(n,...r),[t,n])}function le(n,e){return[nu(n,e),iu(n,e)]}const oa=/^\[\[(.+)\]\]$/,ru="en",ou={id:"welcome",name:"Welcome Page",type:"welcome",gmtCreate:"Thu Aug 31 2023 21:24:50 GMT+0800",gmtModified:"Thu Aug 31 2023 21:24:50 GMT+0800"},Ss={id:"welcome",name:"Welcome Page",type:"tab",config:ou},xs={global:{tabEnableRename:!1},layout:{type:"row",weight:100,children:[{type:"tabset",weight:10,selected:0,children:[Ss]}]}},au={root:{index:"root",data:{id:"root",name:"root",gmtCreate:"Thu Aug 31 2023 23:10:19 GMT+0800",gmtModified:"Thu Aug 31 2023 23:10:19 GMT+0800"},isFolder:!0,canRename:!0,children:[]}},As="menu_open_keys",Ls="menu_selected_keys",Ds="current_file",Os="custom_fonts",Rs="lang_code",Cs="board_custom_font_switch",Is="tab_json_model",Ns="renaming_menu_item_id",no=()=>{const n=localStorage.getItem(As);return n?JSON.parse(n):[]},aa=n=>{const e=JSON.stringify(n);localStorage.setItem(As,e)},su=()=>{const n=localStorage.getItem(Ls);return n?JSON.parse(n):[]},lu=n=>{const e=JSON.stringify(n);localStorage.setItem(Ls,e)},cu=n=>{const e=n?JSON.stringify(n):"";localStorage.setItem(Ds,e)},du=()=>{const n=localStorage.getItem(Ds);return n&&JSON.parse(n)},uu=()=>localStorage.getItem(Os),sa=n=>{n&&localStorage.setItem(Os,n)},fu=n=>{localStorage.setItem(Rs,n)},hu=()=>localStorage.getItem(Rs),gu=()=>localStorage.getItem(Cs),pu=n=>{localStorage.setItem(Cs,n)},pr=n=>{localStorage.setItem(Is,n)},mu=()=>{const n=localStorage.getItem(Is);return n&&JSON.parse(n)||xs},In=n=>{localStorage.setItem(Ns,n)},Bs=()=>localStorage.getItem(Ns),Fs=Be({}),Ps=Be(du()),vu=Be(!1);Be([]);Be(void 0);const _u=Be(!1),Ci=Be("en"),bu=Be("light"),yu=Be(xs),Tu=Be(void 0),yo=Be(su()),wu=Be(no()),Ms=Be("");var io={exports:{}},ks={exports:{}},Eu=void 0,zs=function(n){return n!==Eu&&n!==null},Su=zs,xu={object:!0,function:!0,undefined:!0},Au=function(n){return Su(n)?hasOwnProperty.call(xu,typeof n):!1},Lu=Au,Du=function(n){if(!Lu(n))return!1;try{return n.constructor?n.constructor.prototype===n:!1}catch{return!1}},Ou=Du,Ru=function(n){if(typeof n!="function"||!hasOwnProperty.call(n,"length"))return!1;try{if(typeof n.length!="number"||typeof n.call!="function"||typeof n.apply!="function")return!1}catch{return!1}return!Ou(n)},Cu=Ru,Iu=/^\s*class[\s{/}]/,Nu=Function.prototype.toString,Bu=function(n){return!(!Cu(n)||Iu.test(Nu.call(n)))},Fu=function(){var n=Object.assign,e;return typeof n!="function"?!1:(e={foo:"raz"},n(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},mr,la;function Pu(){return la||(la=1,mr=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),mr}var Mu=function(){},ku=Mu(),To=function(n){return n!==ku&&n!==null},vr,ca;function zu(){if(ca)return vr;ca=1;var n=To,e=Object.keys;return vr=function(t){return e(n(t)?Object(t):t)},vr}var _r,da;function $u(){return da||(da=1,_r=Pu()()?Object.keys:zu()),_r}var br,ua;function Uu(){if(ua)return br;ua=1;var n=To;return br=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e},br}var yr,fa;function ju(){if(fa)return yr;fa=1;var n=$u(),e=Uu(),t=Math.max;return yr=function(i,r){var o,a,c=t(arguments.length,2),s;for(i=Object(e(i)),s=function(u){try{i[u]=r[u]}catch(l){o||(o=l)}},a=1;a<c;++a)r=arguments[a],n(r).forEach(s);if(o!==void 0)throw o;return i},yr}var Hu=Fu()?Object.assign:ju(),Wu=To,Yu=Array.prototype.forEach,Xu=Object.create,Vu=function(n,e){var t;for(t in n)e[t]=n[t]},Gu=function(n){var e=Xu(null);return Yu.call(arguments,function(t){Wu(t)&&Vu(Object(t),e)}),e},Tr="razdwatrzy",Ku=function(){return typeof Tr.contains!="function"?!1:Tr.contains("dwa")===!0&&Tr.contains("foo")===!1},wr,ha;function Ju(){if(ha)return wr;ha=1;var n=String.prototype.indexOf;return wr=function(e){return n.call(this,e,arguments[1])>-1},wr}var qu=Ku()?String.prototype.contains:Ju(),ci=zs,ga=Bu,$s=Hu,Us=Gu,bn=qu,Zu=ks.exports=function(n,e){var t,i,r,o,a;return arguments.length<2||typeof n!="string"?(o=e,e=n,n=null):o=arguments[2],ci(n)?(t=bn.call(n,"c"),i=bn.call(n,"e"),r=bn.call(n,"w")):(t=r=!0,i=!1),a={value:e,configurable:t,enumerable:i,writable:r},o?$s(Us(o),a):a};Zu.gs=function(n,e,t){var i,r,o,a;return typeof n!="string"?(o=t,t=e,e=n,n=null):o=arguments[3],ci(e)?ga(e)?ci(t)?ga(t)||(o=t,t=void 0):t=void 0:(o=e,e=t=void 0):e=void 0,ci(n)?(i=bn.call(n,"c"),r=bn.call(n,"e")):(i=!0,r=!1),a={get:e,set:t,configurable:i,enumerable:r},o?$s(Us(o),a):a};var Qu=ks.exports,ef=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n};(function(n,e){var t=Qu,i=ef,r=Function.prototype.apply,o=Function.prototype.call,a=Object.create,c=Object.defineProperty,s=Object.defineProperties,u=Object.prototype.hasOwnProperty,l={configurable:!0,enumerable:!1,writable:!0},g,h,f,d,p,m,b;g=function(_,v){var y;return i(v),u.call(this,"__ee__")?y=this.__ee__:(y=l.value=a(null),c(this,"__ee__",l),l.value=null),y[_]?typeof y[_]=="object"?y[_].push(v):y[_]=[y[_],v]:y[_]=v,this},h=function(_,v){var y,w;return i(v),w=this,g.call(this,_,y=function(){f.call(w,_,y),r.call(v,this,arguments)}),y.__eeOnceListener__=v,this},f=function(_,v){var y,w,x,C;if(i(v),!u.call(this,"__ee__"))return this;if(y=this.__ee__,!y[_])return this;if(w=y[_],typeof w=="object")for(C=0;x=w[C];++C)(x===v||x.__eeOnceListener__===v)&&(w.length===2?y[_]=w[C?0:1]:w.splice(C,1));else(w===v||w.__eeOnceListener__===v)&&delete y[_];return this},d=function(_){var v,y,w,x,C;if(u.call(this,"__ee__")&&(x=this.__ee__[_],!!x))if(typeof x=="object"){for(y=arguments.length,C=new Array(y-1),v=1;v<y;++v)C[v-1]=arguments[v];for(x=x.slice(),v=0;w=x[v];++v)r.call(w,this,C)}else switch(arguments.length){case 1:o.call(x,this);break;case 2:o.call(x,this,arguments[1]);break;case 3:o.call(x,this,arguments[1],arguments[2]);break;default:for(y=arguments.length,C=new Array(y-1),v=1;v<y;++v)C[v-1]=arguments[v];r.call(x,this,C)}},p={on:g,once:h,off:f,emit:d},m={on:t(g),once:t(h),off:t(f),emit:t(d)},b=s({},m),n.exports=e=function(_){return _==null?a(b):s(Object(_),m)},e.methods=p})(io,io.exports);var tf=io.exports;const nf=Di(tf),js={WORKSPACE_LOADED:"workspace_loaded",FORCE_UPDATE_EDITOR:"force_update_editor",SWITCH_FONT_FAMILY:"switch_font_family"},wo=new nf;function rf(n){const[e,t]=le(vu);return E.useEffect(()=>{wo.on(js.WORKSPACE_LOADED,()=>{t(!0)})},[]),e?n.children:null}var Ii={},Hs={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Hs);var it=Hs.exports,Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.default=void 0;var of={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};Ni.default=of;var Bi={},Pn={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.default=void 0;var af={locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"},sf=af;Fi.default=sf;var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.default=void 0;const lf={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};var cf=lf;Mn.default=cf;var Ws=it.default;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.default=void 0;var df=Ws(Fi),uf=Ws(Mn);const Ys={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},df.default),timePickerLocale:Object.assign({},uf.default)};Ys.lang.ok="确定";var ff=Ys;Pn.default=ff;var hf=it.default;Object.defineProperty(Bi,"__esModule",{value:!0});Bi.default=void 0;var gf=hf(Pn),pf=gf.default;Bi.default=pf;var Pi=it.default;Object.defineProperty(Ii,"__esModule",{value:!0});Ii.default=void 0;var mf=Pi(Ni),vf=Pi(Bi),_f=Pi(Pn),bf=Pi(Mn);const De="${label}不是一个有效的${type}",yf={locale:"zh-cn",Pagination:mf.default,DatePicker:_f.default,TimePicker:bf.default,Calendar:vf.default,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckall:"全选",filterSearchPlaceholder:"在筛选项中搜索",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:De,method:De,array:De,object:De,number:De,date:De,boolean:De,integer:De,float:De,regexp:De,email:De,url:De,hex:De},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新"},ColorPicker:{presetEmpty:"暂无"}};var Tf=yf;Ii.default=Tf;var wf=Ii;const Ef=Di(wf);var Mi={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.default=void 0;var Sf={items_per_page:"條/頁",jump_to:"跳至",jump_to_confirm:"確定",page:"頁",prev_page:"上一頁",next_page:"下一頁",prev_5:"向前 5 頁",next_5:"向後 5 頁",prev_3:"向前 3 頁",next_3:"向後 3 頁",page_size:"頁碼"};ki.default=Sf;var zi={},kn={},$i={};Object.defineProperty($i,"__esModule",{value:!0});$i.default=void 0;var xf={locale:"zh_TW",today:"今天",now:"此刻",backToToday:"返回今天",ok:"確定",timeSelect:"選擇時間",dateSelect:"選擇日期",weekSelect:"選擇周",clear:"清除",month:"月",year:"年",previousMonth:"上個月 (翻頁上鍵)",nextMonth:"下個月 (翻頁下鍵)",monthSelect:"選擇月份",yearSelect:"選擇年份",decadeSelect:"選擇年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH時mm分ss秒",previousYear:"上一年 (Control鍵加左方向鍵)",nextYear:"下一年 (Control鍵加右方向鍵)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世紀",nextCentury:"下一世紀"},Af=xf;$i.default=Af;var zn={};Object.defineProperty(zn,"__esModule",{value:!0});zn.default=void 0;const Lf={placeholder:"請選擇時間"};var Df=Lf;zn.default=Df;var Xs=it.default;Object.defineProperty(kn,"__esModule",{value:!0});kn.default=void 0;var Of=Xs($i),Rf=Xs(zn);const Vs={lang:Object.assign({placeholder:"請選擇日期",yearPlaceholder:"請選擇年份",quarterPlaceholder:"請選擇季度",monthPlaceholder:"請選擇月份",weekPlaceholder:"請選擇周",rangePlaceholder:["開始日期","結束日期"],rangeYearPlaceholder:["開始年份","結束年份"],rangeMonthPlaceholder:["開始月份","結束月份"],rangeQuarterPlaceholder:["開始季度","結束季度"],rangeWeekPlaceholder:["開始周","結束周"]},Of.default),timePickerLocale:Object.assign({},Rf.default)};Vs.lang.ok="確 定";var Cf=Vs;kn.default=Cf;var If=it.default;Object.defineProperty(zi,"__esModule",{value:!0});zi.default=void 0;var Nf=If(kn),Bf=Nf.default;zi.default=Bf;var Ui=it.default;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.default=void 0;var Ff=Ui(ki),Pf=Ui(zi),Mf=Ui(kn),kf=Ui(zn);const Oe="${label}不是一個有效的${type}",zf={locale:"zh-tw",Pagination:Ff.default,DatePicker:Mf.default,TimePicker:kf.default,Calendar:Pf.default,global:{placeholder:"請選擇"},Table:{filterTitle:"篩選器",filterConfirm:"確定",filterReset:"重置",filterEmptyText:"無篩選項",selectAll:"全部選取",selectInvert:"反向選取",selectNone:"清空所有",selectionAll:"全選所有",sortTitle:"排序",expand:"展開行",collapse:"關閉行",triggerDesc:"點擊降序",triggerAsc:"點擊升序",cancelSort:"取消排序"},Modal:{okText:"確定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"結束導覽"},Popconfirm:{okText:"確定",cancelText:"取消"},Transfer:{titles:["",""],searchPlaceholder:"搜尋資料",itemUnit:"項目",itemsUnit:"項目",remove:"删除",selectCurrent:"全選當頁",removeCurrent:"删除當頁",selectAll:"全選所有",removeAll:"删除全部",selectInvert:"反選當頁"},Upload:{uploading:"正在上傳...",removeFile:"刪除檔案",uploadError:"上傳失敗",previewFile:"檔案預覽",downloadFile:"下载文件"},Empty:{description:"無此資料"},Icon:{icon:"圖標"},Text:{edit:"編輯",copy:"複製",copied:"複製成功",expand:"展開"},PageHeader:{back:"返回"},Form:{optional:"（可選）",defaultValidateMessages:{default:"字段驗證錯誤${label}",required:"請輸入${label}",enum:"${label}必須是其中一個[${enum}]",whitespace:"${label}不能為空字符",date:{format:"${label}日期格式無效",parse:"${label}不能轉換為日期",invalid:"${label}是一個無效日期"},types:{string:Oe,method:Oe,array:Oe,object:Oe,number:Oe,date:Oe,boolean:Oe,integer:Oe,float:Oe,regexp:Oe,email:Oe,url:Oe,hex:Oe},string:{len:"${label}須為${len}個字符",min:"${label}最少${min}個字符",max:"${label}最多${max}個字符",range:"${label}須在${min}-${max}字符之間"},number:{len:"${label}必須等於${len}",min:"${label}最小值為${min}",max:"${label}最大值為${max}",range:"${label}須在${min}-${max}之間"},array:{len:"須為${len}個${label}",min:"最少${min}個${label}",max:"最多${max}個${label}",range:"${label}數量須在${min}-${max}之間"},pattern:{mismatch:"${label}與模式不匹配${pattern}"}}},Image:{preview:"預覽"}};var $f=zf;Mi.default=$f;var Uf=Mi;const jf=Di(Uf);var ji={},Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.default=void 0;var Hf={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"};Hi.default=Hf;var Wi={},$n={},Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.default=void 0;var Wf={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},Yf=Wf;Yi.default=Yf;var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.default=void 0;const Xf={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var Vf=Xf;Un.default=Vf;var Gs=it.default;Object.defineProperty($n,"__esModule",{value:!0});$n.default=void 0;var Gf=Gs(Yi),Kf=Gs(Un);const Jf={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},Gf.default),timePickerLocale:Object.assign({},Kf.default)};var qf=Jf;$n.default=qf;var Zf=it.default;Object.defineProperty(Wi,"__esModule",{value:!0});Wi.default=void 0;var Qf=Zf($n),eh=Qf.default;Wi.default=eh;var Xi=it.default;Object.defineProperty(ji,"__esModule",{value:!0});ji.default=void 0;var th=Xi(Hi),nh=Xi(Wi),ih=Xi($n),rh=Xi(Un);const Re="${label} is not a valid ${type}",oh={locale:"en",Pagination:th.default,DatePicker:ih.default,TimePicker:rh.default,Calendar:nh.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Re,method:Re,array:Re,object:Re,number:Re,date:Re,boolean:Re,integer:Re,float:Re,regexp:Re,email:Re,url:Re,hex:Re},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}};var ah=oh;ji.default=ah;var sh=ji;const lh=Di(sh),ch={token:{fontSize:13,colorPrimary:"#0284c7"}},Ks=()=>{let n;const e=navigator.userAgent;switch(!0){case e.includes("Win"):n="Windows";break;case e.includes("Mac"):n="MacOS";break;case e.includes("Linux"):n="Linux";break;default:n="Unkown";break}return n},dh=()=>navigator.userAgent.includes("revezone"),uh=()=>{const n=/revezone\/(\S+)/;return navigator.userAgent.match(n)?.[1]||"unkonwn"},yt=dh(),Js=Ks(),fh=uh(),ei="common",hh="revezone_common";class yn{constructor(){if(yn.instance)return yn.instance;yn.instance=this,(async()=>this.db=await this.initDB())()}static instance;db;async initDB(){if(this.db)return this.db;const e=await Fn(hh,1,{upgrade:async t=>{await this.initCommonStore(t)}});return this.db=e,e}async initCommonStore(e){return await e.createObjectStore(ei,{autoIncrement:!0})}async updateCommonData(e,t){await this.initDB(),await this.db?.put(ei,t,e)}async getCommonData(e){return await this.initDB(),await this.db?.get(ei,e)}async deleteCommonData(e){await this.initDB(),await this.db?.delete(ei,e)}}const _i=new yn,gh="https://www.google-analytics.com/mp/collect",pa="reve_client_id";class ph{constructor(){this.instance=this}instance;async event(e,t={}){const i=await this.getClientId(),r="G-DEMH5X5XXQ",o="NUJCMdJGTbqx7S0zRaOC4w",{ipAddresses:a,userInfo:c}=window.electron.process.env,s=c&&JSON.parse(c);return await fetch(`${gh}?measurement_id=${r}&api_secret=${o}`,{method:"POST",body:JSON.stringify({client_id:i,user_id:"user_"+i,events:[{name:e,params:{engagement_time_msec:"100",session_id:i,osName:Js,appVersion:fh,uip:a,...s,...t}}]})}).then(u=>u)}async getClientId(){const e=await _i.getCommonData(pa),t=e||Rn();return e||_i.updateCommonData(pa,t),t}}const mh=new ph,oe=(n,e)=>{yt?mh.event(n,e):window.gtag("event",n,e)},vh=()=>{try{yt&&oe("enter_app",{})}catch(n){console.error(n)}},{createElement:qt,createContext:_h,forwardRef:qs,useCallback:qe,useContext:Zs,useEffect:et,useImperativeHandle:Qs,useLayoutEffect:bh,useMemo:yh,useRef:Ie,useState:Tn}=vs,ma=vs["useId".toString()],wn=bh,Th=typeof ma=="function"?ma:()=>null;let wh=0;function Eo(n=null){const e=Th(),t=Ie(n||e||null);return t.current===null&&(t.current=""+wh++),t.current}const Vi=_h(null);Vi.displayName="PanelGroupContext";function el({children:n=null,className:e="",collapsedSize:t=0,collapsible:i=!1,defaultSize:r=null,forwardedRef:o,id:a=null,maxSize:c=null,minSize:s,onCollapse:u=null,onResize:l=null,order:g=null,style:h={},tagName:f="div"}){const d=Zs(Vi);if(d===null)throw Error("Panel components must be rendered within a PanelGroup container");const p=Eo(a),{collapsePanel:m,expandPanel:b,getPanelSize:_,getPanelStyle:v,registerPanel:y,resizePanel:w,units:x,unregisterPanel:C}=d;s==null&&(x==="percentages"?s=10:s=0);const R=Ie({onCollapse:u,onResize:l});et(()=>{R.current.onCollapse=u,R.current.onResize=l});const D=v(p,r),S=Ie({size:va(D)}),T=Ie({callbacksRef:R,collapsedSize:t,collapsible:i,defaultSize:r,id:p,idWasAutoGenerated:a==null,maxSize:c,minSize:s,order:g});return wn(()=>{S.current.size=va(D),T.current.callbacksRef=R,T.current.collapsedSize=t,T.current.collapsible=i,T.current.defaultSize=r,T.current.id=p,T.current.idWasAutoGenerated=a==null,T.current.maxSize=c,T.current.minSize=s,T.current.order=g}),wn(()=>(y(p,T),()=>{C(p)}),[g,p,y,C]),Qs(o,()=>({collapse:()=>m(p),expand:()=>b(p),getCollapsed(){return S.current.size===0},getId(){return p},getSize(O){return _(p,O)},resize:(O,M)=>w(p,O,M)}),[m,b,_,p,w]),qt(f,{children:n,className:e,"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-id":p,"data-panel-size":parseFloat(""+D.flexGrow).toFixed(1),id:`data-panel-id-${p}`,style:{...D,...h}})}const ro=qs((n,e)=>qt(el,{...n,forwardedRef:e}));el.displayName="Panel";ro.displayName="forwardRef(Panel)";function va(n){const{flexGrow:e}=n;return typeof e=="string"?parseFloat(e):e}const Bt=10;function mn(n,e,t,i,r,o,a,c){const{id:s,panels:u,units:l}=e,g=l==="pixels"?bt(s):NaN,{sizes:h}=c||{},f=h||o,d=Se(u),p=f.concat();let m=0;{const v=r<0?i:t,y=d.findIndex(R=>R.current.id===v),w=d[y],x=f[y],C=oo(l,g,w,x,x+Math.abs(r),n);if(x===C)return f;C===0&&x>0&&a.set(v,x),r=r<0?x-C:C-x}let b=r<0?t:i,_=d.findIndex(v=>v.current.id===b);for(;;){const v=d[_],y=f[_],w=Math.abs(r)-Math.abs(m),x=oo(l,g,v,y,y-w,n);if(y!==x&&(x===0&&y>0&&a.set(v.current.id,y),m+=y-x,p[_]=x,m.toPrecision(Bt).localeCompare(Math.abs(r).toPrecision(Bt),void 0,{numeric:!0})>=0))break;if(r<0){if(--_<0)break}else if(++_>=d.length)break}return m===0?f:(b=r<0?i:t,_=d.findIndex(v=>v.current.id===b),p[_]=f[_]+m,p)}function Wt(n,e,t){e.forEach((i,r)=>{const o=n[r];if(!o)return;const{callbacksRef:a,collapsedSize:c,collapsible:s,id:u}=o.current,l=t[u];if(l!==i){t[u]=i;const{onCollapse:g,onResize:h}=a.current;h&&h(i,l),s&&g&&((l==null||l===c)&&i!==c?g(!1):l!==c&&i===c&&g(!0))}})}function Eh({groupId:n,panels:e,units:t}){const i=t==="pixels"?bt(n):NaN,r=Se(e),o=Array(r.length);let a=0,c=100;for(let s=0;s<r.length;s++){const u=r[s],{defaultSize:l}=u.current;l!=null&&(a++,o[s]=t==="pixels"?l/i*100:l,c-=o[s])}for(let s=0;s<r.length;s++){const u=r[s];let{defaultSize:l,id:g,maxSize:h,minSize:f}=u.current;if(l!=null)continue;t==="pixels"&&(f=f/i*100,h!=null&&(h=h/i*100));const d=r.length-a,p=Math.min(h??100,Math.max(f,c/d));o[s]=p,a++,c-=p}if(c!==0)for(let s=0;s<r.length;s++){const u=r[s];let{maxSize:l,minSize:g}=u.current;t==="pixels"&&(g=g/i*100,l!=null&&(l=l/i*100));const h=Math.min(l??100,Math.max(g,o[s]+c));if(h!==o[s]&&(c-=h-o[s],o[s]=h,Math.abs(c).toFixed(3)==="0.000"))break}return Math.abs(c).toFixed(3),o}function Er(n,e){if(e.length<2)return[null,null];const t=e.findIndex(a=>a.current.id===n);if(t<0)return[null,null];const i=t===e.length-1,r=i?e[t-1].current.id:n,o=i?n:e[t+1].current.id;return[r,o]}function bt(n){const e=Nn(n);if(e==null)return NaN;const t=e.getAttribute("data-panel-group-direction"),i=So(n);return t==="horizontal"?e.offsetWidth-i.reduce((r,o)=>r+o.offsetWidth,0):e.offsetHeight-i.reduce((r,o)=>r+o.offsetHeight,0)}function tl(n,e,t){if(n.size===1)return"100";const r=Se(n).findIndex(a=>a.current.id===e),o=t[r];return o==null?"0":o.toPrecision(Bt)}function Sh(n){const e=document.querySelector(`[data-panel-id="${n}"]`);return e||null}function Nn(n){const e=document.querySelector(`[data-panel-group-id="${n}"]`);return e||null}function Gi(n){const e=document.querySelector(`[data-panel-resize-handle-id="${n}"]`);return e||null}function xh(n){return nl().findIndex(i=>i.getAttribute("data-panel-resize-handle-id")===n)??null}function nl(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function So(n){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${n}"]`))}function xo(n,e,t){const i=Gi(e),r=So(n),o=i?r.indexOf(i):-1,a=t[o]?.current?.id??null,c=t[o+1]?.current?.id??null;return[a,c]}function Se(n){return Array.from(n.values()).sort((e,t)=>{const i=e.current.order,r=t.current.order;return i==null&&r==null?0:i==null?-1:r==null?1:i-r})}function oo(n,e,t,i,r,o=null){let{collapsedSize:a,collapsible:c,maxSize:s,minSize:u}=t.current;if(n==="pixels"&&(a=a/e*100,s!=null&&(s=s/e*100),u=u/e*100),c){if(i>a){if(r<=u/2+a)return a}else if(!o?.type?.startsWith("key")&&r<u)return a}return Math.min(s??100,Math.max(u,r))}function Ah(n,e){const{collapsible:t,defaultSize:i,maxSize:r,minSize:o}=e.current;(o<0||n==="percentages"&&o>100)&&(e.current.minSize=0),r!=null&&(r<0||n==="percentages"&&r>100)&&(e.current.maxSize=null),i!==null&&(i<0||n==="percentages"&&i>100?e.current.defaultSize=null:i<o&&!t?e.current.defaultSize=o:r!=null&&i>r&&(e.current.defaultSize=r))}function Sr({groupId:n,panels:e,nextSizes:t,prevSizes:i,units:r}){t=[...t];const o=Se(e),a=r==="pixels"?bt(n):NaN;let c=0;for(let s=0;s<o.length;s++){const u=o[s],l=i[s],g=t[s],h=oo(r,a,u,l,g);g!=h&&(c+=g-h,t[s]=h)}if(c.toFixed(3)!=="0.000")for(let s=0;s<o.length;s++){const u=o[s];let{maxSize:l,minSize:g}=u.current;r==="pixels"&&(g=g/a*100,l!=null&&(l=l/a*100));const h=Math.min(l??100,Math.max(g,t[s]+c));if(h!==t[s]&&(c-=h-t[s],t[s]=h,Math.abs(c).toFixed(3)==="0.000"))break}return c.toFixed(3),t}function il(n,e="Assertion failed!"){if(!n)throw console.error(e),Error(e)}function Lh({committedValuesRef:n,groupId:e,panels:t,setSizes:i,sizes:r,panelSizeBeforeCollapse:o}){et(()=>{const{direction:a,panels:c}=n.current,s=Nn(e);il(s!=null,`No group found for id "${e}"`);const{height:u,width:l}=s.getBoundingClientRect(),h=So(e).map(f=>{const d=f.getAttribute("data-panel-resize-handle-id"),p=Se(c),[m,b]=xo(e,d,p);if(m==null||b==null)return()=>{};let _=0,v=100,y=0,w=0;p.forEach(T=>{const{id:O,maxSize:M,minSize:L}=T.current;O===m?(_=L,v=M??100):(y+=L,w+=M??100)});const x=Math.min(v,100-y),C=Math.max(_,(p.length-1)*100-w),R=tl(c,m,r);f.setAttribute("aria-valuemax",""+Math.round(x)),f.setAttribute("aria-valuemin",""+Math.round(C)),f.setAttribute("aria-valuenow",""+Math.round(parseInt(R)));const D=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const O=p.findIndex(M=>M.current.id===m);if(O>=0){const M=p[O],L=r[O];if(L!=null){let B=0;L.toPrecision(Bt)<=M.current.minSize.toPrecision(Bt)?B=a==="horizontal"?l:u:B=-(a==="horizontal"?l:u);const F=mn(T,n.current,m,b,B,r,o.current,null);r!==F&&i(F)}}break}}};f.addEventListener("keydown",D);const S=Sh(m);return S!=null&&f.setAttribute("aria-controls",S.id),()=>{f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow"),f.removeEventListener("keydown",D),S!=null&&f.removeAttribute("aria-controls")}});return()=>{h.forEach(f=>f())}},[n,e,t,o,i,r])}function Dh({disabled:n,handleId:e,resizeHandler:t}){et(()=>{if(n||t==null)return;const i=Gi(e);if(i==null)return;const r=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),t(o);break}case"F6":{o.preventDefault();const a=nl(),c=xh(e);il(c!==null);const s=o.shiftKey?c>0?c-1:a.length-1:c+1<a.length?c+1:0;a[s].focus();break}}};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}},[n,e,t])}function xr(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function rl(n,e,t,i=0,r=null){const o=t==="horizontal";let a=0;if(ao(n))a=o?n.clientX:n.clientY;else if(so(n)){const l=n.touches[0];a=o?l.screenX:l.screenY}else return 0;const c=Gi(e),s=r||c.getBoundingClientRect(),u=o?s.left:s.top;return a-u-i}function Oh(n,e,t,i,r,o,a){const{dragOffset:c=0,dragHandleRect:s,sizes:u}=a||{},l=u||o;if(Rh(n)){const g=r==="horizontal",f=Nn(e).getBoundingClientRect(),d=g?f.width:f.height,p=n.shiftKey?10:100,m=d/p;let b=0;switch(n.key){case"ArrowDown":b=g?0:m;break;case"ArrowLeft":b=g?-m:0;break;case"ArrowRight":b=g?m:0;break;case"ArrowUp":b=g?0:-m;break;case"End":b=d;break;case"Home":b=-d;break}const[_,v]=xo(e,t,i),y=b<0?_:v,w=i.findIndex(C=>C.current.id===y),x=i[w];if(x.current.collapsible){const C=l[w];(C===0||C.toPrecision(Bt)===x.current.minSize.toPrecision(Bt))&&(b=b<0?-x.current.minSize*d:x.current.minSize*d)}return b}else return rl(n,t,r,c,s)}function Rh(n){return n.type==="keydown"}function ao(n){return n.type.startsWith("mouse")}function so(n){return n.type.startsWith("touch")}let lo=null,It=null;function ol(n){switch(n){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function Ch(){It!==null&&(document.head.removeChild(It),lo=null,It=null)}function Ar(n){if(lo===n)return;lo=n;const e=ol(n);It===null&&(It=document.createElement("style"),document.head.appendChild(It)),It.innerHTML=`*{cursor: ${e}!important;}`}function Ih(n,e=10){let t=null;return(...r)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}function al(n){return n.map(e=>{const{minSize:t,order:i}=e.current;return i?`${i}:${t}`:`${t}`}).sort((e,t)=>e.localeCompare(t)).join(",")}function sl(n,e){try{const t=e.getItem(`PanelGroup:sizes:${n}`);if(t){const i=JSON.parse(t);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Nh(n,e,t){const i=sl(n,t);if(i){const r=al(e);return i[r]??null}return null}function Bh(n,e,t,i){const r=al(e),o=sl(n,i)||{};o[r]=t;try{i.setItem(`PanelGroup:sizes:${n}`,JSON.stringify(o))}catch(a){console.error(a)}}const Lr={};function _a(n){try{if(typeof localStorage<"u")n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}const vn={getItem:n=>(_a(vn),vn.getItem(n)),setItem:(n,e)=>{_a(vn),vn.setItem(n,e)}};function ll({autoSaveId:n,children:e=null,className:t="",direction:i,disablePointerEventsDuringResize:r=!1,forwardedRef:o,id:a=null,onLayout:c,storage:s=vn,style:u={},tagName:l="div",units:g="percentages"}){const h=Eo(a),[f,d]=Tn(null),[p,m]=Tn(new Map),b=Ie(null);Ie({didLogDefaultSizeWarning:!1,didLogIdAndOrderWarning:!1,didLogInvalidLayoutWarning:!1,prevPanelIds:[]});const _=Ie({onLayout:c});et(()=>{_.current.onLayout=c});const v=Ie({}),[y,w]=Tn([]),x=Ie(new Map),C=Ie(0),R=Ie({direction:i,id:h,panels:p,sizes:y,units:g});Qs(o,()=>({getId:()=>h,getLayout:I=>{const{sizes:N,units:$}=R.current;if((I??$)==="pixels"){const j=bt(h);return N.map(V=>V/100*j)}else return N},setLayout:(I,N)=>{const{id:$,panels:H,sizes:j,units:V}=R.current;if((N||V)==="pixels"){const q=bt($);I=I.map(U=>U/q*100)}const G=v.current,k=Se(H),Y=Sr({groupId:$,panels:H,nextSizes:I,prevSizes:j,units:V});xr(j,Y)||(w(Y),Wt(k,Y,G))}}),[h]),wn(()=>{R.current.direction=i,R.current.id=h,R.current.panels=p,R.current.sizes=y,R.current.units=g}),Lh({committedValuesRef:R,groupId:h,panels:p,setSizes:w,sizes:y,panelSizeBeforeCollapse:x}),et(()=>{const{onLayout:I}=_.current,{panels:N,sizes:$}=R.current;if($.length>0){I&&I($);const H=v.current,j=Se(N);Wt(j,$,H)}},[y]),wn(()=>{const{id:I,sizes:N,units:$}=R.current;if(N.length===p.size)return;let H=null;if(n){const j=Se(p);H=Nh(n,j,s)}if(H!=null){const j=Sr({groupId:I,panels:p,nextSizes:H,prevSizes:H,units:$});w(j)}else{const j=Eh({groupId:I,panels:p,units:$});w(j)}},[n,p,s]),et(()=>{if(n){if(y.length===0||y.length!==p.size)return;const I=Se(p);Lr[n]||(Lr[n]=Ih(Bh,100)),Lr[n](n,I,y,s)}},[n,p,y,s]),wn(()=>{if(g==="pixels"){const I=new ResizeObserver(()=>{const{panels:N,sizes:$}=R.current,H=Sr({groupId:h,panels:N,nextSizes:$,prevSizes:$,units:g});xr($,H)||w(H)});return I.observe(Nn(h)),()=>{I.disconnect()}}},[h,g]);const D=qe((I,N)=>{const{panels:$,units:H}=R.current,V=Se($).findIndex(Y=>Y.current.id===I),G=y[V];if((N??H)==="pixels"){const Y=bt(h);return G/100*Y}else return G},[h,y]),S=qe((I,N)=>{const{panels:$}=R.current;return $.size===0?{flexBasis:0,flexGrow:N??void 0,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:tl($,I,y),flexShrink:1,overflow:"hidden",pointerEvents:r&&f!==null?"none":void 0}},[f,r,y]),T=qe((I,N)=>{const{units:$}=R.current;Ah($,N),m(H=>{if(H.has(I))return H;const j=new Map(H);return j.set(I,N),j})},[]),O=qe(I=>$=>{$.preventDefault();const{direction:H,panels:j,sizes:V}=R.current,G=Se(j),[k,Y]=xo(h,I,G);if(k==null||Y==null)return;let q=Oh($,h,I,G,H,V,b.current);if(q===0)return;const Z=Nn(h).getBoundingClientRect(),se=H==="horizontal";document.dir==="rtl"&&se&&(q=-q);const Ae=se?Z.width:Z.height,Le=q/Ae*100,ct=mn($,R.current,k,Y,Le,V,x.current,b.current),tn=!xr(V,ct);if((ao($)||so($))&&C.current!=Le&&Ar(tn?se?"horizontal":"vertical":se?q<0?"horizontal-min":"horizontal-max":q<0?"vertical-min":"vertical-max"),tn){const ko=v.current;w(ct),Wt(G,ct,ko)}C.current=Le},[h]),M=qe(I=>{m(N=>{if(!N.has(I))return N;const $=new Map(N);return $.delete(I),$})},[]),L=qe(I=>{const{panels:N,sizes:$}=R.current,H=N.get(I);if(H==null)return;const{collapsedSize:j,collapsible:V}=H.current;if(!V)return;const G=Se(N),k=G.indexOf(H);if(k<0)return;const Y=$[k];if(Y===j)return;x.current.set(I,Y);const[q,U]=Er(I,G);if(q==null||U==null)return;const se=k===G.length-1?Y:j-Y,Ae=mn(null,R.current,q,U,se,$,x.current,null);if($!==Ae){const Le=v.current;w(Ae),Wt(G,Ae,Le)}},[]),B=qe(I=>{const{panels:N,sizes:$}=R.current,H=N.get(I);if(H==null)return;const{collapsedSize:j,minSize:V}=H.current,G=x.current.get(I)||V;if(!G)return;const k=Se(N),Y=k.indexOf(H);if(Y<0||$[Y]!==j)return;const[U,Z]=Er(I,k);if(U==null||Z==null)return;const Ae=Y===k.length-1?j-G:G,Le=mn(null,R.current,U,Z,Ae,$,x.current,null);if($!==Le){const ct=v.current;w(Le),Wt(k,Le,ct)}},[]),F=qe((I,N,$)=>{const{id:H,panels:j,sizes:V,units:G}=R.current;if(($||G)==="pixels"){const $t=bt(H);N=N/$t*100}const k=j.get(I);if(k==null)return;let{collapsedSize:Y,collapsible:q,maxSize:U,minSize:Z}=k.current;if(G==="pixels"){const $t=bt(H);Z=Z/$t*100,U!=null&&(U=U/$t*100)}const se=Se(j),Ae=se.indexOf(k);if(Ae<0)return;const Le=V[Ae];if(Le===N)return;q&&N===Y||(N=Math.min(U??100,Math.max(Z,N)));const[ct,tn]=Er(I,se);if(ct==null||tn==null)return;const ec=Ae===se.length-1?Le-N:N-Le,fr=mn(null,R.current,ct,tn,ec,V,x.current,null);if(V!==fr){const $t=v.current;w(fr),Wt(se,fr,$t)}},[]),P=yh(()=>({activeHandleId:f,collapsePanel:L,direction:i,expandPanel:B,getPanelSize:D,getPanelStyle:S,groupId:h,registerPanel:T,registerResizeHandle:O,resizePanel:F,startDragging:(I,N)=>{if(d(I),ao(N)||so(N)){const $=Gi(I);b.current={dragHandleRect:$.getBoundingClientRect(),dragOffset:rl(N,I,i),sizes:R.current.sizes}}},stopDragging:()=>{Ch(),d(null),b.current=null},units:g,unregisterPanel:M}),[f,L,i,B,D,S,h,T,O,F,g,M]),z={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return qt(Vi.Provider,{children:qt(l,{children:e,className:t,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":h,"data-panel-group-units":g,style:{...z,...u}}),value:P})}const cl=qs((n,e)=>qt(ll,{...n,forwardedRef:e}));ll.displayName="PanelGroup";cl.displayName="forwardRef(PanelGroup)";function dl({children:n=null,className:e="",disabled:t=!1,id:i=null,onDragging:r,style:o={},tagName:a="div"}){const c=Ie(null),s=Ie({onDragging:r});et(()=>{s.current.onDragging=r});const u=Zs(Vi);if(u===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:l,direction:g,groupId:h,registerResizeHandle:f,startDragging:d,stopDragging:p}=u,m=Eo(i),b=l===m,[_,v]=Tn(!1),[y,w]=Tn(null),x=qe(()=>{c.current.blur(),p();const{onDragging:D}=s.current;D&&D(!1)},[p]);et(()=>{if(t)w(null);else{const R=f(m);w(()=>R)}},[t,m,f]),et(()=>{if(t||y==null||!b)return;const R=O=>{y(O)},D=O=>{y(O)},T=c.current.ownerDocument;return T.body.addEventListener("contextmenu",x),T.body.addEventListener("mousemove",R),T.body.addEventListener("touchmove",R),T.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",x),window.addEventListener("touchend",x),()=>{T.body.removeEventListener("contextmenu",x),T.body.removeEventListener("mousemove",R),T.body.removeEventListener("touchmove",R),T.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",x),window.removeEventListener("touchend",x)}},[g,t,b,y,x]),Dh({disabled:t,handleId:m,resizeHandler:y});const C={cursor:ol(g),touchAction:"none",userSelect:"none"};return qt(a,{children:n,className:e,"data-resize-handle-active":b?"pointer":_?"keyboard":void 0,"data-panel-group-direction":g,"data-panel-group-id":h,"data-panel-resize-handle-enabled":!t,"data-panel-resize-handle-id":m,onBlur:()=>v(!1),onFocus:()=>v(!0),onMouseDown:R=>{d(m,R.nativeEvent);const{onDragging:D}=s.current;D&&D(!0)},onMouseUp:x,onTouchCancel:x,onTouchEnd:x,onTouchStart:R=>{d(m,R.nativeEvent);const{onDragging:D}=s.current;D&&D(!0)},ref:c,role:"separator",style:{...C,...o},tabIndex:0})}dl.displayName="PanelResizeHandle";var Fh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ph=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mh=(n,e)=>{const t=E.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:c,...s},u)=>E.createElement("svg",{ref:u,...Fh,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:`lucide lucide-${Ph(n)}`,...s},[...e.map(([l,g])=>E.createElement(l,g)),...(Array.isArray(c)?c:[c])||[]]));return t.displayName=`${n}`,t};var ae=Mh;const kh=ae("ArrowUpRightFromCircle",[["path",{d:"M22 12A10 10 0 1 1 12 2",key:"1fm58d"}],["path",{d:"M22 2 12 12",key:"yg2myt"}],["path",{d:"M16 2h6v6",key:"zan5cs"}]]),zh=ae("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]),$h=ae("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),Uh=ae("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),ul=ae("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]),jh=ae("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]),Ao=ae("FileType",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M9 13v-1h6v1",key:"1bb014"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}]]),Hh=ae("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),fl=ae("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),Wh=ae("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),Yh=ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),ba=ae("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),hl=ae("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Xh=ae("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),gl=ae("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Lo=ae("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Vh=ae("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]),Gh=ae("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]),Kh=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Jh=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),qh=ae("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Zh=ae("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]),Qh=ae("XSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var tt;(function(n){n.DoubleClickItemToExpand="double-click-item-to-expand",n.ClickItemToExpand="click-item-to-expand",n.ClickArrowToExpand="click-arrow-to-expand"})(tt||(tt={}));var bi=globalThis&&globalThis.__assign||function(){return bi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},bi.apply(this,arguments)},eg=function(n,e){return{mode:n.mode,createInteractiveElementProps:function(t,i,r,o){return bi(bi({},e.createInteractiveElementProps(t,i,r,o)),n.createInteractiveElementProps(t,i,r,o))}}},Do=function(n){return n.ctrlKey||navigator.platform.toUpperCase().indexOf("MAC")>=0&&n.metaKey},tg=function(){function n(e){this.mode=tt.DoubleClickItemToExpand,this.environment=e}return n.prototype.createInteractiveElementProps=function(e,t,i,r){var o=this;return{onClick:function(a){i.focusItem(),a.shiftKey?i.selectUpTo(!a.ctrlKey):Do(a)?r.isSelected?i.unselectItem():i.addToSelectedItems():i.selectItem()},onDoubleClick:function(){i.focusItem(),i.selectItem(),e.isFolder&&i.toggleExpandedState(),(!e.isFolder||o.environment.canInvokePrimaryActionOnItemContainer)&&i.primaryAction()},onFocus:function(){i.focusItem()},onDragStart:function(a){a.dataTransfer.dropEffect="move",i.startDragging()},onDragOver:function(a){a.preventDefault()},draggable:r.canDrag&&!r.isRenaming,tabIndex:r.isRenaming?void 0:r.isFocused?0:-1}},n}(),ng=function(){function n(e){this.mode=tt.ClickItemToExpand,this.environment=e}return n.prototype.createInteractiveElementProps=function(e,t,i,r){var o=this;return{onClick:function(a){i.focusItem(),a.shiftKey?i.selectUpTo(!a.ctrlKey):Do(a)?r.isSelected?i.unselectItem():i.addToSelectedItems():(e.isFolder&&i.toggleExpandedState(),i.selectItem(),(!e.isFolder||o.environment.canInvokePrimaryActionOnItemContainer)&&i.primaryAction())},onFocus:function(){i.focusItem()},onDragStart:function(a){a.dataTransfer.dropEffect="move",i.startDragging()},onDragOver:function(a){a.preventDefault()},draggable:r.canDrag&&!r.isRenaming,tabIndex:r.isRenaming?void 0:r.isFocused?0:-1}},n}(),ig=function(){function n(e){this.mode=tt.ClickItemToExpand,this.environment=e}return n.prototype.createInteractiveElementProps=function(e,t,i,r){var o=this;return{onClick:function(a){i.focusItem(),a.shiftKey?i.selectUpTo(!a.ctrlKey):Do(a)?r.isSelected?i.unselectItem():i.addToSelectedItems():(i.selectItem(),(!e.isFolder||o.environment.canInvokePrimaryActionOnItemContainer)&&i.primaryAction())},onFocus:function(){i.focusItem()},onDragStart:function(a){a.dataTransfer.dropEffect="move",i.startDragging()},onDragOver:function(a){a.preventDefault()},draggable:r.canDrag&&!r.isRenaming,tabIndex:r.isRenaming?void 0:r.isFocused?0:-1}},n}(),ya=function(n,e){switch(n){case tt.DoubleClickItemToExpand:return new tg(e);case tt.ClickItemToExpand:return new ng(e);case tt.ClickArrowToExpand:return new ig(e);default:throw Error("Unknown interaction mode ".concat(n))}},pl=E.createContext(null),rg=function(){return E.useContext(pl)},og=function(n){var e=n.children,t=re(),i=t.defaultInteractionMode,r=E.useMemo(function(){var o;return i&&typeof i!="string"?i.extends?eg(i,ya(i.extends,t)):i:ya((o=i)!==null&&o!==void 0?o:tt.ClickItemToExpand,t)},[]);return E.createElement(pl.Provider,{value:r},e)},Oo=function(){var n=re();return E.useCallback(function(e,t){for(var i=n.linearItems[t],r=i[e].depth,o=e;i[o]&&i[o].depth!==r-1;o-=1);var a=i[o];return a||(a={item:n.trees[t].rootItem,depth:0},o=0),{parent:a,parentLinearIndex:o}},[n.linearItems,n.trees])},yi=globalThis&&globalThis.__assign||function(){return yi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},yi.apply(this,arguments)},ml=function(n,e){return n.map(function(t){return[t,e(t)]}).reduce(function(t,i){var r,o=i[0],a=i[1];return yi(yi({},t),(r={},r[o]=a,r))},{})},He=function(){return typeof document<"u"?document:void 0},ag=function(n){var e,t,i=(e=He())===null||e===void 0?void 0:e.querySelector('[data-rct-tree="'.concat(n,'"] [data-rct-item-container="true"]'));return(t=i?.offsetHeight)!==null&&t!==void 0?t:5},sg=function(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom},Ti=function(n){var e=E.useRef(n);return e.current=n,e},Ki=function(n){var e=Ti(n);return E.useCallback(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.current.apply(e,t)},[e])},lg=function(n,e,t,i,r,o,a,c,s){var u=(n-e)/t,l=i[r],g=Math.max(0,Math.floor(u));if(g>l.length-1)return{linearIndex:l.length-1,targetItem:l[l.length-1].item,offset:"bottom",targetLinearItem:l[l.length-1]};var h=l[g],f=o[h.item],d,p=s?f?.isFolder&&a||c?.2:.5:0;return u%1<p?d="top":u%1>1-p&&(d="bottom"),{linearIndex:g,offset:d,targetItem:f,targetLinearItem:h}},cg=function(){var n=Oo(),e=function(t,i,r){var o=n(i,t),a=o.parentLinearIndex,c=o.parent;return r.find(function(s){return s.index===c.item})?!0:c.depth===0?!1:e(t,a,r)};return e},dg=function(n,e,t,i,r,o){var a=re(),c=a.canDropOnFolder,s=a.canDropOnNonFolder,u=a.canDragAndDrop,l=a.linearItems,g=a.items,h=a.canReorderItems,f=a.trees,d=Oo(),p=cg();return Ki(function(m,b,_){var v,y;if(t&&u&&_.current&&!(m.clientX<0||m.clientY<0)){var w=_.current.getBoundingClientRect(),x=sg(m,w);if(l[b].length===0){o({targetType:"root",treeId:b,depth:0,linearIndex:0,targetItem:f[b].rootItem});return}var C=lg(m.clientY,w.top,i,l,b,g,c,s,h),R=C.linearIndex,D=C.offset,S=x?"outside":"".concat(b).concat(R).concat(D??"");if(n!==S){if(e(S),x){r(void 0);return}if(R<0||R>=l[b].length){r(void 0);return}var T=l[b][R],O=!h&&!s&&!g[T.item].isFolder;if(O){var M=d(R,b),L=M.parentLinearIndex,B=M.parent;T=B,R=L}if(p(b,R,t)){r(void 0);return}var F=T.depth,P=g[T.item];if(!D&&!s&&!P.isFolder){r(void 0);return}if(!D&&!c&&P.isFolder){r(void 0);return}if(D&&!h){r(void 0);return}var z=d(R,b).parent;if(t.some(function($){return $.index===T.item})){r(void 0);return}var I=g[z.item].children.indexOf(T.item)+(D==="top"?0:1);D==="top"&&F===((y=(v=l[b][R-1])===null||v===void 0?void 0:v.depth)!==null&&y!==void 0?y:-1)&&(D="bottom",R-=1);var N;D?N={targetType:"between-items",treeId:b,parentItem:z.item,depth:T.depth,linearIndex:R+(D==="top"?0:1),childIndex:I,linePosition:D}:N={targetType:"item",treeId:b,parentItem:z.item,targetItem:T.item,depth:T.depth,linearIndex:R},o(N)}}})},vl=function(){var n=re();return E.useCallback(function(e,t){if(e.targetType==="between-items"){if(!n.canReorderItems)return!1}else if(e.targetType==="root"){if(!n.canDropOnFolder)return!1}else{var i=n.items[e.targetItem];if(!n.canDropOnFolder&&i.isFolder||!n.canDropOnNonFolder&&!i.isFolder)return!1}return!(n.canDropAt&&(!t||!n.canDropAt(t,e)))},[n])},Ta=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},ug=function(){var n=re(),e=Oo(),t=vl();return E.useCallback(function(i,r){var o=n.linearItems[i];return o.map(function(a,c){var s,u,l=a.item,g=a.depth,h=e(c,i).parent,f=n.items[h.item].children.indexOf(l),d={targetType:"item",parentItem:h.item,targetItem:l,linearIndex:c,depth:g,treeId:i},p={targetType:"between-items",parentItem:h.item,linePosition:"top",childIndex:f,depth:g,treeId:i,linearIndex:c},m={targetType:"between-items",parentItem:h.item,linePosition:"bottom",linearIndex:c+1,childIndex:f+1,depth:g,treeId:i},b=g===((u=(s=o[c-1])===null||s===void 0?void 0:s.depth)!==null&&u!==void 0?u:-1);return b?[d,m]:[p,d,m]}).reduce(function(a,c){return Ta(Ta([],a,!0),c,!0)},[]).filter(function(a){return t(a,r)})},[t,n.items,n.linearItems,e])},ti=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},wi=function(n,e,t){var i=E.useRef();E.useEffect(function(){if(!i.current)i.current=ti([],t,!0),n();else{var r=i.current.some(function(o,a){return o!==t[a]});r&&(i.current=ti([],t,!0),n())}},ti(ti([],e,!0),t,!0))};function Qt(n){n===void 0&&(n=!1);var e=E.useRef(new Array);return E.useEffect(function(){if(n)return function(){};var t=e.current;return function(){return t.forEach(function(i){return cancelAnimationFrame(i)})}},[n,e]),E.useCallback(function(t){var i=requestAnimationFrame(function(){e.current.splice(e.current.indexOf(i),1),t()});e.current.push(i)},[e])}var _l=E.createContext(null),Ke=function(){return E.useContext(_l)},fg=function(n){var e=n.children,t=re(),i=E.useState(!1),r=i[0],o=i[1],a=E.useState(4),c=a[0],s=a[1],u=E.useState({}),l=u[0],g=u[1],h=E.useState(0),f=h[0],d=h[1],p=E.useState(),m=p[0],b=p[1],_=E.useState(),v=_[0],y=_[1],w=E.useState("_nodrag"),x=w[0],C=w[1],R=ug(),D=Qt(),S=E.useCallback(function(j,V){var G;if(t.activeTreeId&&(!((G=t.viewState[t.activeTreeId])===null||G===void 0)&&G.focusedItem)&&t.linearItems&&V){var k=t.viewState[t.activeTreeId].focusedItem,Y=R(t.activeTreeId,V),q=Y.findIndex(function(U){return U.targetType==="item"?U.targetItem===k:U.targetType==="between-items"?t.items[U.parentItem].children[U.childIndex]===k:!1});d(q?Math.min(q+1,Y.length-1):0)}else d(0)},[t.activeTreeId,t.items,t.linearItems,t.viewState,R]),T=E.useCallback(function(){o(!1),s(4),g({}),d(0),b(void 0),y(void 0),C("_nodrag")},[]);wi(function(){t.activeTreeId&&t.linearItems[t.activeTreeId]&&l[t.activeTreeId]&&S(l[t.activeTreeId],m)},[m,t.activeTreeId,t.linearItems,S,l],[t.activeTreeId]),wi(function(){r&&t.activeTreeId&&y(l[t.activeTreeId][f])},[f,t.activeTreeId,r,l],[f,t.activeTreeId]);var O=vl(),M=function(j){var V;m&&!O(j,m)||(y(j),t.setActiveTree(j.treeId),m&&t.activeTreeId!==j.treeId&&((V=t.onSelectItems)===null||V===void 0||V.call(t,m.map(function(G){return G.index}),j.treeId)))},L=dg(x,C,m,c,y,M),B=Ki(function(){m&&v&&t.onDrop&&(t.onDrop(m,v),D(function(){var j;(j=t.onFocusItem)===null||j===void 0||j.call(t,m[0],v.treeId),T()}))}),F=E.useCallback(function(j,V){var G=ml(t.treeIds,function(Y){return R(Y,j)}),k=ag(V);s(k),b(j),g(G),t.activeTreeId&&S(G[t.activeTreeId],j)},[t.activeTreeId,t.treeIds,R,S]),P=E.useCallback(function(){var j,V,G;if(t.canDragAndDrop&&t.activeTreeId){var k=(V=(j=t.viewState[t.activeTreeId])===null||j===void 0?void 0:j.selectedItems)!==null&&V!==void 0?V:[(G=t.viewState[t.activeTreeId])===null||G===void 0?void 0:G.focusedItem];if(k.length===0||k[0]===void 0)return;var Y=k.map(function(q){return t.items[q]});if(t.canDrag&&!t.canDrag(Y))return;F(Y,t.activeTreeId),setTimeout(function(){o(!0)})}},[F,t]),z=E.useCallback(function(){T()},[T]),I=E.useCallback(function(){B(),T()},[B,T]),N=E.useCallback(function(){d(function(j){return Math.max(0,j-1)})},[]),$=E.useCallback(function(){t.activeTreeId&&d(function(j){return Math.min(l[t.activeTreeId].length,j+1)})},[t.activeTreeId,l]),H=E.useMemo(function(){return{onStartDraggingItems:F,startProgrammaticDrag:P,abortProgrammaticDrag:z,completeProgrammaticDrag:I,programmaticDragUp:N,programmaticDragDown:$,draggingItems:m,draggingPosition:v,itemHeight:c,isProgrammaticallyDragging:r,onDragOverTreeHandler:L,viableDragPositions:l}},[F,P,z,I,N,$,m,v,c,r,L,l]);return E.useEffect(function(){return window.addEventListener("dragend",T),window.addEventListener("drop",B),function(){window.removeEventListener("dragend",T),window.removeEventListener("drop",B)}},[B,T]),E.createElement(_l.Provider,{value:H},e)},En=globalThis&&globalThis.__assign||function(){return En=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},En.apply(this,arguments)},hg=function(n,e){var t=re(),i=Ke();E.useImperativeHandle(n,function(){return En(En(En({},e),t),{treeEnvironmentContext:t,dragAndDropContext:i})})},gg=function(n,e,t){return e===void 0&&(e=50),t===void 0&&(t=1e4),new Promise(function(i){n()&&i();var r,o=setInterval(function(){n()&&r()},e),a=setTimeout(function(){r()},t);r=function(){clearInterval(o),clearTimeout(a),i()}})},bl=globalThis&&globalThis.__awaiter||function(n,e,t,i){function r(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function c(l){try{u(i.next(l))}catch(g){a(g)}}function s(l){try{u(i.throw(l))}catch(g){a(g)}}function u(l){l.done?o(l.value):r(l.value).then(c,s)}u((i=i.apply(n,e||[])).next())})},yl=globalThis&&globalThis.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(l){return s([u,l])}}function s(u){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(t=0)),t;)try{if(i=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],r=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wa=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},Tl=E.createContext(null),pg=function(){return E.useContext(Tl)},wl=function(n,e,t){return bl(void 0,void 0,void 0,function(){var i,r,o,a,c,s,u;return yl(this,function(l){for(i=function(g){gg(function(){var h;return!!(!((h=e.current)===null||h===void 0)&&h[g])}).then(function(){var h,f=(h=e.current)===null||h===void 0?void 0:h[g];f?.isFolder&&(t(f),wl(g,e,t))})},r=0,o=(u=(s=(c=e.current)===null||c===void 0?void 0:c[n])===null||s===void 0?void 0:s.children)!==null&&u!==void 0?u:[];r<o.length;r++)a=o[r],i(a);return[2]})})},mg=E.forwardRef(function(n,e){var t=re(),i=t.onCollapseItem,r=t.items,o=t.trees,a=t.viewState,c=t.onExpandItem,s=t.onFocusItem,u=t.setActiveTree,l=t.onRenameItem,g=t.onSelectItems,h=t.onPrimaryAction,f=t.linearItems,d=Ke(),p=d.abortProgrammaticDrag,m=d.completeProgrammaticDrag,b=d.programmaticDragDown,_=d.programmaticDragUp,v=d.startProgrammaticDrag,y=Ti(r),w=E.useCallback(function(I,N){i?.(r[I],N)},[r,i]),x=E.useCallback(function(I,N){c?.(r[I],N)},[r,c]),C=E.useCallback(function(I,N){s?.(r[I],N)},[r,s]),R=E.useCallback(function(I,N){N===void 0&&(N=!0),u(I,N)},[u]),D=E.useCallback(function(I){var N=f[I],$=N.findIndex(function(V){var G,k=V.item;return k===((G=a[I])===null||G===void 0?void 0:G.focusedItem)}),H=$!==void 0?Math.min(N.length-1,$+1):0,j=r[N[H].item];s?.(j,I)},[r,f,s,a]),S=E.useCallback(function(I){var N=f[I],$=N.findIndex(function(V){var G,k=V.item;return k===((G=a[I])===null||G===void 0?void 0:G.focusedItem)}),H=$!==void 0?Math.max(0,$-1):0,j=r[N[H].item];s?.(j,I)},[r,f,s,a]),T=E.useCallback(function(I,N,$){l?.(r[I],N,$)},[r,l]),O=E.useCallback(function(I,N){g?.(I,N)},[g]),M=E.useCallback(function(I,N){var $,H;!((H=($=a[N])===null||$===void 0?void 0:$.expandedItems)===null||H===void 0)&&H.includes(I)?i?.(r[I],N):c?.(r[I],N)},[r,i,c,a]),L=E.useCallback(function(I,N){var $,H,j,V,G;!((H=($=a[N])===null||$===void 0?void 0:$.selectedItems)===null||H===void 0)&&H.includes(I)?g?.((V=(j=a[N].selectedItems)===null||j===void 0?void 0:j.filter(function(k){return k!==I}))!==null&&V!==void 0?V:[],N):g?.(wa(wa([],(G=a[N].selectedItems)!==null&&G!==void 0?G:[],!0),[I],!1),N)},[g,a]),B=E.useCallback(function(I,N){h?.(r[I],N)},[r,h]),F=E.useCallback(function(I){return bl(void 0,void 0,void 0,function(){return yl(this,function(N){switch(N.label){case 0:return[4,wl(o[I].rootItem,y,function($){return c?.($,I)})];case 1:return N.sent(),[2]}})})},[y,c,o]),P=E.useCallback(function(I){for(var N,$,H=0,j=($=(N=a[I])===null||N===void 0?void 0:N.expandedItems)!==null&&$!==void 0?$:[];H<j.length;H++){var V=j[H];i?.(r[V],I)}},[r,i,a]),z=E.useMemo(function(){return{collapseItem:w,expandItem:x,focusItem:C,focusTree:R,moveFocusDown:D,moveFocusUp:S,renameItem:T,selectItems:O,toggleItemExpandedState:M,toggleItemSelectStatus:L,invokePrimaryAction:B,expandAll:F,collapseAll:P,abortProgrammaticDrag:p,completeProgrammaticDrag:m,moveProgrammaticDragPositionDown:b,moveProgrammaticDragPositionUp:_,startProgrammaticDrag:v}},[w,x,C,R,D,S,T,O,M,L,B,F,P,p,m,b,_,v]);return hg(e,z),E.createElement(Tl.Provider,{value:z},n.children)}),vg=function(n){var e,t,i,r;if(n)if(n.scrollIntoViewIfNeeded)n.scrollIntoViewIfNeeded();else{var o=n.getBoundingClientRect(),a=o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||!!(!((t=(e=He())===null||e===void 0?void 0:e.documentElement)===null||t===void 0)&&t.clientHeight))&&o.right<=(window.innerWidth||!!(!((r=(i=He())===null||i===void 0?void 0:i.documentElement)===null||r===void 0)&&r.clientWidth));a||n.scrollIntoView()}},Ee=globalThis&&globalThis.__assign||function(){return Ee=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ee.apply(this,arguments)},dt=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.filter(function(t){return!!t}).join(" ")},_g=function(n){return{renderItemTitle:function(e){var t=e.title,i=e.context,r=e.info;if(!r.isSearching||!i.isSearchMatching)return t;var o=t.toLowerCase().indexOf(r.search.toLowerCase());return ee.createElement(ee.Fragment,null,o>0&&ee.createElement("span",null,t.slice(0,o)),ee.createElement("span",{className:"rct-tree-item-search-highlight"},t.slice(o,o+r.search.length)),o+r.search.length<t.length&&ee.createElement("span",null,t.slice(o+r.search.length,t.length)))},renderItemArrow:function(e){var t=e.item,i=e.context;return ee.createElement("div",Ee({className:dt(t.isFolder&&"rct-tree-item-arrow-isFolder","rct-tree-item-arrow")},i.arrowProps),t.isFolder&&(i.isExpanded?ee.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",enableBackground:"new 0 0 16 16",xmlSpace:"preserve"},ee.createElement("g",null,ee.createElement("g",null,ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z",className:"rct-tree-item-arrow-path"})))):ee.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 16 16",enableBackground:"new 0 0 16 16",xmlSpace:"preserve"},ee.createElement("g",null,ee.createElement("g",null,ee.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z",className:"rct-tree-item-arrow-path"}))))))},renderItem:function(e){var t=e.item,i=e.depth,r=e.children,o=e.title,a=e.context,c=e.arrow,s=a.isRenaming?"div":"button",u=a.isRenaming?void 0:"button";return ee.createElement("li",Ee({},a.itemContainerWithChildrenProps,{className:dt("rct-tree-item-li",t.isFolder&&"rct-tree-item-li-isFolder",a.isSelected&&"rct-tree-item-li-selected",a.isExpanded&&"rct-tree-item-li-expanded",a.isFocused&&"rct-tree-item-li-focused",a.isDraggingOver&&"rct-tree-item-li-dragging-over",a.isSearchMatching&&"rct-tree-item-li-search-match")}),ee.createElement("div",Ee({},a.itemContainerWithoutChildrenProps,{style:{paddingLeft:"".concat((i+1)*n,"px")},className:dt("rct-tree-item-title-container",t.isFolder&&"rct-tree-item-title-container-isFolder",a.isSelected&&"rct-tree-item-title-container-selected",a.isExpanded&&"rct-tree-item-title-container-expanded",a.isFocused&&"rct-tree-item-title-container-focused",a.isDraggingOver&&"rct-tree-item-title-container-dragging-over",a.isSearchMatching&&"rct-tree-item-title-container-search-match")}),c,ee.createElement(s,Ee({type:u},a.interactiveElementProps,{className:dt("rct-tree-item-button",t.isFolder&&"rct-tree-item-button-isFolder",a.isSelected&&"rct-tree-item-button-selected",a.isExpanded&&"rct-tree-item-button-expanded",a.isFocused&&"rct-tree-item-button-focused",a.isDraggingOver&&"rct-tree-item-button-dragging-over",a.isSearchMatching&&"rct-tree-item-button-search-match")}),o)),r)},renderRenameInput:function(e){var t=e.inputProps,i=e.inputRef,r=e.submitButtonProps,o=e.submitButtonRef,a=e.formProps;return ee.createElement("form",Ee({},a,{className:"rct-tree-item-renaming-form"}),ee.createElement("input",Ee({},t,{ref:i,className:"rct-tree-item-renaming-input"})),ee.createElement("input",Ee({},r,{ref:o,type:"submit",className:"rct-tree-item-renaming-submit-button",value:"🗸"})))},renderTreeContainer:function(e){var t=e.children,i=e.containerProps,r=e.info;return ee.createElement("div",{className:dt("rct-tree-root",r.isFocused&&"rct-tree-root-focus",r.isRenaming&&"rct-tree-root-renaming",r.areItemsSelected&&"rct-tree-root-itemsselected")},ee.createElement("div",Ee({},i,{style:Ee({minHeight:"30px"},i.style)}),t))},renderItemsContainer:function(e){var t=e.children,i=e.containerProps;return ee.createElement("ul",Ee({},i,{className:"rct-tree-items-container"}),t)},renderDragBetweenLine:function(e){var t=e.draggingPosition,i=e.lineProps;return ee.createElement("div",Ee({},i,{style:{left:"".concat(t.depth*n,"px")},className:dt("rct-tree-drag-between-line",t.targetType==="between-items"&&t.linePosition==="top"&&"rct-tree-drag-between-line-top",t.targetType==="between-items"&&t.linePosition==="bottom"&&"rct-tree-drag-between-line-bottom")}))},renderSearchInput:function(e){var t=e.inputProps;return ee.createElement("div",{className:dt("rct-tree-search-input-container")},ee.createElement("span",{className:"rct-tree-input-icon"}),ee.createElement("input",Ee({},t,{className:dt("rct-tree-search-input")})))},renderLiveDescriptorContainer:function(e){var t=e.tree,i=e.children;return ee.createElement("div",{id:"rct-livedescription-".concat(t.treeId),style:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"}},i)},renderDepthOffset:n}},bg=function(n){var e=n.renderItem,t=n.renderItemTitle,i=n.renderItemArrow,r=n.renderRenameInput,o=n.renderItemsContainer,a=n.renderTreeContainer,c=n.renderDragBetweenLine,s=n.renderSearchInput,u=n.renderLiveDescriptorContainer,l=n.renderDepthOffset,g=E.useMemo(function(){return _g(l??10)},[l]),h={renderItem:e,renderItemTitle:t,renderItemArrow:i,renderRenameInput:r,renderItemsContainer:o,renderTreeContainer:a,renderDragBetweenLine:c,renderSearchInput:s,renderLiveDescriptorContainer:u,renderDepthOffset:l},f=Object.entries(g).reduce(function(d,p){var m=p[0],b=p[1],_=m;return h[_]?d[_]=h[_]:d[_]=b,d},{});return f.renderItem.displayName="RenderItem",f.renderItemTitle.displayName="RenderItemTitle",f.renderItemArrow.displayName="RenderItemArrow",f.renderRenameInput.displayName="RenderRenameInput",f.renderItemsContainer.displayName="RenderItemsContainer",f.renderTreeContainer.displayName="RenderTreeContainer",f.renderDragBetweenLine.displayName="RenderDragBetweenLine",f.renderSearchInput.displayName="RenderSearchInput",f},Ro=function(n,e,t,i){var r,o,a;i===void 0&&(i=0);for(var c=[],s=0,u=(o=(r=t[n])===null||r===void 0?void 0:r.children)!==null&&o!==void 0?o:[];s<u.length;s++){var l=u[s],g=t[l];c.push({item:l,depth:i}),g&&g.isFolder&&g.children&&(!((a=e.expandedItems)===null||a===void 0)&&a.includes(l))&&c.push.apply(c,Ro(l,e,t,i+1))}return c},Rt=globalThis&&globalThis.__assign||function(){return Rt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Rt.apply(this,arguments)},yg=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Tg=function(n){var e=n.onExpandItem,t=n.onCollapseItem,i=n.onDrop,r=yg(n,["onExpandItem","onCollapseItem","onDrop"]),o=E.useState({}),a=o[0],c=o[1],s=E.useState(),u=s[0],l=s[1],g=E.useMemo(function(){return Object.keys(a)},[a]),h=r.onFocusItem,f=r.autoFocus,d=r.onRegisterTree,p=r.onUnregisterTree,m=r.items,b=r.viewState,_=Ti(h),v=Ti(b),y=E.useMemo(function(){return ml(g,function(L){var B;return Ro(a[L].rootItem,(B=b[L])!==null&&B!==void 0?B:{},m)})},[a,m,g,b]),w=E.useCallback(function(L,B){var F,P,z,I,N,$,H,j=(F=He())===null||F===void 0?void 0:F.querySelector('[data-rct-tree="'.concat(B,'"] [data-rct-item-id="').concat(L.index,'"]'));(f??!0)&&(((I=(z=(P=He())===null||P===void 0?void 0:P.activeElement)===null||z===void 0?void 0:z.attributes.getNamedItem("data-rct-search-input"))===null||I===void 0?void 0:I.value)!=="true"?(N=j?.focus)===null||N===void 0||N.call(j):vg(j)),(($=v.current[B])===null||$===void 0?void 0:$.focusedItem)!==L.index&&((H=_.current)===null||H===void 0||H.call(_,L,B))},[f,_,v]),x=E.useCallback(function(L){c(function(B){var F;return Rt(Rt({},B),(F={},F[L.treeId]=L,F))}),d?.(L)},[d]),C=E.useCallback(function(L){p?.(a[L]),delete a[L],c(a)},[p,a]),R=E.useCallback(function(L,B){t?.(L,B),c(function(F){return F})},[t]),D=E.useCallback(function(L,B){e?.(L,B),c(function(F){return F})},[e]),S=E.useCallback(function(L,B){i?.(L,B),c(function(F){return F})},[i]),T=E.useCallback(function(L){var B,F,P=(B=He())===null||B===void 0?void 0:B.querySelector('[data-rct-tree="'.concat(L,'"] [data-rct-item-focus="true"]'));(F=P?.focus)===null||F===void 0||F.call(P)},[]),O=E.useCallback(function(L,B){B===void 0&&(B=!0);var F=function(z){var I,N;B&&(f??!0)&&z&&!(!((N=(I=He())===null||I===void 0?void 0:I.querySelector('[data-rct-tree="'.concat(z,'"]')))===null||N===void 0)&&N.contains(document.activeElement))&&T(z)};if(typeof L=="function")l(function(z){var I=L(z);return I!==z&&F(I),I});else{var P=L;l(P),F(P)}},[f,T]),M=bg(r);return Rt(Rt(Rt({},M),r),{onFocusItem:w,registerTree:x,unregisterTree:C,onExpandItem:D,onCollapseItem:R,onDrop:S,setActiveTree:O,treeIds:g,trees:a,activeTreeId:u,linearItems:y})},Ei=globalThis&&globalThis.__assign||function(){return Ei=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Ei.apply(this,arguments)},El=E.createContext(null),re=function(){return E.useContext(El)},wg=E.forwardRef(function(n,e){for(var t,i,r,o=Tg(n),a=n.viewState,c=0,s=Object.keys(o.trees);c<s.length;c++){var u=s[c];!(!((t=a[u])===null||t===void 0)&&t.focusedItem)&&o.trees[u]&&(a[u]=Ei(Ei({},a[u]),{focusedItem:(r=(i=n.items[o.trees[u].rootItem])===null||i===void 0?void 0:i.children)===null||r===void 0?void 0:r[0]}))}return E.createElement(El.Provider,{value:o},E.createElement(og,null,E.createElement(fg,null,E.createElement(mg,{ref:e},n.children))))}),jn=function(){var n,e=_e().treeId,t=re().viewState;return(n=t[e])!==null&&n!==void 0?n:{}},Sl=function(n,e,t){return t.toLowerCase().includes(n.toLowerCase())},Ji=function(n){return re().linearItems[n]},Ea=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},Eg=function(n){var e=E.useRef({target:n,previous:void 0});return e.current.target!==n&&(e.current.previous=e.current.target,e.current.target=n),e.current.previous},xl=function(n){var e=jn(),t=_e().treeId,i=Ji(t),r=re().onSelectItems,o=Eg(e.focusedItem);return E.useCallback(function(a,c){var s,u;c===void 0&&(c=!1);var l=a.index,g=function(m,b){var _=Ea(Ea([],c?[]:m,!0),b.filter(function(v){return c||!m.includes(v)}),!0);r?.(_,t)};if(e&&e.selectedItems&&e.selectedItems.length>0){var h=e.focusedItem===l?o:e.focusedItem,f=n==="last-focus"?i.findIndex(function(m){return h===m.item}):i.findIndex(function(m){var b;return(b=e.selectedItems)===null||b===void 0?void 0:b.includes(m.item)}),d=i.findIndex(function(m){return m.item===l});if(f<d){var p=i.slice(f,d+1).map(function(m){var b=m.item;return b});g((s=e.selectedItems)!==null&&s!==void 0?s:[],p)}else{var p=i.slice(d,f+1).map(function(b){var _=b.item;return _});g((u=e.selectedItems)!==null&&u!==void 0?u:[],p)}}else r?.([l],t)},[e,r,t,n,i,o])},_t=globalThis&&globalThis.__assign||function(){return _t=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},_t.apply(this,arguments)},Sa=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},Sg=function(n){var e,t,i,r,o=_e(),a=o.treeId,c=o.search,s=o.renamingItem,u=o.setRenamingItem,l=re(),g=rg(),h=Ke(),f=xl("last-focus"),d=n&&l.getItemTitle(n),p=E.useMemo(function(){var v;return c===null||c.length===0||!n||!d?!1:((v=l.doesSearchMatchItem)!==null&&v!==void 0?v:Sl)(c,n,d)},[c,n,d,l.doesSearchMatchItem]),m=n&&((t=(e=l.viewState[a])===null||e===void 0?void 0:e.selectedItems)===null||t===void 0?void 0:t.includes(n.index)),b=n&&((r=(i=l.viewState[a])===null||i===void 0?void 0:i.expandedItems)===null||r===void 0?void 0:r.includes(n.index)),_=n&&s===n.index;return E.useMemo(function(){var v,y,w,x,C,R,D,S,T;if(n){var O=l.viewState[a],M=((y=(v=O?.selectedItems)===null||v===void 0?void 0:v.map(function(k){return l.items[k]}))!==null&&y!==void 0?y:O?.focusedItem?[l.items[O?.focusedItem]]:[]).filter(function(k){return!!k}),L=!!M.find(function(k){return k.index===n.index}),B=M&&((x=(w=l.canDrag)===null||w===void 0?void 0:w.call(l,M))!==null&&x!==void 0?x:!0)&&M.map(function(k){var Y;return(Y=k.canMove)!==null&&Y!==void 0?Y:!0}).reduce(function(k,Y){return k&&Y},!0),F=((R=(C=l.canDrag)===null||C===void 0?void 0:C.call(l,[n]))!==null&&R!==void 0?R:!0)&&((D=n.canMove)!==null&&D!==void 0?D:!0),P=l.canDragAndDrop&&(L&&B||!L&&F),z=l.canDragAndDrop&&!!(!((T=(S=h.viableDragPositions)===null||S===void 0?void 0:S[a])===null||T===void 0)&&T.find(function(k){return k.targetType==="item"&&k.targetItem===n.index})),I={primaryAction:function(){var k;(k=l.onPrimaryAction)===null||k===void 0||k.call(l,l.items[n.index],a)},collapseItem:function(){var k;(k=l.onCollapseItem)===null||k===void 0||k.call(l,n,a)},expandItem:function(){var k;(k=l.onExpandItem)===null||k===void 0||k.call(l,n,a)},toggleExpandedState:function(){var k,Y;b?(k=l.onCollapseItem)===null||k===void 0||k.call(l,n,a):(Y=l.onExpandItem)===null||Y===void 0||Y.call(l,n,a)},selectItem:function(){var k;(k=l.onSelectItems)===null||k===void 0||k.call(l,[n.index],a)},addToSelectedItems:function(){var k,Y;(k=l.onSelectItems)===null||k===void 0||k.call(l,Sa(Sa([],(Y=O?.selectedItems)!==null&&Y!==void 0?Y:[],!0),[n.index],!1),a)},unselectItem:function(){var k,Y,q;(k=l.onSelectItems)===null||k===void 0||k.call(l,(q=(Y=O?.selectedItems)===null||Y===void 0?void 0:Y.filter(function(U){return U!==n.index}))!==null&&q!==void 0?q:[],a)},selectUpTo:function(k){f(n,k)},startRenamingItem:function(){u(n.index)},stopRenamingItem:function(){u(null)},focusItem:function(){var k;(k=l.onFocusItem)===null||k===void 0||k.call(l,n,a)},startDragging:function(){var k,Y,q=(k=O?.selectedItems)!==null&&k!==void 0?k:[];q.includes(n.index)||(q=[n.index],(Y=l.onSelectItems)===null||Y===void 0||Y.call(l,q,a)),P&&h.onStartDraggingItems(q.map(function(U){return l.items[U]}),a)}},N={isSelected:m,isExpanded:b,isFocused:O?.focusedItem===n.index,isRenaming:_,isDraggingOver:h.draggingPosition&&h.draggingPosition.targetType==="item"&&h.draggingPosition.targetItem===n.index&&h.draggingPosition.treeId===a,isDraggingOverParent:!1,isSearchMatching:p,canDrag:P,canDropOn:z},$=_t(_t({},g.createInteractiveElementProps(n,a,I,N,O)),{"data-rct-item-interactive":!0,"data-rct-item-focus":N.isFocused?"true":"false","data-rct-item-id":n.index}),H=_t({},{"data-rct-item-container":"true"}),j={role:"treeitem","aria-selected":N.isSelected,"aria-expanded":n.isFolder?N.isExpanded?"true":"false":void 0},V={onClick:function(){n.isFolder&&I.toggleExpandedState(),I.selectItem()},onFocus:function(){I.focusItem()},onDragOver:function(k){k.preventDefault()},"aria-hidden":!0,tabIndex:-1},G=O?Object.entries(O).reduce(function(k,Y){var q=Y[0],U=Y[1];return k[q]=Array.isArray(U)?U.includes(n.index):U===n.index,k},{}):{};return _t(_t(_t({},I),N),{interactiveElementProps:$,itemContainerWithChildrenProps:j,itemContainerWithoutChildrenProps:H,arrowProps:V,viewStateFlags:G})}},[n,l,a,h,m,b,_,p,g,f,u])},Zt=function(n,e,t){var i=Ki(t);E.useEffect(function(){return n?(n.addEventListener(e,i),function(){return n.removeEventListener(e,i)}):function(){}},[n,i,e])},xa={expandSiblings:["control+*"],moveFocusToFirstItem:["home"],moveFocusToLastItem:["end"],primaryAction:["enter"],renameItem:["f2"],abortRenameItem:["escape"],toggleSelectItem:["control+space"],abortSearch:["escape","enter"],startSearch:[],selectAll:["control+a"],startProgrammaticDnd:["control+d"],completeProgrammaticDnd:["enter"],abortProgrammaticDnd:["escape"]},Si=globalThis&&globalThis.__assign||function(){return Si=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Si.apply(this,arguments)},Al=function(){var n=re();return E.useMemo(function(){return n.keyboardBindings?Si(Si({},xa),n.keyboardBindings):xa},[n.keyboardBindings])},xg=["input","textarea"],Me=function(n,e,t,i){i===void 0&&(i=!1);var r=E.useRef([]),o=Al(),a=Qt(),c=E.useMemo(function(){return o[n].map(function(s){return s.split("+")})},[n,o]);Zt(He(),"keydown",function(s){var u;if(t!==!1&&!((xg.includes((u=s.target.tagName)===null||u===void 0?void 0:u.toLowerCase())||s.target.isContentEditable)&&!i)&&!r.current.includes(s.key)){r.current.push(s.key);var l=r.current.map(function(h){return h.toLowerCase()}),g=c.map(function(h){return l.map(function(f){return h.includes(f.toLowerCase())}).reduce(function(f,d){return f&&d},!0)}).reduce(function(h,f){return h||f},!1);g&&(r.current.length>1||!/^[a-zA-Z]$/.test(s.key))&&s.preventDefault()}}),Zt(He(),"keyup",function(s){if(t!==!1){var u=r.current.map(function(g){return g.toLowerCase()}),l=c.map(function(g){return g.map(function(h){return u.includes(h.toLowerCase())}).reduce(function(h,f){return h&&f},!0)}).reduce(function(g,h){return g||h},!1);l&&a(function(){return e(s)}),r.current=r.current.filter(function(g){return g!==s.key})}})},Ag=function(n){var e=_e(),t=e.renderers,i=e.treeInformation,r=e.setRenamingItem,o=e.treeId,a=re(),c=E.useRef(null),s=E.useRef(null),u=a.items[n.itemIndex],l=E.useState(a.getItemTitle(u)),g=l[0],h=l[1],f=Qt(!0),d=function(){var v;(v=a.onAbortRenamingItem)===null||v===void 0||v.call(a,u,i.treeId),r(null),f(function(){a.setActiveTree(o)})},p=function(){var v;(v=a.onRenameItem)===null||v===void 0||v.call(a,u,g,i.treeId),r(null),f(function(){a.setActiveTree(o)})};wi(function(){var v,y,w,x;a.setActiveTree(o),(!((v=a.autoFocus)!==null&&v!==void 0)||v)&&((y=c.current)===null||y===void 0||y.select(),(x=(w=c.current)===null||w===void 0?void 0:w.focus)===null||x===void 0||x.call(w))},[a,o],[]),Me("abortRenameItem",function(){d()},!0,!0);var m={value:g,onChange:function(v){h(v.target.value)},onBlur:function(v){v.relatedTarget!==s.current&&d()},"aria-label":"New item name",tabIndex:0},b={onClick:function(v){v.stopPropagation(),p()}},_={onSubmit:function(v){v.preventDefault(),p()}};return t.renderRenameInput({item:u,inputRef:c,submitButtonProps:b,submitButtonRef:s,formProps:_,inputProps:m})},Lg=function(n){var e,t,i=E.useState(!1),r=i[0],o=i[1],a=_e(),c=a.renderers,s=a.treeInformation,u=a.renamingItem,l=re(),g=jn(),h=l.items[n.itemIndex],f=E.useMemo(function(){var v;return(v=g.expandedItems)===null||v===void 0?void 0:v.includes(n.itemIndex)},[n.itemIndex,g.expandedItems]),d=Sg(h);if(h===void 0||d===void 0)return r||(o(!0),(e=l.onMissingItems)===null||e===void 0||e.call(l,[n.itemIndex])),null;var p=h.isFolder&&f&&h.children&&ee.createElement(Ll,{depth:n.depth+1,parentId:n.itemIndex},h.children),m=l.getItemTitle(h),b=u===n.itemIndex?ee.createElement(Ag,{itemIndex:n.itemIndex}):c.renderItemTitle({info:s,context:d,title:m,item:h}),_=c.renderItemArrow({info:s,context:d,item:l.items[n.itemIndex]});return(t=c.renderItem({item:l.items[n.itemIndex],depth:n.depth,title:b,arrow:_,context:d,info:s,children:p}))!==null&&t!==void 0?t:null},Ll=function(n){for(var e=_e(),t=e.renderers,i=e.treeInformation,r=[],o=0,a=n.children;o<a.length;o++){var c=a[o];r.push(ee.createElement(Lg,{key:c,itemIndex:c,depth:n.depth}))}if(r.length===0)return null;var s={role:n.depth!==0?"group":void 0};return t.renderItemsContainer({children:r,info:i,containerProps:s,depth:n.depth,parentId:n.parentId})},Dg=function(n){var e,t=n.treeId,i=Ke(),r=i.draggingPosition,o=i.itemHeight,a=_e().renderers,c=r&&r.targetType==="between-items"&&r.treeId===t;if(!c)return null;var s={onDragOver:function(u){return u.preventDefault()}};return E.createElement("div",{style:{position:"absolute",left:"0",right:"0",top:"".concat(((e=r?.linearIndex)!==null&&e!==void 0?e:0)*o,"px")}},a.renderDragBetweenLine({draggingPosition:r,lineProps:s}))},Og=function(n,e,t){var i=E.useState(!1),r=i[0],o=i[1],a=E.useRef(!1),c=Qt();return Zt(n,"focusin",function(){r||(o(!0),e?.()),a.current&&(a.current=!1)}),Zt(n,"focusout",function(){a.current=!0,c(function(){a.current&&!n?.contains(document.activeElement)&&(t?.(),a.current=!1,o(!1))})}),r},ni=function(n,e,t){Zt(He(),"keydown",function(i){t&&t&&n.toLowerCase()===i.key.toLowerCase()&&e(i)})},Rg=function(){var n=_e().treeId,e=re(),t=e.onFocusItem,i=e.items,r=Ji(n),o=jn();return Ki(function(a){var c,s=(c=r.findIndex(function(h){return h.item===o.focusedItem}))!==null&&c!==void 0?c:0,u=a(s,r),l=Math.max(0,Math.min(r.length-1,u)),g=i[r[l].item];return t?.(g,n),g})},Aa=globalThis&&globalThis.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))},Cg=function(){var n,e=re(),t=_e(),i=t.treeId,r=t.setRenamingItem,o=t.setSearch,a=t.renamingItem,c=Ji(i),s=Ke(),u=jn(),l=Rg(),g=xl("first-selected"),h=e.activeTreeId===i,f=!!a;ni("arrowdown",function(d){if(d.preventDefault(),s.isProgrammaticallyDragging)s.programmaticDragDown();else{var p=l(function(m){return m+1});d.shiftKey&&g(p)}},h&&!f),ni("arrowup",function(d){if(d.preventDefault(),s.isProgrammaticallyDragging)s.programmaticDragUp();else{var p=l(function(m){return m-1});d.shiftKey&&g(p)}},h&&!f),Me("moveFocusToFirstItem",function(d){d.preventDefault(),l(function(){return 0})},h&&!s.isProgrammaticallyDragging&&!f),Me("moveFocusToLastItem",function(d){d.preventDefault(),l(function(p,m){return m.length-1})},h&&!s.isProgrammaticallyDragging&&!f),ni("arrowright",function(d){d.preventDefault(),l(function(p,m){var b,_,v=e.items[m[p].item];if(v.isFolder){if(!((b=u.expandedItems)===null||b===void 0)&&b.includes(v.index))return p+1;(_=e.onExpandItem)===null||_===void 0||_.call(e,v,i)}return p})},h&&!s.isProgrammaticallyDragging&&!f),ni("arrowleft",function(d){d.preventDefault(),l(function(p,m){var b,_,v=e.items[m[p].item],y=m[p].depth;if(v.isFolder&&(!((b=u.expandedItems)===null||b===void 0)&&b.includes(v.index)))(_=e.onCollapseItem)===null||_===void 0||_.call(e,v,i);else if(y>0){var w=p;for(w;m[w].depth!==y-1;w-=1);return w}return p})},h&&!s.isProgrammaticallyDragging&&!f),Me("primaryAction",function(d){var p,m;d.preventDefault(),u.focusedItem!==void 0&&((p=e.onSelectItems)===null||p===void 0||p.call(e,[u.focusedItem],i),(m=e.onPrimaryAction)===null||m===void 0||m.call(e,e.items[u.focusedItem],i))},h&&!s.isProgrammaticallyDragging&&!f),Me("toggleSelectItem",function(d){var p,m,b;d.preventDefault(),u.focusedItem!==void 0&&(u.selectedItems&&u.selectedItems.includes(u.focusedItem)?(p=e.onSelectItems)===null||p===void 0||p.call(e,u.selectedItems.filter(function(_){return _!==u.focusedItem}),i):(m=e.onSelectItems)===null||m===void 0||m.call(e,Aa(Aa([],(b=u.selectedItems)!==null&&b!==void 0?b:[],!0),[u.focusedItem],!1),i))},h&&!s.isProgrammaticallyDragging&&!f),Me("selectAll",function(d){var p;d.preventDefault(),(p=e.onSelectItems)===null||p===void 0||p.call(e,c.map(function(m){var b=m.item;return b}),i)},h&&!s.isProgrammaticallyDragging&&!f),Me("renameItem",function(d){var p;if(u.focusedItem!==void 0){d.preventDefault();var m=e.items[u.focusedItem];(p=e.onStartRenamingItem)===null||p===void 0||p.call(e,m,i),r(m.index)}},h&&((n=e.canRename)!==null&&n!==void 0?n:!0)&&!f),Me("startSearch",function(d){var p,m;d.preventDefault(),o(""),(m=(p=document.querySelector('[data-rct-search-input="true"]'))===null||p===void 0?void 0:p.focus)===null||m===void 0||m.call(p)},h&&!s.isProgrammaticallyDragging&&!f),Me("startProgrammaticDnd",function(d){d.preventDefault(),s.startProgrammaticDrag()},h&&!f),Me("completeProgrammaticDnd",function(d){d.preventDefault(),s.completeProgrammaticDrag()},h&&s.isProgrammaticallyDragging&&!f),Me("abortProgrammaticDnd",function(d){d.preventDefault(),s.abortProgrammaticDrag()},h&&s.isProgrammaticallyDragging&&!f)},Ig=function(){var n=re(),e=n.doesSearchMatchItem,t=n.items,i=n.getItemTitle,r=n.onFocusItem,o=_e(),a=o.search,c=o.treeId,s=Ji(c),u=Qt();wi(function(){a&&a.length>0&&u(function(){var l=s.find(function(g){var h=g.item;return(e??Sl)(a,t[h],i(t[h]))});l&&r?.(t[l.item],c)})},[e,i,s,t,r,a,c,u],[a])},co=globalThis&&globalThis.__assign||function(){return co=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},co.apply(this,arguments)},Ng=function(n){var e,t=n.containerRef,i=_e(),r=i.search,o=i.setSearch,a=i.treeId,c=i.renderers,s=i.renamingItem,u=re();jn();var l=u.activeTreeId===a,g=Qt();Ig();var h=function(){var f,d,p;if(o(null),!((f=u.autoFocus)!==null&&f!==void 0)||f){var m=(d=He())===null||d===void 0?void 0:d.querySelector('[data-rct-tree="'.concat(a,'"] [data-rct-item-focus="true"]'));(p=m?.focus)===null||p===void 0||p.call(m)}};return Me("abortSearch",function(){g(function(){h()})},l&&r!==null,!0),Zt(t,"keydown",function(f){var d,p,m=f.key.charCodeAt(0);(!((d=u.canSearch)!==null&&d!==void 0)||d)&&(!((p=u.canSearchByStartingTyping)!==null&&p!==void 0)||p)&&l&&r===null&&!s&&!f.ctrlKey&&!f.shiftKey&&!f.altKey&&!f.metaKey&&(m>=48&&m<=57||m>=97&&m<=122)&&o("")}),!(!((e=u.canSearch)!==null&&e!==void 0)||e)||r===null?null:c.renderSearchInput({inputProps:co({value:r,onChange:function(f){return o(f.target.value)},onBlur:function(){h()},ref:function(f){var d;(d=f?.focus)===null||d===void 0||d.call(f)},"aria-label":"Search for items"},{"data-rct-search-input":"true"})})},Bg={introduction:`
    <p>Accessibility guide for tree {treeLabel}.</p>
    <p>
      Navigate the tree with the arrow keys. Common tree hotkeys apply. Further keybindings are available:
    </p>
    <ul>
      <li>{keybinding:primaryAction} to execute primary action on focused item</li>
      <li>{keybinding:renameItem} to start renaming the focused item</li>
      <li>{keybinding:abortRenameItem} to abort renaming an item</li>
      <li>{keybinding:startProgrammaticDnd} to start dragging selected items</li>
    </ul>
  `,renamingItem:`
    <p>Renaming the item {renamingItem}.</p>
    <p>Use the keybinding {keybinding:abortRenameItem} to abort renaming.</p>
  `,searching:`
    <p>Searching</p>
  `,programmaticallyDragging:`
    <p>Dragging items {dragItems}.</p>
    <p>Press the arrow keys to move the drag target.</p>
    <p>Press {keybinding:completeProgrammaticDnd} to drop or {keybinding:abortProgrammaticDnd} to abort.</p>
  `,programmaticallyDraggingTarget:`
    <p>Drop target is {dropTarget}.</p>
  `},on=function(n,e,t,i,r){var o=function(a){return e.getItemTitle(e.items[a])};return n.replace(/({[^\s}]+)}/g,function(a){var c,s,u,l=a.slice(1,-1);switch(l){case"treeLabel":return(c=i.treeLabel)!==null&&c!==void 0?c:"";case"renamingItem":return i.renamingItem?o(i.renamingItem):"None";case"dragItems":return(u=(s=t.draggingItems)===null||s===void 0?void 0:s.map(function(f){return e.getItemTitle(f)}).join(", "))!==null&&u!==void 0?u:"None";case"dropTarget":{if(!t.draggingPosition)return"None";if(t.draggingPosition.targetType==="item"||t.draggingPosition.targetType==="root")return"within ".concat(o(t.draggingPosition.targetItem));var g=e.items[t.draggingPosition.parentItem],h=e.getItemTitle(g);return t.draggingPosition.childIndex===0?"within ".concat(h," at the start"):"within ".concat(h," after ").concat(o(g.children[t.draggingPosition.childIndex-1]))}default:if(l.startsWith("keybinding:"))return r[l.slice(11)][0];throw Error("Unknown live descriptor variable {".concat(l,"}"))}})},an=function(n){var e=n.children,t=n.live;return E.createElement("div",{"aria-live":t,dangerouslySetInnerHTML:{__html:e}})},Fg=function(){var n=re(),e=_e(),t=Ke(),i=Al(),r=E.useMemo(function(){var a;return(a=n.liveDescriptors)!==null&&a!==void 0?a:Bg},[n.liveDescriptors]),o=e.renderers.renderLiveDescriptorContainer;return e.treeInformation.isRenaming?E.createElement(o,{tree:e},E.createElement(an,{live:"polite"},on(r.renamingItem,n,t,e,i))):e.treeInformation.isSearching?E.createElement(o,{tree:e},E.createElement(an,{live:"polite"},on(r.searching,n,t,e,i))):e.treeInformation.isProgrammaticallyDragging?E.createElement(o,{tree:e},E.createElement(an,{live:"polite"},on(r.programmaticallyDragging,n,t,e,i)),E.createElement(an,{live:"assertive"},on(r.programmaticallyDraggingTarget,n,t,e,i))):E.createElement(o,{tree:e},E.createElement(an,{live:"off"},on(r.introduction,n,t,e,i)))},Pg=function(){var n,e=re();return!((n=e.showLiveDescription)!==null&&n!==void 0)||n?E.createElement(Fg,null):null},uo=globalThis&&globalThis.__assign||function(){return uo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},uo.apply(this,arguments)},Mg=function(){var n=_e(),e=n.treeId,t=n.rootItem,i=n.renderers,r=n.treeInformation,o=re(),a=E.useRef(),c=Ke();Cg(),Og(a.current,function(){o.setActiveTree(e)},function(){o.setActiveTree(function(g){return g===e?void 0:g})});var s=o.items[t].children,u=E.createElement(E.Fragment,null,E.createElement(Pg,null),E.createElement(Ll,{depth:0,parentId:e},s??[]),E.createElement(Dg,{treeId:e}),E.createElement(Ng,{containerRef:a.current})),l=uo({onDragOver:function(g){g.preventDefault(),c.onDragOverTreeHandler(g,e,a)},onMouseDown:function(){return c.abortProgrammaticDrag()},ref:a,style:{position:"relative"},role:"tree","aria-label":r.treeLabelledBy?void 0:r.treeLabel,"aria-labelledby":r.treeLabelledBy},{"data-rct-tree":e});return i.renderTreeContainer({children:u,info:r,containerProps:l})},kg=function(n,e,t){var i,r=re(),o=Ke(),a=(i=r.viewState[n.treeId])===null||i===void 0?void 0:i.selectedItems;return E.useMemo(function(){var c,s;return{isFocused:r.activeTreeId===n.treeId,isRenaming:!!e,areItemsSelected:((c=a?.length)!==null&&c!==void 0?c:0)>0,isSearching:t!==null,search:t,isProgrammaticallyDragging:(s=o.isProgrammaticallyDragging)!==null&&s!==void 0?s:!1,treeId:n.treeId,rootItem:n.rootItem,treeLabel:n.treeLabel,treeLabelledBy:n.treeLabelledBy}},[r.activeTreeId,n.treeId,n.rootItem,n.treeLabel,n.treeLabelledBy,e,a?.length,t,o.isProgrammaticallyDragging])},Sn=globalThis&&globalThis.__assign||function(){return Sn=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Sn.apply(this,arguments)},zg=function(n,e){var t=re(),i=_e(),r=Ke();E.useImperativeHandle(n,function(){return Sn(Sn(Sn({},e),{treeEnvironmentContext:t,dragAndDropContext:r,treeContext:i}),i.treeInformation)})},$g=E.createContext(null),Ug=E.forwardRef(function(n,e){re();var t=_e();Ke();var i=pg(),r=E.useMemo(function(){return{abortRenamingItem:function(){t.setRenamingItem(null)},abortSearch:function(){t.setSearch(null)},collapseItem:function(o){i.collapseItem(o,t.treeId)},completeRenamingItem:function(){},expandItem:function(o){i.expandItem(o,t.treeId)},focusItem:function(o){i.focusItem(o,t.treeId)},focusTree:function(o){o===void 0&&(o=!0),i.focusTree(t.treeId,o)},invokePrimaryAction:function(o){i.invokePrimaryAction(o,t.treeId)},moveFocusDown:function(){i.moveFocusDown(t.treeId)},moveFocusUp:function(){i.moveFocusUp(t.treeId)},renameItem:function(o,a){i.renameItem(o,a,t.treeId)},selectItems:function(o){i.selectItems(o,t.treeId)},setSearch:function(o){t.setSearch(o)},startRenamingItem:function(o){t.setRenamingItem(o)},stopRenamingItem:function(){t.setRenamingItem(null)},toggleItemExpandedState:function(o){i.toggleItemExpandedState(o,t.treeId)},toggleItemSelectStatus:function(o){i.toggleItemSelectStatus(o,t.treeId)},expandAll:function(){i.expandAll(t.treeId)},collapseAll:function(){i.collapseAll(t.treeId)}}},[i,t]);return zg(e,r),E.createElement($g.Provider,{value:r},n.children)}),xi=globalThis&&globalThis.__assign||function(){return xi=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},xi.apply(this,arguments)},Dl=E.createContext(null),_e=function(){return E.useContext(Dl)},jg=E.forwardRef(function(n,e){var t,i=re(),r=E.useMemo(function(){return xi(xi({},i),n)},[n,i]),o=E.useState(null),a=o[0],c=o[1],s=E.useState(null),u=s[0],l=s[1],g=i.items[n.rootItem],h=i.viewState[n.treeId];E.useEffect(function(){return i.registerTree({treeId:n.treeId,rootItem:n.rootItem}),function(){return i.unregisterTree(n.treeId)}},[n.treeId,n.rootItem]);var f=kg(n,u,a),d=E.useMemo(function(){return{treeId:n.treeId,rootItem:n.rootItem,treeLabel:n.treeLabel,treeLabelledBy:n.treeLabelledBy,getItemsLinearly:function(){return Ro(n.rootItem,h??{},i.items)},treeInformation:f,search:a,setSearch:c,renamingItem:u,setRenamingItem:l,renderers:r}},[i.items,n.rootItem,n.treeId,n.treeLabel,n.treeLabelledBy,u,r,a,f,h]);return g===void 0?((t=i.onMissingItems)===null||t===void 0||t.call(i,[n.rootItem]),null):E.createElement(Dl.Provider,{value:d},E.createElement(Ug,{ref:e},E.createElement(Mg,null)))});const sn="folder",xt="file",Yt="folder_file_mapping",Hg="first_forlder_id",Wg="first_file_id",Yg="revezone_menu",Dr="file_tree";class xn{constructor(){if(xn.instance)return xn.instance;xn.instance=this,(async()=>this.db=await this.initDB())()}static instance;db;async initDB(){if(this.db)return this.db;const e=await Fn(Yg,1,{upgrade:async t=>{await this.initFileStore(t),await this.initFileTreeStore(t),await this.initFolderStore(t),await this.initFolderFileMappingStore(t)}});return this.db=e,e}async initFolderStore(e){return await e.createObjectStore(sn,{autoIncrement:!0})}async initFolderFileMappingStore(e){const t=await e.createObjectStore(Yt,{autoIncrement:!0});await t.createIndex("folderId","folderId",{unique:!1}),await t.createIndex("fileId","fileId",{unique:!0});const i={folderId:localStorage.getItem(Hg),fileId:localStorage.getItem(Wg)};return await t.add(i),t}async initFileStore(e){const t=await e.createObjectStore(xt,{autoIncrement:!0});return await t.createIndex("type","type",{unique:!1}),t}async initFileTreeStore(e){return await e.createObjectStore(Dr,{autoIncrement:!0})}async addFolder(e){await this.initDB();const t=`folder_${Rn()}`,i={id:t,name:e||"",gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()};return await this.db?.add(sn,i,t),oe("create_folder",i),i}async getFolder(e){return await this.initDB(),await this.db?.get(sn,e)}async getFolders(){await this.initDB();const e=await this.db?.getAll("folder"),t=(i,r)=>new Date(i.gmtCreate).getTime()<new Date(r.gmtCreate).getTime()?1:-1;return e?.sort(t)||[]}async addFile(e,t="note",i){await this.initDB();const r=`file_${Rn()}`,o={id:r,name:i||"",type:t,gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()};return await this.db?.add(xt,o,r),await this.db?.add(Yt,{folderId:e,fileId:r,gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()}),oe(`create_${t}`,o),o}async getFile(e){return await this.initDB(),await this.db?.get(xt,e)}async deleteFile(e){await this.initDB(),e&&await this.db?.delete(xt,e.id);const i=(await this.db?.getAllKeysFromIndex(Yt,"fileId",e.id))?.map(async r=>this.db?.delete(Yt,r));i&&await Promise.all(i),oe(`delete_${e.type}`,e)}async getFiles(){await this.initDB();const e=await this.db?.getAll(xt),t=(i,r)=>new Date(i.gmtCreate).getTime()<new Date(r.gmtCreate).getTime()?1:-1;return e?.sort(t)||[]}async getAllFileFolderMappings(){return await this.initDB(),await this.db?.getAll(Yt)||[]}async getFileTree(){await this.initDB();const e=await this.db?.get(Dr,Dr);let t;return e||(t=await this.getFileTreeFromOlderData()),e||t}async getFileTreeFromOlderData(){await this.initDB();const e=await this.getFolders(),t=await this.getFiles(),i=await this.getAllFileFolderMappings(),r={root:{index:"root",data:{id:"root",name:"root",gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()},isFolder:!0,canRename:!0,children:e.map(o=>o.id)}};return e.forEach(o=>{const a=[],c=i.filter(s=>s.folderId===o.id);t.forEach(s=>{c.find(l=>l.fileId===s.id)&&a.push(s)}),r[o.id]={index:o.id,data:o,isFolder:!0,canRename:!0,children:a.map(s=>s.id)}}),t.forEach(o=>{r[o.id]={index:o.id,data:o,canRename:!0}}),r}async getFilesInFolder(e){await this.initDB();const t=await this.db?.getAllFromIndex(Yt,"folderId",e),i=t?.map(async o=>this.getFile(o.fileId)).filter(o=>!!o);return t&&i&&(await Promise.all(i)).filter(o=>!!o)}async updateFileName(e,t){await this.initDB(),t!==e?.name&&e&&await this.db?.put(xt,{...e,name:t,gmtModified:me().toLocaleString()},e.id)}async updateFileGmtModified(e){await this.initDB(),e&&await this.db?.put(xt,{...e,gmtModified:me().toLocaleString()},e.id)}async updateFolderName(e,t){await this.initDB(),t!==e?.name&&e&&this.db?.put(sn,{...e,name:t},e.id)}async deleteFolder(e){if(await this.initDB(),!e)return;await this.db?.delete(sn,e);const i=(await this.getFilesInFolder(e))?.map(async r=>this.deleteFile(r));i&&await Promise.all(i),oe("delete_folder",{id:e})}}const Xg=new xn,Ft=n=>Oi((e,t)=>{n.onerror=i=>t(new Error(i.target.error)),n.onsuccess=i=>e(i.target.result)}),Vg=(n,e)=>Oi((t,i)=>{const r=indexedDB.open(n);r.onupgradeneeded=o=>e(o.target.result),r.onerror=o=>i(oc(o.target.error)),r.onsuccess=o=>{const a=o.target.result;a.onversionchange=()=>{a.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>a.close()),t(a)}}),Gg=n=>Ft(indexedDB.deleteDatabase(n)),Kg=(n,e)=>e.forEach(t=>n.createObjectStore.apply(n,t)),_n=(n,e,t="readwrite")=>{const i=n.transaction(e,t);return e.map(r=>ip(i,r))},Ol=(n,e)=>Ft(n.count(e)),Jg=(n,e)=>Ft(n.get(e)),Rl=(n,e)=>Ft(n.delete(e)),qg=(n,e,t)=>Ft(n.put(e,t)),fo=(n,e)=>Ft(n.add(e)),Zg=(n,e,t)=>Ft(n.getAll(e,t)),Qg=(n,e,t)=>{let i=null;return np(n,e,r=>(i=r,!1),t).then(()=>i)},ep=(n,e=null)=>Qg(n,e,"prev"),tp=(n,e)=>Oi((t,i)=>{n.onerror=i,n.onsuccess=async r=>{const o=r.target.result;if(o===null||await e(o)===!1)return t();o.continue()}}),np=(n,e,t,i="next")=>tp(n.openKeyCursor(e,i),r=>t(r.key)),ip=(n,e)=>n.objectStore(e),rp=(n,e)=>IDBKeyRange.upperBound(n,e),op=(n,e)=>IDBKeyRange.lowerBound(n,e),Or="custom",Cl="updates",Il=500,Nl=(n,e=()=>{},t=()=>{})=>{const[i]=_n(n.db,[Cl]);return Zg(i,op(n._dbref,!1)).then(r=>{n._destroyed||(e(i),sc(n.doc,()=>{r.forEach(o=>lc(n.doc,o))},n,!1),t(i))}).then(()=>ep(i).then(r=>{n._dbref=r+1})).then(()=>Ol(i).then(r=>{n._dbsize=r})).then(()=>i)},ap=(n,e=!0)=>Nl(n).then(t=>{(e||n._dbsize>=Il)&&fo(t,_s(n.doc)).then(()=>Rl(t,rp(n._dbref,!0))).then(()=>Ol(t).then(i=>{n._dbsize=i}))});class sp extends ac{constructor(e,t){super(),this.doc=t,this.name=e,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=Vg(e,i=>Kg(i,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=Oi(i=>this.on("synced",()=>i(this))),this._db.then(i=>{this.db=i,Nl(this,a=>fo(a,_s(t)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(i,r)=>{if(this.db&&r!==this){const[o]=_n(this.db,[Cl]);fo(o,i),++this._dbsize>=Il&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{ap(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},t.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),t.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(e=>{e.close()})}clearData(){return this.destroy().then(()=>{Gg(this.name)})}get(e){return this._db.then(t=>{const[i]=_n(t,[Or],"readonly");return Jg(i,e)})}set(e,t){return this._db.then(i=>{const[r]=_n(i,[Or]);return qg(r,t,e)})}del(e){return this._db.then(t=>{const[i]=_n(t,[Or]);return Rl(i,e)})}}const La="revezone_blocksuite";class An{constructor(){if(An.instance)return An.instance;An.instance=this,this.initYIndexeddb()}static instance;workspace=new cc({id:La,blobStorages:[dc,uc]}).register(fc);indexeddbPersistence;async initYIndexeddb(){const e=new sp(La,this.workspace.doc);this.indexeddbPersistence=e,window.persistence=e,e.on("synced",async()=>{wo.emit(js.WORKSPACE_LOADED)})}async addPage(e){return await this.workspace.createPage({id:e,init:!0})}async deletePage(e){try{await this.workspace.removePage(e)}catch(t){console.warn("delete page error: ",t)}}async getAllPageIds(){return(await this.workspace.getPageNameList()).map(i=>i.split("space:")?.[1])}async copyPage(e,t,i){}}const Co=new An,Da="revezone://";let Oa;const Bv=n=>n.startsWith(Da)?n.split(Da)?.[1]:oa.test(n)?n?.match(oa)?.[1]:null;function Ra(n,e,t="root"){const r=e[t].children?.filter(s=>s!==n.id)?.map(s=>e[s].data.name),o=!!r?.find(s=>s===n.name);let a=0;const c=new RegExp(`^${n.name}\\(([0-9]+)\\)$`);return o?(r?.forEach(s=>{const u=s.match(c)?.[1];u&&(a=a>Number(u)?a:Number(u))}),`${n.name}(${a+1})`):n.name}const Bl=(n,e,t)=>{typeof e!="string"&&(e=JSON.stringify(e)),clearTimeout(Oa),Oa=setTimeout(()=>{console.log("filechange debounce",n),window.api?.fileDataChange(n,e,t)},1e3)};function lp(n){return n.split(/[/\\]/).pop()}function cp(n){const e=n.lastIndexOf(".");return e===-1||e===0?n:n.slice(0,e)?.replace(".","-")}function dp(n){const e=n.lastIndexOf(".");return e===-1||e===0?"":n.slice(e)}function up(n){switch(n){case".excalidraw":return"board";case".tldr":return"tldraw";default:return n?.split(".").pop()}}const At="board",fp="revezone_board",hp={elements:[]};class Ln{constructor(){if(Ln.instance)return Ln.instance;Ln.instance=this,(async()=>this.db=await this.initDB())()}static instance;db;async initDB(){if(this.db)return this.db;const e=await Fn(fp,1,{upgrade:async t=>{await this.initBoardFileStore(t)}});return this.db=e,e}async initBoardFileStore(e){return await e.createObjectStore(At,{autoIncrement:!0})}async updateBoard(e,t,i){if(await this.initDB(),!!!await this.db?.get(At,e)){console.warn(`Board ${e} not existed, cannot update!`);return}await this.db?.put(At,t,e),Bl(e,JSON.stringify(t),i)}async addBoard(e,t=hp){await this.initDB(),await this.db?.add(At,t,e)}async getBoard(e){return await this.initDB(),await this.db?.get(At,e)}async getAllBoardIds(){return await this.initDB(),await this.db?.getAllKeys(At)||[]}async deleteBoard(e){await this.initDB(),await this.db?.delete(At,e)}}const Io=new Ln,Lt="tldraw",gp="revezone_tldraw",pp={store:{},schema:{schemaVersion:1,storeVersion:4,recordVersions:{}}};class Dn{constructor(){if(Dn.instance)return Dn.instance;Dn.instance=this,(async()=>this.db=await this.initDB())()}static instance;db;async initDB(){if(this.db)return this.db;const e=await Fn(gp,1,{upgrade:async t=>{await this.initTldrawFileStore(t)}});return this.db=e,e}async initTldrawFileStore(e){return await e.createObjectStore(Lt,{autoIncrement:!0})}async updateTldraw(e,t,i){if(await this.initDB(),!!!await this.db?.get(Lt,e)){console.warn(`Tldraw ${e} not existed, cannot update!`);return}await this.db?.put(Lt,t,e),Bl(e,JSON.stringify(t),i)}async addTldraw(e,t=pp){await this.initDB(),await this.db?.add(Lt,t,e)}async getTldraw(e){return await this.initDB(),await this.db?.get(Lt,e)}async getAllTldrawIds(){return await this.initDB(),await this.db?.getAllKeys(Lt)||[]}async deleteTldraw(e){await this.initDB(),await this.db?.delete(Lt,e)}}const Fl=new Dn,mp="revezone_file_tree",Dt="file_tree";class Ct{constructor(){if(Ct.instance)return Ct.instance;Ct.instance=this,(async()=>this.db=await this.initDB())()}static instance;static oldDBSynced=!1;db;async initDB(){if(this.db)return this.db;const e=await Fn(mp,1,{upgrade:async t=>{await this.initFileTreeStore(t)}});return this.db=e,e}async initFileTreeStore(e){const t=await e.createObjectStore(Dt,{autoIncrement:!0});return await this.syncFromOldMenuIndexedDB(),await this.getFileTree()||await this.updateFileTree(au),t}async addFolder(e,t){await this.initDB();const r={id:`folder_${Rn()}`,name:e||"New Folder",gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()};return await this.addFileTreeItem(r,!0,t),oe("create_folder",r),r}async addFileTreeItem(e,t,i){await this.initDB();const r=await this.getFileTree()||{};if(e.name=Ra(e,r,i),r[e.id]={index:e.id,isFolder:t,data:e,canRename:!0},i){const o=r[i].children||[];r[i].children=[e.id,...o]}else{const o=r.root.children||[];r.root.children=[e.id,...o]}return await this.updateFileTree(r),e.type&&["board","tldraw"].includes(e.type)&&window.api?.addFile(e.id,"{}",r),e}async addFile(e,t="note",i,r){await this.initDB();const o=`file_${Rn()}`;t==="note"?await Co.addPage(o):t==="board"?await Io.addBoard(o,r&&JSON.parse(r)):t==="tldraw"&&await Fl.addTldraw(o,r&&JSON.parse(r));const a={id:o,name:e||"",type:t,gmtCreate:me().toLocaleString(),gmtModified:me().toLocaleString()};return await this.addFileTreeItem(a,!1,i),oe(`create_${t}`,a),a}async updateFileTree(e){return await this.initDB(),await this.db?.put(Dt,e,Dt),e}async getFile(e){return await this.initDB(),(await this.db?.get(Dt,Dt))?.[e]?.data}async deleteFile(e){await this.initDB(),await this.deleteItemFromFileTree(e),oe("delete_file",{fileId:e})}async deleteItemFromFileTree(e){await this.initDB();const t={},i=await this.getFileTree();if(i){const r=JSON.parse(JSON.stringify(i[e].data)),o=JSON.parse(JSON.stringify(i));setTimeout(()=>{window.api?.deleteFileOrFolder(r,o)},2e3),Object.entries(i).forEach(([a,c])=>{a!==e&&(c.children=c.children?.filter(s=>s!==e),t[a]=c)})}return await this.updateFileTree(t),t}async syncFromOldMenuIndexedDB(){await this.initDB();const e=await Xg.getFileTreeFromOlderData();return this.transferDataFromMenuIndexedDB(e),e}async transferDataFromMenuIndexedDB(e){Ct.oldDBSynced||(Ct.oldDBSynced=!0,this.updateFileTree(e))}async getFileTree(){await this.initDB();const e=await this.db?.get(Dt,Dt);return window.fileTree=e,e}async updateFileGmtModified(e){await this.initDB();const t=await this.getFileTree();t&&(t[e.id].data.gmtModified=me().toLocaleString(),await this.updateFileTree(t))}async updateFileOrFolderName(e,t){if(await this.initDB(),t===e?.name)return;const i=await this.getFileTree();if(!i)return;const r=JSON.parse(JSON.stringify(i));let o;Object.values(i).forEach(c=>{c.children?.includes(e.id)&&(o=c.data.id)});const a=Ra({...e,name:t},i,o);i[e.id].data.name=a,await this.updateFileTree(i),window.api?.renameFileOrFolder(e.id,a,r)}async deleteFolder(e){e&&(await this.initDB(),await this.deleteItemFromFileTree(e),oe("delete_folder",{folderId:e}))}}const Ne=new Ct;function Tt(){const[n,e]=le(Fs),t=E.useCallback(async()=>{const i=await Ne.getFileTree();if(localStorage.getItem("is_debug")==="true"&&i){let r=await Co.getAllPageIds();r=r.filter(a=>!i[a]);let o=await Io.getAllBoardIds();o=o.filter(a=>!i[a]),i.root.children=[...i.root.children||[],...r,...o],r.forEach(a=>{i[a]={index:a,data:{id:a,name:a,type:"note",gmtCreate:"",gmtModified:""}}}),o.forEach(a=>{i[a]={index:a,data:{id:a,name:a,type:"board",gmtCreate:"",gmtModified:""}}})}return i&&e(i),i},[]);return{fileTree:n,getFileTree:t,setFileTree:e}}function No(){const[n,e]=le(wu),t=E.useCallback(r=>{const o=no();let a=!0;if(r.forEach(s=>{o.includes(s)||(a=!1)}),a)return;const c=[...o,...r].filter(s=>!!s);e(c),aa(c)},[]),i=E.useCallback(r=>{const a=no().filter(c=>c!==r);e(a),aa(a)},[]);return{openKeys:n,setOpenKeys:e,addOpenKeys:t,removeOpenKey:i}}function en(){const[n,e]=le(yo),[t,i]=le(Ps),{addOpenKeys:r}=No(),[,o]=le(Ms),{fileTree:a}=Tt(),c=E.useCallback((u,l,g=[])=>{let h;const f=Object.values(l);for(const d of f)if(d.children?.includes(u)){h=d;break}if(h){const d=h.data.id;g.push(d),g=[...g,...c(d,l,g)]}return g},[]),s=E.useCallback(async u=>{const l=u?.id,g=l?[l]:[];if(e(g),lu(g),cu(u),i(u),o(l||""),l){const h=c(l,a);h.length&&r(h)}return u},[a]);return{currentFile:t,selectedKeys:n,updateCurrentFile:s,setCurrentFile:i}}const Pl=()=>{setTimeout(()=>{const n=document.querySelector(`.menu-tree-item-child.${Bs()}`),e=new MouseEvent("dblclick",{bubbles:!0,cancelable:!0,view:window});n?.dispatchEvent(e),console.debug("--- dbclick ---",n)},100)};var Ot={},qi={},Ye={},de={};Object.defineProperty(de,"__esModule",{value:!0});de.Orientation=void 0;class nt{static flip(e){return e===nt.HORZ?nt.VERT:nt.HORZ}constructor(e){this._name=e}getName(){return this._name}toString(){return this._name}}de.Orientation=nt;nt.HORZ=new nt("horz");nt.VERT=new nt("vert");var be={};Object.defineProperty(be,"__esModule",{value:!0});be.Rect=void 0;const vp=de;class Jt{static empty(){return new Jt(0,0,0,0)}constructor(e,t,i,r){this.x=e,this.y=t,this.width=i,this.height=r}static fromElement(e){let{x:t,y:i,width:r,height:o}=e.getBoundingClientRect();return new Jt(t,i,r,o)}clone(){return new Jt(this.x,this.y,this.width,this.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom()}removeInsets(e){return new Jt(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===vp.Orientation.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}be.Rect=Jt;Object.defineProperty(Ye,"__esModule",{value:!0});Ye.DockLocation=void 0;const Hn=de,Pe=be;class Q{static getByName(e){return Q.values[e]}static getLocation(e,t,i){if(t=(t-e.x)/e.width,i=(i-e.y)/e.height,t>=.25&&t<.75&&i>=.25&&i<.75)return Q.CENTER;const r=i>=t,o=i>=1-t;return r?o?Q.BOTTOM:Q.LEFT:o?Q.RIGHT:Q.TOP}constructor(e,t,i){this._name=e,this._orientation=t,this._indexPlus=i,Q.values[this._name]=this}getName(){return this._name}getOrientation(){return this._orientation}getDockRect(e){return this===Q.TOP?new Pe.Rect(e.x,e.y,e.width,e.height/2):this===Q.BOTTOM?new Pe.Rect(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===Q.LEFT?new Pe.Rect(e.x,e.y,e.width/2,e.height):this===Q.RIGHT?new Pe.Rect(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,t){if(this===Q.TOP){const i=new Pe.Rect(e.x,e.y,e.width,t),r=new Pe.Rect(e.x,e.y+t,e.width,e.height-t);return{start:i,end:r}}else if(this===Q.LEFT){const i=new Pe.Rect(e.x,e.y,t,e.height),r=new Pe.Rect(e.x+t,e.y,e.width-t,e.height);return{start:i,end:r}}if(this===Q.RIGHT){const i=new Pe.Rect(e.getRight()-t,e.y,t,e.height),r=new Pe.Rect(e.x,e.y,e.width-t,e.height);return{start:i,end:r}}else{const i=new Pe.Rect(e.x,e.getBottom()-t,e.width,t),r=new Pe.Rect(e.x,e.y,e.width,e.height-t);return{start:i,end:r}}}reflect(){return this===Q.TOP?Q.BOTTOM:this===Q.LEFT?Q.RIGHT:this===Q.RIGHT?Q.LEFT:Q.TOP}toString(){return"(DockLocation: name="+this._name+", orientation="+this._orientation+")"}}Ye.DockLocation=Q;Q.values={};Q.TOP=new Q("top",Hn.Orientation.VERT,0);Q.BOTTOM=new Q("bottom",Hn.Orientation.VERT,1);Q.LEFT=new Q("left",Hn.Orientation.HORZ,0);Q.RIGHT=new Q("right",Hn.Orientation.HORZ,1);Q.CENTER=new Q("center",Hn.Orientation.VERT,0);var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.DragDrop=void 0;const _p=be,bp=!!(typeof window<"u"&&window.document&&window.document.createElement);class ho{constructor(){this._manualGlassManagement=!1,this._startX=0,this._startY=0,this._dragDepth=0,this._glassShowing=!1,this._dragging=!1,this._active=!1,bp&&(this._glass=document.createElement("div"),this._glass.style.zIndex="998",this._glass.style.backgroundColor="transparent",this._glass.style.outline="none"),this._defaultGlassCursor="default",this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onKeyPress=this._onKeyPress.bind(this),this._onDragCancel=this._onDragCancel.bind(this),this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this.resizeGlass=this.resizeGlass.bind(this),this._lastClick=0,this._clickX=0,this._clickY=0}addGlass(e){var t;this._glassShowing?this._manualGlassManagement=!0:(this._document||(this._document=window.document),this._rootElement||(this._rootElement=this._document.body),this.resizeGlass(),(t=this._document.defaultView)===null||t===void 0||t.addEventListener("resize",this.resizeGlass),this._document.body.appendChild(this._glass),this._glass.tabIndex=-1,this._glass.focus(),this._glass.addEventListener("keydown",this._onKeyPress),this._glass.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._glass.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._glass.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._glassShowing=!0,this._fDragCancel=e,this._manualGlassManagement=!1)}resizeGlass(){_p.Rect.fromElement(this._rootElement).positionElement(this._glass,"fixed")}hideGlass(){var e;this._glassShowing&&(this._document.body.removeChild(this._glass),(e=this._document.defaultView)===null||e===void 0||e.removeEventListener("resize",this.resizeGlass),this._glassShowing=!1,this._document=void 0,this._rootElement=void 0,this.setGlassCursorOverride(void 0))}_updateGlassCursor(){var e;this._glass.style.cursor=(e=this._glassCursorOverride)!==null&&e!==void 0?e:this._defaultGlassCursor}_setDefaultGlassCursor(e){this._defaultGlassCursor=e,this._updateGlassCursor()}setGlassCursorOverride(e){this._glassCursorOverride=e,this._updateGlassCursor()}startDrag(e,t,i,r,o,a,c,s,u){if(e&&this._lastEvent&&this._lastEvent.type.startsWith("touch")&&e.type.startsWith("mouse")&&e.timeStamp-this._lastEvent.timeStamp<500||this._dragging)return;this._lastEvent=e,s?this._document=s:this._document=window.document,u?this._rootElement=u:this._rootElement=this._document.body;const l=this._getLocationEvent(e);this.addGlass(o),e?(this._startX=l.clientX,this._startY=l.clientY,(!window.matchMedia||window.matchMedia("(pointer: fine)").matches)&&this._setDefaultGlassCursor(getComputedStyle(e.target).cursor),this._stopPropagation(e),this._preventDefault(e)):(this._startX=0,this._startY=0,this._setDefaultGlassCursor("default")),this._dragging=!1,this._fDragStart=t,this._fDragMove=i,this._fDragEnd=r,this._fDragCancel=o,this._fClick=a,this._fDblClick=c,this._active=!0,e?.type==="dragenter"?(this._dragDepth=1,this._rootElement.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._rootElement.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._rootElement.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._document.addEventListener("dragend",this._onDragCancel,{passive:!1}),this._document.addEventListener("drop",this._onMouseUp,{passive:!1})):(this._document.addEventListener("mouseup",this._onMouseUp,{passive:!1}),this._document.addEventListener("mousemove",this._onMouseMove,{passive:!1}),this._document.addEventListener("touchend",this._onMouseUp,{passive:!1}),this._document.addEventListener("touchmove",this._onMouseMove,{passive:!1}))}isDragging(){return this._dragging}isActive(){return this._active}toString(){return"(DragDrop: startX="+this._startX+", startY="+this._startY+", dragging="+this._dragging+")"}_onKeyPress(e){e.keyCode===27&&this._onDragCancel()}_onDragCancel(){this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this.hideGlass(),this._fDragCancel!==void 0&&this._fDragCancel(this._dragging),this._dragging=!1,this._active=!1}_getLocationEvent(e){let t=e;return e&&e.touches&&(t=e.touches[0]),t}_getLocationEventEnd(e){let t=e;return e.changedTouches&&(t=e.changedTouches[0]),t}_stopPropagation(e){e.stopPropagation&&e.stopPropagation()}_preventDefault(e){return e.preventDefault&&e.cancelable&&e.preventDefault(),e}_onMouseMove(e){this._lastEvent=e;const t=this._getLocationEvent(e);return this._stopPropagation(e),this._preventDefault(e),!this._dragging&&(Math.abs(this._startX-t.clientX)>5||Math.abs(this._startY-t.clientY)>5)&&(this._dragging=!0,this._fDragStart&&(this._setDefaultGlassCursor("move"),this._dragging=this._fDragStart({clientX:this._startX,clientY:this._startY}))),this._dragging&&this._fDragMove&&this._fDragMove(t),!1}_onMouseUp(e){this._lastEvent=e;const t=this._getLocationEventEnd(e);if(this._stopPropagation(e),this._preventDefault(e),this._active=!1,this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this._manualGlassManagement||this.hideGlass(),this._dragging)this._dragging=!1,this._fDragEnd&&this._fDragEnd(e);else if(this._fDragCancel&&this._fDragCancel(this._dragging),Math.abs(this._startX-t.clientX)<=5&&Math.abs(this._startY-t.clientY)<=5){let i=!1;const r=new Date().getTime();Math.abs(this._clickX-t.clientX)<=5&&Math.abs(this._clickY-t.clientY)<=5&&r-this._lastClick<500&&this._fDblClick&&(this._fDblClick(e),i=!0),!i&&this._fClick&&this._fClick(e),this._lastClick=r,this._clickX=t.clientX,this._clickY=t.clientY}return!1}_onDragEnter(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth++,!1}_onDragLeave(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth--,this._dragDepth<=0&&this._onDragCancel(),!1}}Pt.DragDrop=ho;ho.instance=new ho;var Fe={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Action=void 0;class yp{constructor(e,t){this.type=e,this.data=t}}Wn.Action=yp;Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Actions=void 0;const ye=Wn;class te{static addNode(e,t,i,r,o){return new ye.Action(te.ADD_NODE,{json:e,toNode:t,location:i.getName(),index:r,select:o})}static moveNode(e,t,i,r,o){return new ye.Action(te.MOVE_NODE,{fromNode:e,toNode:t,location:i.getName(),index:r,select:o})}static deleteTab(e){return new ye.Action(te.DELETE_TAB,{node:e})}static deleteTabset(e){return new ye.Action(te.DELETE_TABSET,{node:e})}static renameTab(e,t){return new ye.Action(te.RENAME_TAB,{node:e,text:t})}static selectTab(e){return new ye.Action(te.SELECT_TAB,{tabNode:e})}static setActiveTabset(e){return new ye.Action(te.SET_ACTIVE_TABSET,{tabsetNode:e})}static adjustSplit(e){const t=e.node1Id,i=e.node2Id;return new ye.Action(te.ADJUST_SPLIT,{node1:t,weight1:e.weight1,pixelWidth1:e.pixelWidth1,node2:i,weight2:e.weight2,pixelWidth2:e.pixelWidth2})}static adjustBorderSplit(e,t){return new ye.Action(te.ADJUST_BORDER_SPLIT,{node:e,pos:t})}static maximizeToggle(e){return new ye.Action(te.MAXIMIZE_TOGGLE,{node:e})}static updateModelAttributes(e){return new ye.Action(te.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,t){return new ye.Action(te.UPDATE_NODE_ATTRIBUTES,{node:e,json:t})}static floatTab(e){return new ye.Action(te.FLOAT_TAB,{node:e})}static unFloatTab(e){return new ye.Action(te.UNFLOAT_TAB,{node:e})}}Fe.Actions=te;te.ADD_NODE="FlexLayout_AddNode";te.MOVE_NODE="FlexLayout_MoveNode";te.DELETE_TAB="FlexLayout_DeleteTab";te.DELETE_TABSET="FlexLayout_DeleteTabset";te.RENAME_TAB="FlexLayout_RenameTab";te.SELECT_TAB="FlexLayout_SelectTab";te.SET_ACTIVE_TABSET="FlexLayout_SetActiveTabset";te.ADJUST_SPLIT="FlexLayout_AdjustSplit";te.ADJUST_BORDER_SPLIT="FlexLayout_AdjustBorderSplit";te.MAXIMIZE_TOGGLE="FlexLayout_MaximizeToggle";te.UPDATE_MODEL_ATTRIBUTES="FlexLayout_UpdateModelAttributes";te.UPDATE_NODE_ATTRIBUTES="FlexLayout_UpdateNodeAttributes";te.FLOAT_TAB="FlexLayout_FloatTab";te.UNFLOAT_TAB="FlexLayout_UnFloatTab";var ln={},rt={};Object.defineProperty(rt,"__esModule",{value:!0});rt.Attribute=void 0;class Zi{constructor(e,t,i,r){this.name=e,this.modelName=t,this.defaultValue=i,this.alwaysWriteJson=r,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}}rt.Attribute=Zi;Zi.NUMBER="number";Zi.STRING="string";Zi.BOOLEAN="boolean";var ot={};Object.defineProperty(ot,"__esModule",{value:!0});ot.AttributeDefinitions=void 0;const Tp=rt;class wp{constructor(){this.attributes=[],this.nameToAttribute={}}addWithAll(e,t,i,r){const o=new Tp.Attribute(e,t,i,r);return this.attributes.push(o),this.nameToAttribute[e]=o,o}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,i){return this.addWithAll(e,void 0,t,i)}getAttributes(){return this.attributes}getModelName(e){const t=this.nameToAttribute[e];if(t!==void 0)return t.modelName}toJson(e,t){for(const i of this.attributes){const r=t[i.name];(i.alwaysWriteJson||r!==i.defaultValue)&&(e[i.name]=r)}}fromJson(e,t){for(const i of this.attributes){const r=e[i.name];r===void 0?t[i.name]=i.defaultValue:t[i.name]=r}}update(e,t){for(const i of this.attributes)if(e.hasOwnProperty(i.name)){const r=e[i.name];r===void 0?delete t[i.name]:t[i.name]=r}}setDefaults(e){for(const t of this.attributes)e[t.name]=t.defaultValue}toTypescriptInterface(e,t){const i=[],r=this.attributes.sort((o,a)=>o.name.localeCompare(a.name));i.push("export interface I"+e+"Attributes {");for(let o=0;o<r.length;o++){const a=r[o];let c=a.type,s,u=a,l;u.defaultValue!==void 0?s=u.defaultValue:u.modelName!==void 0&&t!==void 0&&t.nameToAttribute[u.modelName]!==void 0&&(l=u.modelName,u=t.nameToAttribute[u.modelName],s=u.defaultValue,c=u.type);let g=JSON.stringify(s);const h=u.required||u.fixed?"":"?";if(a.fixed)i.push("	"+a.name+": "+g+";");else{const f=(s!==void 0?"default: "+g:"")+(l!==void 0?" - inherited from global "+l:"");i.push("	"+a.name+h+": "+c+";"+(f.length>0?" // "+f:""))}}return i.push("}"),i.join(`
`)}}ot.AttributeDefinitions=wp;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.DropInfo=void 0;class Ep{constructor(e,t,i,r,o){this.node=e,this.rect=t,this.location=i,this.index=r,this.className=o}}Mt.DropInfo=Ep;var ue={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CLASSES=void 0,function(e){e.FLEXLAYOUT__BORDER="flexlayout__border",e.FLEXLAYOUT__BORDER_="flexlayout__border_",e.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",e.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",e.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",e.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",e.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",e.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",e.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",e.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",e.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",e.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",e.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",e.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",e.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",e.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",e.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",e.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",e.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",e.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",e.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",e.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",e.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",e.FLEXLAYOUT__FLOATING_WINDOW_TAB="flexlayout__floating_window_tab",e.FLEXLAYOUT__LAYOUT="flexlayout__layout",e.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",e.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",e.FLEXLAYOUT__SPLITTER="flexlayout__splitter",e.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",e.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",e.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",e.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",e.FLEXLAYOUT__TAB="flexlayout__tab",e.FLEXLAYOUT__TABSET="flexlayout__tabset",e.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",e.FLEXLAYOUT__TABSET_HEADER_SIZER="flexlayout__tabset_header_sizer",e.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",e.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",e.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",e.FLEXLAYOUT__TABSET_SIZER="flexlayout__tabset_sizer",e.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",e.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",e.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",e.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",e.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",e.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",e.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",e.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",e.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",e.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",e.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",e.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",e.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",e.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",e.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",e.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",e.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",e.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",e.FLEXLAYOUT__TAB_FLOATING="flexlayout__tab_floating",e.FLEXLAYOUT__TAB_FLOATING_INNER="flexlayout__tab_floating_inner",e.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",e.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",e.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",e.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",e.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",e.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu"}(n.CLASSES||(n.CLASSES={}))})(ue);var at={};Object.defineProperty(at,"__esModule",{value:!0});at.Node=void 0;const Rr=Ye,Cr=de,Sp=be;class xp{constructor(e){this._dirty=!1,this._tempSize=0,this._model=e,this._attributes={},this._children=[],this._fixed=!1,this._rect=Sp.Rect.empty(),this._visible=!1,this._listeners={}}getId(){let e=this._attributes.id;return e!==void 0||(e=this._model._nextUniqueId(),this._setId(e)),e}getModel(){return this._model}getType(){return this._attributes.type}getParent(){return this._parent}getChildren(){return this._children}getRect(){return this._rect}isVisible(){return this._visible}getOrientation(){return this._parent===void 0?this._model.isRootOrientationVertical()?Cr.Orientation.VERT:Cr.Orientation.HORZ:Cr.Orientation.flip(this._parent.getOrientation())}setEventListener(e,t){this._listeners[e]=t}removeEventListener(e){delete this._listeners[e]}_setId(e){this._attributes.id=e}_fireEvent(e,t){this._listeners[e]!==void 0&&this._listeners[e](t)}_getAttr(e){let t=this._attributes[e];if(t===void 0){const i=this._getAttributeDefinitions().getModelName(e);i!==void 0&&(t=this._model._getAttribute(i))}return t}_forEachNode(e,t){e(this,t),t++;for(const i of this._children)i._forEachNode(e,t)}_setVisible(e){e!==this._visible&&(this._fireEvent("visibility",{visible:e}),this._visible=e)}_getDrawChildren(){return this._children}_setParent(e){this._parent=e}_setRect(e){this._rect=e}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}_isFixed(){return this._fixed}_layout(e,t){this._rect=e}_findDropTargetNode(e,t,i){let r;if(this._rect.contains(t,i)){if(this._model.getMaximizedTabset()!==void 0)r=this._model.getMaximizedTabset().canDrop(e,t,i);else if(r=this.canDrop(e,t,i),r===void 0&&this._children.length!==0){for(const o of this._children)if(r=o._findDropTargetNode(e,t,i),r!==void 0)break}}return r}canDrop(e,t,i){}_canDockInto(e,t){if(t!=null){if(t.location===Rr.DockLocation.CENTER&&t.node.isEnableDrop()===!1||t.location===Rr.DockLocation.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||t.location!==Rr.DockLocation.CENTER&&t.node.isEnableDivide()===!1)return!1;if(this._model._getOnAllowDrop())return this._model._getOnAllowDrop()(e,t)}return!0}_removeChild(e){const t=this._children.indexOf(e);return t!==-1&&this._children.splice(t,1),this._dirty=!0,t}_addChild(e,t){return t!=null?this._children.splice(t,0,e):(this._children.push(e),t=this._children.length-1),e._parent=this,this._dirty=!0,t}_removeAll(){this._children=[],this._dirty=!0}_styleWithPosition(e){return e==null&&(e={}),this._rect.styleWithPosition(e)}_getTempSize(){return this._tempSize}_setTempSize(e){this._tempSize=e}isEnableDivide(){return!0}_toAttributeString(){return JSON.stringify(this._attributes,void 0,"	")}}at.Node=xp;var kt={};Object.defineProperty(kt,"__esModule",{value:!0});kt.SplitterNode=void 0;const Ap=ot,Ir=de,Lp=at;class Qi extends Lp.Node{constructor(e){super(e),this._fixed=!0,this._attributes.type=Qi.TYPE,e._addNode(this)}getWidth(){return this._model.getSplitterSize()}getMinWidth(){return this.getOrientation()===Ir.Orientation.VERT?this._model.getSplitterSize():0}getHeight(){return this._model.getSplitterSize()}getMinHeight(){return this.getOrientation()===Ir.Orientation.HORZ?this._model.getSplitterSize():0}getMinSize(e){return e===Ir.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getWeight(){return 0}_setWeight(e){}_getPrefSize(e){return this._model.getSplitterSize()}_updateAttrs(e){}_getAttributeDefinitions(){return new Ap.AttributeDefinitions}toJson(){}}kt.SplitterNode=Qi;Qi.TYPE="splitter";var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.TabNode=void 0;const fe=rt,Dp=ot,Op=at;class ke extends Op.Node{static _fromJson(e,t,i=!0){return new ke(t,e,i)}static _createAttributeDefinitions(){const e=new Dp.AttributeDefinitions;return e.add("type",ke.TYPE,!0).setType(fe.Attribute.STRING),e.add("id",void 0).setType(fe.Attribute.STRING),e.add("name","[Unnamed Tab]").setType(fe.Attribute.STRING),e.add("altName",void 0).setType(fe.Attribute.STRING),e.add("helpText",void 0).setType(fe.Attribute.STRING),e.add("component",void 0).setType(fe.Attribute.STRING),e.add("config",void 0).setType("any"),e.add("floating",!1).setType(fe.Attribute.BOOLEAN),e.addInherited("enableClose","tabEnableClose").setType(fe.Attribute.BOOLEAN),e.addInherited("closeType","tabCloseType").setType("ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(fe.Attribute.BOOLEAN),e.addInherited("enableRename","tabEnableRename").setType(fe.Attribute.BOOLEAN),e.addInherited("className","tabClassName").setType(fe.Attribute.STRING),e.addInherited("icon","tabIcon").setType(fe.Attribute.STRING),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(fe.Attribute.BOOLEAN),e.addInherited("enableFloat","tabEnableFloat").setType(fe.Attribute.BOOLEAN),e.addInherited("borderWidth","tabBorderWidth").setType(fe.Attribute.NUMBER),e.addInherited("borderHeight","tabBorderHeight").setType(fe.Attribute.NUMBER),e}constructor(e,t,i=!0){super(e),this._extra={},ke._attributeDefinitions.fromJson(t,this._attributes),i===!0&&e._addNode(this)}getWindow(){return this._window}getTabRect(){return this._tabRect}_setTabRect(e){this._tabRect=e}_setRenderedName(e){this._renderedName=e}_getNameForOverflowMenu(){const e=this._getAttr("altName");return e!==void 0?e:this._renderedName}getName(){return this._getAttr("name")}getHelpText(){return this._getAttr("helpText")}getComponent(){return this._getAttr("component")}getConfig(){return this._attributes.config}getExtraData(){return this._extra}isFloating(){return this._getAttr("floating")}getIcon(){return this._getAttr("icon")}isEnableClose(){return this._getAttr("enableClose")}getCloseType(){return this._getAttr("closeType")}isEnableFloat(){return this._getAttr("enableFloat")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableRename(){return this._getAttr("enableRename")}getClassName(){return this._getAttr("className")}isEnableRenderOnDemand(){return this._getAttr("enableRenderOnDemand")}_setName(e){this._attributes.name=e,this._window&&this._window.document&&(this._window.document.title=e)}_setFloating(e){this._attributes.floating=e}_layout(e,t){e.equals(this._rect)||this._fireEvent("resize",{rect:e}),this._rect=e}_delete(){this._parent._remove(this),this._fireEvent("close",{})}toJson(){const e={};return ke._attributeDefinitions.toJson(e,this._attributes),e}_updateAttrs(e){ke._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return ke._attributeDefinitions}_setWindow(e){this._window=e}_setBorderWidth(e){this._attributes.borderWidth=e}_setBorderHeight(e){this._attributes.borderHeight=e}static getAttributeDefinitions(){return ke._attributeDefinitions}}wt.TabNode=ke;ke.TYPE="tab";ke._attributeDefinitions=ke._createAttributeDefinitions();var $e={},cn={},dn={},Ca;function Bo(){if(Ca)return dn;Ca=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.RowNode=void 0;const n=rt,e=ot,t=Ye,i=Mt,r=de,o=be,a=ue,c=st(),s=at,u=kt,l=Et();let g=class he extends s.Node{static _fromJson(f,d){const p=new he(d,f);if(f.children!=null)for(const m of f.children)if(m.type===l.TabSetNode.TYPE){const b=l.TabSetNode._fromJson(m,d);p._addChild(b)}else{const b=he._fromJson(m,d);p._addChild(b)}return p}static _createAttributeDefinitions(){const f=new e.AttributeDefinitions;return f.add("type",he.TYPE,!0).setType(n.Attribute.STRING).setFixed(),f.add("id",void 0).setType(n.Attribute.STRING),f.add("weight",100).setType(n.Attribute.NUMBER),f.add("width",void 0).setType(n.Attribute.NUMBER),f.add("height",void 0).setType(n.Attribute.NUMBER),f}constructor(f,d){super(f),this._dirty=!0,this._drawChildren=[],this._minHeight=0,this._minWidth=0,he._attributeDefinitions.fromJson(d,this._attributes),f._addNode(this)}getWeight(){return this._attributes.weight}getWidth(){return this._getAttr("width")}getHeight(){return this._getAttr("height")}_setWeight(f){this._attributes.weight=f}_layout(f,d){super._layout(f,d);const p=this._rect._getSize(this.getOrientation());let m=0,b=0,_=0,v=0;const y=this._getDrawChildren();for(const S of y){const T=S._getPrefSize(this.getOrientation());S._isFixed()?T!==void 0&&(b+=T):T===void 0?m+=S.getWeight():(_+=T,v+=S.getWeight())}let w=!1,x=p-b-_;x<0&&(x=p-b,w=!0,m+=v);let C=0,R=0;for(const S of y){const T=S._getPrefSize(this.getOrientation());if(S._isFixed())T!==void 0&&S._setTempSize(T);else if(T==null||w){if(m===0)S._setTempSize(0);else{const O=S.getMinSize(this.getOrientation()),M=Math.floor(x*(S.getWeight()/m));S._setTempSize(Math.max(O,M))}R+=S._getTempSize()}else S._setTempSize(T);C+=S._getTempSize()}if(R>0){for(;C<p;)for(const S of y)if(!(S instanceof u.SplitterNode)){const T=S._getPrefSize(this.getOrientation());!S._isFixed()&&(T===void 0||w)&&C<p&&(S._setTempSize(S._getTempSize()+1),C++)}for(;C>p;){let S=!1;for(const T of y)if(!(T instanceof u.SplitterNode)){const O=T.getMinSize(this.getOrientation());T._getTempSize()>O&&C>p&&(T._setTempSize(T._getTempSize()-1),C--,S=!0)}if(!S)break}for(;C>p;){let S=!1;for(const T of y)T instanceof u.SplitterNode||T._getTempSize()>0&&C>p&&(T._setTempSize(T._getTempSize()-1),C--,S=!0);if(!S)break}}let D=0;for(const S of y)this.getOrientation()===r.Orientation.HORZ?S._layout(new o.Rect(this._rect.x+D,this._rect.y,S._getTempSize(),this._rect.height),d):S._layout(new o.Rect(this._rect.x,this._rect.y+D,this._rect.width,S._getTempSize()),d),D+=S._getTempSize();return!0}_getSplitterBounds(f,d=!1){const p=[0,0],m=this._getDrawChildren(),b=m.indexOf(f),_=m[b-1],v=m[b+1];if(this.getOrientation()===r.Orientation.HORZ){const y=d?_.getMinWidth():0,w=d?v.getMinWidth():0;p[0]=_.getRect().x+y,p[1]=v.getRect().getRight()-f.getWidth()-w}else{const y=d?_.getMinHeight():0,w=d?v.getMinHeight():0;p[0]=_.getRect().y+y,p[1]=v.getRect().getBottom()-f.getHeight()-w}return p}_calculateSplit(f,d){let p;const m=this._getDrawChildren(),b=m.indexOf(f),_=this._getSplitterBounds(f),v=m[b-1].getWeight()+m[b+1].getWeight(),y=Math.max(0,d-_[0]),w=Math.max(0,_[1]-d);if(y+w>0){const x=y*v/(y+w),C=w*v/(y+w);p={node1Id:m[b-1].getId(),weight1:x,pixelWidth1:y,node2Id:m[b+1].getId(),weight2:C,pixelWidth2:w}}return p}_getDrawChildren(){if(this._dirty){this._drawChildren=[];for(let f=0;f<this._children.length;f++){const d=this._children[f];if(f!==0){const p=new u.SplitterNode(this._model);p._setParent(this),this._drawChildren.push(p)}this._drawChildren.push(d)}this._dirty=!1}return this._drawChildren}getMinSize(f){return f===r.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this._minWidth}getMinHeight(){return this._minHeight}calcMinSize(){this._minHeight=0,this._minWidth=0;let f=!0;for(const d of this._children){const p=d;p instanceof he&&p.calcMinSize(),this.getOrientation()===r.Orientation.VERT?(this._minHeight+=p.getMinHeight(),f||(this._minHeight+=this._model.getSplitterSize()),this._minWidth=Math.max(this._minWidth,p.getMinWidth())):(this._minWidth+=p.getMinWidth(),f||(this._minWidth+=this._model.getSplitterSize()),this._minHeight=Math.max(this._minHeight,p.getMinHeight())),f=!1}}_tidy(){let f=0;for(;f<this._children.length;){const d=this._children[f];if(d instanceof he){d._tidy();const p=d.getChildren();if(p.length===0)this._removeChild(d);else if(p.length===1){const m=p[0];if(this._removeChild(d),m instanceof he){let b=0;const _=m.getChildren();for(const v of _)b+=v.getWeight();for(let v=0;v<_.length;v++){const y=_[v];y._setWeight(d.getWeight()*y.getWeight()/b),this._addChild(y,f+v)}}else m._setWeight(d.getWeight()),this._addChild(m,f)}else f++}else d instanceof l.TabSetNode&&d.getChildren().length===0&&d.isEnableDeleteWhenEmpty()?(this._removeChild(d),d===this._model.getMaximizedTabset()&&this._model._setMaximizedTabset(void 0)):f++}if(this===this._model.getRoot()&&this._children.length===0){const d=this._model._getOnCreateTabSet();let p=d?d():{};p=Object.assign(Object.assign({},p),{selected:-1});const m=new l.TabSetNode(this._model,p);this._model._setActiveTabset(m),this._addChild(m)}}canDrop(f,d,p){const m=p-this._rect.y,b=d-this._rect.x,_=this._rect.width,v=this._rect.height,y=10,w=50;let x;if(this._model.isEnableEdgeDock()&&this._parent===void 0){if(d<this._rect.x+y&&m>v/2-w&&m<v/2+w){const C=t.DockLocation.LEFT,R=C.getDockRect(this._rect);R.width=R.width/2,x=new i.DropInfo(this,R,C,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(d>this._rect.getRight()-y&&m>v/2-w&&m<v/2+w){const C=t.DockLocation.RIGHT,R=C.getDockRect(this._rect);R.width=R.width/2,R.x+=R.width,x=new i.DropInfo(this,R,C,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(p<this._rect.y+y&&b>_/2-w&&b<_/2+w){const C=t.DockLocation.TOP,R=C.getDockRect(this._rect);R.height=R.height/2,x=new i.DropInfo(this,R,C,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(p>this._rect.getBottom()-y&&b>_/2-w&&b<_/2+w){const C=t.DockLocation.BOTTOM,R=C.getDockRect(this._rect);R.height=R.height/2,R.y+=R.height,x=new i.DropInfo(this,R,C,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(x!==void 0&&!f._canDockInto(f,x))return}return x}drop(f,d,p){const m=d,b=f.getParent();b&&b._removeChild(f),b!==void 0&&b.getType()===l.TabSetNode.TYPE&&b._setSelected(0),b!==void 0&&b.getType()===c.BorderNode.TYPE&&b._setSelected(-1);let _;if(f instanceof l.TabSetNode)_=f;else{const w=this._model._getOnCreateTabSet();_=new l.TabSetNode(this._model,w?w(f):{}),_._addChild(f)}let v=this._children.reduce((w,x)=>w+x.getWeight(),0);v===0&&(v=100),_._setWeight(v/3);const y=!this._model.isRootOrientationVertical();if(y&&m===t.DockLocation.LEFT||!y&&m===t.DockLocation.TOP)this._addChild(_,0);else if(y&&m===t.DockLocation.RIGHT||!y&&m===t.DockLocation.BOTTOM)this._addChild(_);else if(y&&m===t.DockLocation.TOP||!y&&m===t.DockLocation.LEFT){const w=new he(this._model,{}),x=new he(this._model,{});x._setWeight(75),_._setWeight(25);for(const C of this._children)x._addChild(C);this._removeAll(),w._addChild(_),w._addChild(x),this._addChild(w)}else if(y&&m===t.DockLocation.BOTTOM||!y&&m===t.DockLocation.RIGHT){const w=new he(this._model,{}),x=new he(this._model,{});x._setWeight(75),_._setWeight(25);for(const C of this._children)x._addChild(C);this._removeAll(),w._addChild(x),w._addChild(_),this._addChild(w)}this._model._setActiveTabset(_),this._model._tidy()}toJson(){const f={};he._attributeDefinitions.toJson(f,this._attributes),f.children=[];for(const d of this._children)f.children.push(d.toJson());return f}isEnableDrop(){return!0}_getPrefSize(f){let d=this.getWidth();return f===r.Orientation.VERT&&(d=this.getHeight()),d}_getAttributeDefinitions(){return he._attributeDefinitions}_updateAttrs(f){he._attributeDefinitions.update(f,this._attributes)}static getAttributeDefinitions(){return he._attributeDefinitions}};return dn.RowNode=g,g.TYPE="row",g._attributeDefinitions=g._createAttributeDefinitions(),dn}var Ia;function Et(){if(Ia)return cn;Ia=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.TabSetNode=void 0;const n=rt,e=ot,t=Ye,i=Mt,r=de,o=be,a=ue,c=st(),s=at,u=Bo(),l=wt,g=Fo();let h=class Ze extends s.Node{static _fromJson(d,p){const m=new Ze(p,d);if(d.children!=null)for(const b of d.children){const _=l.TabNode._fromJson(b,p);m._addChild(_)}return m._children.length===0&&m._setSelected(-1),d.maximized&&d.maximized===!0&&p._setMaximizedTabset(m),d.active&&d.active===!0&&p._setActiveTabset(m),m}static _createAttributeDefinitions(){const d=new e.AttributeDefinitions;return d.add("type",Ze.TYPE,!0).setType(n.Attribute.STRING).setFixed(),d.add("id",void 0).setType(n.Attribute.STRING),d.add("weight",100).setType(n.Attribute.NUMBER),d.add("width",void 0).setType(n.Attribute.NUMBER),d.add("height",void 0).setType(n.Attribute.NUMBER),d.add("selected",0).setType(n.Attribute.NUMBER),d.add("name",void 0).setType(n.Attribute.STRING),d.add("config",void 0).setType("any"),d.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty"),d.addInherited("enableDrop","tabSetEnableDrop"),d.addInherited("enableDrag","tabSetEnableDrag"),d.addInherited("enableDivide","tabSetEnableDivide"),d.addInherited("enableMaximize","tabSetEnableMaximize"),d.addInherited("enableClose","tabSetEnableClose"),d.addInherited("classNameTabStrip","tabSetClassNameTabStrip"),d.addInherited("classNameHeader","tabSetClassNameHeader"),d.addInherited("enableTabStrip","tabSetEnableTabStrip"),d.addInherited("borderInsets","tabSetBorderInsets"),d.addInherited("marginInsets","tabSetMarginInsets"),d.addInherited("minWidth","tabSetMinWidth"),d.addInherited("minHeight","tabSetMinHeight"),d.addInherited("headerHeight","tabSetHeaderHeight"),d.addInherited("tabStripHeight","tabSetTabStripHeight"),d.addInherited("tabLocation","tabSetTabLocation"),d.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(n.Attribute.BOOLEAN),d}constructor(d,p){super(d),Ze._attributeDefinitions.fromJson(p,this._attributes),d._addNode(this),this._calculatedTabBarHeight=0,this._calculatedHeaderBarHeight=0}getName(){return this._getAttr("name")}getSelected(){const d=this._attributes.selected;return d!==void 0?d:-1}getSelectedNode(){const d=this.getSelected();if(d!==-1)return this._children[d]}getWeight(){return this._getAttr("weight")}getWidth(){return this._getAttr("width")}getMinWidth(){return this._getAttr("minWidth")}getHeight(){return this._getAttr("height")}getMinHeight(){return this._getAttr("minHeight")}getMinSize(d){return d===r.Orientation.HORZ?this.getMinWidth():this.getMinHeight()}getConfig(){return this._attributes.config}isMaximized(){return this._model.getMaximizedTabset()===this}isActive(){return this._model.getActiveTabset()===this}isEnableDeleteWhenEmpty(){return this._getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this._getAttr("enableDrop")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableDivide(){return this._getAttr("enableDivide")}isEnableMaximize(){return this._getAttr("enableMaximize")}isEnableClose(){return this._getAttr("enableClose")}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset()===this?!0:!(this.getParent()===this.getModel().getRoot()&&this.getModel().getRoot().getChildren().length===1):!1}isEnableTabStrip(){return this._getAttr("enableTabStrip")}isAutoSelectTab(){return this._getAttr("autoSelectTab")}getClassNameTabStrip(){return this._getAttr("classNameTabStrip")}getClassNameHeader(){return this._getAttr("classNameHeader")}calculateHeaderBarHeight(d){const p=this._getAttr("headerHeight");p!==0?this._calculatedHeaderBarHeight=p:this._calculatedHeaderBarHeight=d.headerBarSize}calculateTabBarHeight(d){const p=this._getAttr("tabStripHeight");p!==0?this._calculatedTabBarHeight=p:this._calculatedTabBarHeight=d.tabBarSize}getHeaderHeight(){return this._calculatedHeaderBarHeight}getTabStripHeight(){return this._calculatedTabBarHeight}getTabLocation(){return this._getAttr("tabLocation")}_setWeight(d){this._attributes.weight=d}_setSelected(d){this._attributes.selected=d}canDrop(d,p,m){let b;if(d===this){const _=t.DockLocation.CENTER,v=this._tabHeaderRect;b=new i.DropInfo(this,v,_,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._contentRect.contains(p,m)){let _=t.DockLocation.CENTER;this._model.getMaximizedTabset()===void 0&&(_=t.DockLocation.getLocation(this._contentRect,p,m));const v=_.getDockRect(this._rect);b=new i.DropInfo(this,v,_,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._tabHeaderRect!=null&&this._tabHeaderRect.contains(p,m)){let _,v,y;if(this._children.length===0)_=this._tabHeaderRect.clone(),v=_.y+3,y=_.height-4,_.width=2;else{let w=this._children[0];_=w.getTabRect(),v=_.y,y=_.height;let x=this._tabHeaderRect.x,C=0;for(let R=0;R<this._children.length;R++){if(w=this._children[R],_=w.getTabRect(),C=_.x+_.width/2,p>=x&&p<C){const D=t.DockLocation.CENTER,S=new o.Rect(_.x-2,v,3,y);b=new i.DropInfo(this,S,D,R,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}x=C}}if(b==null){const w=t.DockLocation.CENTER,x=new o.Rect(_.getRight()-2,v,3,y);b=new i.DropInfo(this,x,w,this._children.length,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}if(d._canDockInto(d,b))return b}_layout(d,p){this.calculateHeaderBarHeight(p),this.calculateTabBarHeight(p),this.isMaximized()&&(d=this._model.getRoot().getRect()),d=d.removeInsets(this._getAttr("marginInsets")),this._rect=d,d=d.removeInsets(this._getAttr("borderInsets"));const m=this.getName()!==void 0;let b=0,_=0;m&&(b+=this._calculatedHeaderBarHeight,_+=this._calculatedHeaderBarHeight),this.isEnableTabStrip()&&(this.getTabLocation()==="top"?this._tabHeaderRect=new o.Rect(d.x,d.y+b,d.width,this._calculatedTabBarHeight):this._tabHeaderRect=new o.Rect(d.x,d.y+d.height-this._calculatedTabBarHeight,d.width,this._calculatedTabBarHeight),_+=this._calculatedTabBarHeight,this.getTabLocation()==="top"&&(b+=this._calculatedTabBarHeight)),this._contentRect=new o.Rect(d.x,d.y+b,d.width,d.height-_);for(let v=0;v<this._children.length;v++){const y=this._children[v];y._layout(this._contentRect,p),y._setVisible(v===this.getSelected())}}_delete(){this._parent._removeChild(this)}_remove(d){const p=this._removeChild(d);this._model._tidy(),(0,g.adjustSelectedIndex)(this,p)}drop(d,p,m,b){const _=p;if(this===d)return;let v=d.getParent(),y=0;if(v!==void 0&&(y=v._removeChild(d),v instanceof c.BorderNode&&v.getSelected()===y?v._setSelected(-1):(0,g.adjustSelectedIndex)(v,y)),d.getType()===l.TabNode.TYPE&&v===this&&y<m&&m>0&&m--,_===t.DockLocation.CENTER){let w=m;if(w===-1&&(w=this._children.length),d.getType()===l.TabNode.TYPE)this._addChild(d,w),(b||b!==!1&&this.isAutoSelectTab())&&this._setSelected(w);else{for(let x=0;x<d.getChildren().length;x++){const C=d.getChildren()[x];this._addChild(C,w),w++}this.getSelected()===-1&&this._children.length>0&&this._setSelected(0)}this._model._setActiveTabset(this)}else{let w;if(d instanceof l.TabNode){const R=this._model._getOnCreateTabSet();w=new Ze(this._model,R?R(d):{}),w._addChild(d),v=w}else w=d;const x=this._parent,C=x.getChildren().indexOf(this);if(x.getOrientation()===_._orientation)w._setWeight(this.getWeight()/2),this._setWeight(this.getWeight()/2),x._addChild(w,C+_._indexPlus);else{const R=new u.RowNode(this._model,{});R._setWeight(this.getWeight()),R._addChild(this),this._setWeight(50),w._setWeight(50),R._addChild(w,_._indexPlus),x._removeChild(this),x._addChild(R,C)}this._model._setActiveTabset(w)}this._model._tidy()}toJson(){const d={};return Ze._attributeDefinitions.toJson(d,this._attributes),d.children=this._children.map(p=>p.toJson()),this.isActive()&&(d.active=!0),this.isMaximized()&&(d.maximized=!0),d}_updateAttrs(d){Ze._attributeDefinitions.update(d,this._attributes)}_getAttributeDefinitions(){return Ze._attributeDefinitions}_getPrefSize(d){let p=this.getWidth();return d===r.Orientation.VERT&&(p=this.getHeight()),p}static getAttributeDefinitions(){return Ze._attributeDefinitions}};return cn.TabSetNode=h,h.TYPE="tabset",h._attributeDefinitions=h._createAttributeDefinitions(),cn}var Na;function Fo(){if(Na)return $e;Na=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.randomUUID=$e.adjustSelectedIndex=$e.adjustSelectedIndexAfterDock=$e.adjustSelectedIndexAfterFloat=void 0;const n=Et(),e=st();function t(a){const c=a.getParent();if(c!==null)if(c instanceof n.TabSetNode){let s=!1,u=0;const l=c.getChildren();for(let g=0;g<l.length;g++){const h=l[g];if(h===a)s=!0;else if(!h.isFloating()&&(u=g,s))break}c._setSelected(u)}else c instanceof e.BorderNode&&c._setSelected(-1)}$e.adjustSelectedIndexAfterFloat=t;function i(a){const c=a.getParent();if(c!==null&&(c instanceof n.TabSetNode||c instanceof e.BorderNode)){const s=c.getChildren();for(let u=0;u<s.length;u++)if(s[u]===a){c._setSelected(u);return}}}$e.adjustSelectedIndexAfterDock=i;function r(a,c){if(a!==void 0&&(a.getType()===n.TabSetNode.TYPE||a.getType()===e.BorderNode.TYPE)){const s=a.getSelected();s!==-1&&(c===s&&a.getChildren().length>0?c>=a.getChildren().length&&a._setSelected(a.getChildren().length-1):c<s?a._setSelected(s-1):c>s||a._setSelected(-1))}}$e.adjustSelectedIndex=r;function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16))}return $e.randomUUID=o,$e}var Ba;function st(){if(Ba)return ln;Ba=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.BorderNode=void 0;const n=rt,e=ot,t=Ye,i=Mt,r=de,o=be,a=ue,c=at,s=kt,u=wt,l=Fo();let g=class Qe extends c.Node{static _fromJson(f,d){const p=t.DockLocation.getByName(f.location),m=new Qe(p,f,d);return f.children&&(m._children=f.children.map(b=>{const _=u.TabNode._fromJson(b,d);return _._setParent(m),_})),m}static _createAttributeDefinitions(){const f=new e.AttributeDefinitions;return f.add("type",Qe.TYPE,!0).setType(n.Attribute.STRING).setFixed(),f.add("selected",-1).setType(n.Attribute.NUMBER),f.add("show",!0).setType(n.Attribute.BOOLEAN),f.add("config",void 0).setType("any"),f.addInherited("barSize","borderBarSize").setType(n.Attribute.NUMBER),f.addInherited("enableDrop","borderEnableDrop").setType(n.Attribute.BOOLEAN),f.addInherited("className","borderClassName").setType(n.Attribute.STRING),f.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(n.Attribute.BOOLEAN),f.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(n.Attribute.BOOLEAN),f.addInherited("size","borderSize").setType(n.Attribute.NUMBER),f.addInherited("minSize","borderMinSize").setType(n.Attribute.NUMBER),f.addInherited("enableAutoHide","borderEnableAutoHide").setType(n.Attribute.BOOLEAN),f}constructor(f,d,p){super(p),this._adjustedSize=0,this._calculatedBorderBarSize=0,this._location=f,this._drawChildren=[],this._attributes.id=`border_${f.getName()}`,Qe._attributeDefinitions.fromJson(d,this._attributes),p._addNode(this)}getLocation(){return this._location}getTabHeaderRect(){return this._tabHeaderRect}getRect(){return this._tabHeaderRect}getContentRect(){return this._contentRect}isEnableDrop(){return this._getAttr("enableDrop")}isAutoSelectTab(f){return f==null&&(f=this.getSelected()!==-1),f?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")}getClassName(){return this._getAttr("className")}calcBorderBarSize(f){const d=this._getAttr("barSize");d!==0?this._calculatedBorderBarSize=d:this._calculatedBorderBarSize=f.borderBarSize}getBorderBarSize(){return this._calculatedBorderBarSize}getSize(){const f=this._getAttr("size"),d=this.getSelected();if(d===-1)return f;{const p=this._children[d],m=this._location._orientation===r.Orientation.HORZ?p._getAttr("borderWidth"):p._getAttr("borderHeight");return m===-1?f:m}}getMinSize(){return this._getAttr("minSize")}getSelected(){return this._attributes.selected}getSelectedNode(){if(this.getSelected()!==-1)return this._children[this.getSelected()]}getOrientation(){return this._location.getOrientation()}getConfig(){return this._attributes.config}isMaximized(){return!1}isShowing(){return this._attributes.show?!(this._model._getShowHiddenBorder()!==this._location&&this.isAutoHide()&&this._children.length===0):!1}isAutoHide(){return this._getAttr("enableAutoHide")}_setSelected(f){this._attributes.selected=f}_setSize(f){const d=this.getSelected();if(d===-1)this._attributes.size=f;else{const p=this._children[d];(this._location._orientation===r.Orientation.HORZ?p._getAttr("borderWidth"):p._getAttr("borderHeight"))===-1?this._attributes.size=f:this._location._orientation===r.Orientation.HORZ?p._setBorderWidth(f):p._setBorderHeight(f)}}_updateAttrs(f){Qe._attributeDefinitions.update(f,this._attributes)}_getDrawChildren(){return this._drawChildren}_setAdjustedSize(f){this._adjustedSize=f}_getAdjustedSize(){return this._adjustedSize}_layoutBorderOuter(f,d){this.calcBorderBarSize(d);const p=this._location.split(f,this.getBorderBarSize());return this._tabHeaderRect=p.start,p.end}_layoutBorderInner(f,d){this._drawChildren=[];const p=this._location,m=p.split(f,this._adjustedSize+this._model.getSplitterSize()),b=p.reflect().split(m.start,this._model.getSplitterSize());this._contentRect=b.end;for(let _=0;_<this._children.length;_++){const v=this._children[_];v._layout(this._contentRect,d),v._setVisible(_===this.getSelected()),this._drawChildren.push(v)}if(this.getSelected()===-1)return f;{const _=new s.SplitterNode(this._model);return _._setParent(this),_._setRect(b.start),this._drawChildren.push(_),m.end}}_remove(f){const d=this._removeChild(f);this.getSelected()!==-1&&(0,l.adjustSelectedIndex)(this,d)}canDrop(f,d,p){if(f.getType()!==u.TabNode.TYPE)return;let m;const b=t.DockLocation.CENTER;if(this._tabHeaderRect.contains(d,p)){if(this._location._orientation===r.Orientation.VERT)if(this._children.length>0){let _=this._children[0],v=_.getTabRect();const y=v.y,w=v.height;let x=this._tabHeaderRect.x,C=0;for(let R=0;R<this._children.length;R++){if(_=this._children[R],v=_.getTabRect(),C=v.x+v.width/2,d>=x&&d<C){const D=new o.Rect(v.x-2,y,3,w);m=new i.DropInfo(this,D,b,R,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}x=C}if(m==null){const R=new o.Rect(v.getRight()-2,y,3,w);m=new i.DropInfo(this,R,b,this._children.length,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}else{const _=new o.Rect(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18);m=new i.DropInfo(this,_,b,0,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}else if(this._children.length>0){let _=this._children[0],v=_.getTabRect();const y=v.x,w=v.width;let x=this._tabHeaderRect.y,C=0;for(let R=0;R<this._children.length;R++){if(_=this._children[R],v=_.getTabRect(),C=v.y+v.height/2,p>=x&&p<C){const D=new o.Rect(y,v.y-2,w,3);m=new i.DropInfo(this,D,b,R,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT);break}x=C}if(m==null){const R=new o.Rect(y,v.getBottom()-2,w,3);m=new i.DropInfo(this,R,b,this._children.length,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}}else{const _=new o.Rect(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3);m=new i.DropInfo(this,_,b,0,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT)}if(!f._canDockInto(f,m))return}else if(this.getSelected()!==-1&&this._contentRect.contains(d,p)){const _=this._contentRect;if(m=new i.DropInfo(this,_,b,-1,a.CLASSES.FLEXLAYOUT__OUTLINE_RECT),!f._canDockInto(f,m))return}return m}drop(f,d,p,m){let b=0;const _=f.getParent();_!==void 0&&(b=_._removeChild(f),_!==this&&_ instanceof Qe&&_.getSelected()===b?_._setSelected(-1):(0,l.adjustSelectedIndex)(_,b)),f.getType()===u.TabNode.TYPE&&_===this&&b<p&&p>0&&p--;let v=p;v===-1&&(v=this._children.length),f.getType()===u.TabNode.TYPE&&this._addChild(f,v),(m||m!==!1&&this.isAutoSelectTab())&&this._setSelected(v),this._model._tidy()}toJson(){const f={};return Qe._attributeDefinitions.toJson(f,this._attributes),f.location=this._location.getName(),f.children=this._children.map(d=>d.toJson()),f}_getSplitterBounds(f,d=!1){const p=[0,0],m=d?this.getMinSize():0,b=this._model._getOuterInnerRects().outer,_=this._model._getOuterInnerRects().inner,v=this._model.getRoot();return this._location===t.DockLocation.TOP?(p[0]=b.y+m,p[1]=Math.max(p[0],_.getBottom()-f.getHeight()-v.getMinHeight())):this._location===t.DockLocation.LEFT?(p[0]=b.x+m,p[1]=Math.max(p[0],_.getRight()-f.getWidth()-v.getMinWidth())):this._location===t.DockLocation.BOTTOM?(p[1]=b.getBottom()-f.getHeight()-m,p[0]=Math.min(p[1],_.y+v.getMinHeight())):this._location===t.DockLocation.RIGHT&&(p[1]=b.getRight()-f.getWidth()-m,p[0]=Math.min(p[1],_.x+v.getMinWidth())),p}_calculateSplit(f,d){const p=this._getSplitterBounds(f);return this._location===t.DockLocation.BOTTOM||this._location===t.DockLocation.RIGHT?Math.max(0,p[1]-d):Math.max(0,d-p[0])}_getAttributeDefinitions(){return Qe._attributeDefinitions}static getAttributeDefinitions(){return Qe._attributeDefinitions}};return ln.BorderNode=g,g.TYPE="border",g._attributeDefinitions=g._createAttributeDefinitions(),ln}var er={},tr={},lt={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.I18nLabel=void 0,function(e){e.Close_Tab="Close",e.Close_Tabset="Close tabset",e.Move_Tab="Move: ",e.Move_Tabset="Move tabset",e.Maximize="Maximize tabset",e.Restore="Restore tabset",e.Float_Tab="Show selected tab in floating window",e.Overflow_Menu_Tooltip="Hidden tabs",e.Floating_Window_Message="This panel is shown in a floating window",e.Floating_Window_Show_Window="Show window",e.Floating_Window_Dock_Window="Dock window",e.Error_rendering_component="Error rendering component"}(n.I18nLabel||(n.I18nLabel={}))})(lt);var nr={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ICloseType=void 0,function(e){e[e.Visible=1]="Visible",e[e.Always=2]="Always",e[e.Selected=3]="Selected"}(n.ICloseType||(n.ICloseType={}))})(nr);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.isAuxMouseEvent=xe.hideElement=xe.getRenderStateEx=void 0;const Rp=E;function Cp(n,e,t,i){let r=t?t(e):void 0,o=e.getName(),a=e.getName();function c(l){return l.titleContent!==void 0}if(i!==void 0){const l=i(e);l!==void 0&&(typeof l=="string"?(o=l,a=l):c(l)?(o=l.titleContent,a=l.name):o=l)}r===void 0&&e.getIcon()!==void 0&&(r=Rp.createElement("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const u={leading:r,content:o,name:a,buttons:[]};return n.customizeTab(e,u),e._setRenderedName(u.name),u}xe.getRenderStateEx=Cp;function Ip(n,e){e?n.visibility="hidden":n.display="none"}xe.hideElement=Ip;function Np(n){let e=!1;return n.nativeEvent instanceof MouseEvent&&(n.nativeEvent.button!==0||n.ctrlKey||n.altKey||n.metaKey||n.shiftKey)&&(e=!0),e}xe.isAuxMouseEvent=Np;Object.defineProperty(tr,"__esModule",{value:!0});tr.BorderButton=void 0;const ut=E,Bp=lt,Nr=Fe,Fp=be,Fa=nr,ft=ue,Br=xe,Pp=n=>{const{layout:e,node:t,selected:i,border:r,iconFactory:o,titleFactory:a,icons:c,path:s}=n,u=ut.useRef(null),l=ut.useRef(null),g=T=>{!(0,Br.isAuxMouseEvent)(T)&&!e.getEditingTab()&&e.dragStart(T,void 0,t,t.isEnableDrag(),d,p)},h=T=>{(0,Br.isAuxMouseEvent)(T)&&e.auxMouseClick(t,T)},f=T=>{e.showContextMenu(t,T)},d=()=>{e.doAction(Nr.Actions.selectTab(t.getId()))},p=T=>{},m=()=>{const T=t.getCloseType();return!!(i||T===Fa.ICloseType.Always||T===Fa.ICloseType.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},b=T=>{m()?e.doAction(Nr.Actions.deleteTab(t.getId())):d()},_=T=>{T.stopPropagation()};ut.useLayoutEffect(()=>{v(),e.getEditingTab()===t&&l.current.select()});const v=()=>{const T=e.getDomRect(),O=u.current.getBoundingClientRect();t._setTabRect(new Fp.Rect(O.left-T.left,O.top-T.top,O.width,O.height))},y=T=>{T.stopPropagation()},w=T=>{T.keyCode===27?e.setEditingTab(void 0):T.keyCode===13&&(e.setEditingTab(void 0),e.doAction(Nr.Actions.renameTab(t.getId(),T.target.value)))},x=e.getClassName;let C=x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON)+" "+x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON_+r);i?C+=" "+x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON__SELECTED):C+=" "+x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),t.getClassName()!==void 0&&(C+=" "+t.getClassName());const R=(0,Br.getRenderStateEx)(e,t,o,a);let D=R.content?ut.createElement("div",{className:x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON_CONTENT)},R.content):null;const S=R.leading?ut.createElement("div",{className:x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON_LEADING)},R.leading):null;if(e.getEditingTab()===t&&(D=ut.createElement("input",{ref:l,className:x(ft.CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":s+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:w,onMouseDown:y,onTouchStart:y})),t.isEnableClose()){const T=e.i18nName(Bp.I18nLabel.Close_Tab);R.buttons.push(ut.createElement("div",{key:"close","data-layout-path":s+"/button/close",title:T,className:x(ft.CLASSES.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onMouseDown:_,onClick:b,onTouchStart:_},typeof c.close=="function"?c.close(t):c.close))}return ut.createElement("div",{ref:u,"data-layout-path":s,className:C,onMouseDown:g,onClick:h,onAuxClick:h,onContextMenu:f,onTouchStart:g,title:t.getHelpText()},S,D,R.buttons)};tr.BorderButton=Pp;var Yn={},Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.TabButtonStamp=void 0;const ii=E,Fr=ue,Mp=xe,kp=n=>{const{layout:e,node:t,iconFactory:i,titleFactory:r}=n,o=ii.useRef(null),a=e.getClassName;let c=a(Fr.CLASSES.FLEXLAYOUT__TAB_BUTTON_STAMP);const s=(0,Mp.getRenderStateEx)(e,t,i,r);let u=s.content?ii.createElement("div",{className:a(Fr.CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT)},s.content):t._getNameForOverflowMenu();const l=s.leading?ii.createElement("div",{className:a(Fr.CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING)},s.leading):null;return ii.createElement("div",{ref:o,className:c,title:t.getHelpText()},l,u)};Xn.TabButtonStamp=kp;Object.defineProperty(Yn,"__esModule",{value:!0});Yn.showPopup=void 0;const di=E,Pr=Pt,go=ue,zp=Xn;function $p(n,e,t,i,r,o){const a=i.getRootDiv(),c=i.getClassName,s=n.ownerDocument,u=n.getBoundingClientRect(),l=a.getBoundingClientRect(),g=s.createElement("div");g.className=c(go.CLASSES.FLEXLAYOUT__POPUP_MENU_CONTAINER),u.left<l.left+l.width/2?g.style.left=u.left-l.left+"px":g.style.right=l.right-u.right+"px",u.top<l.top+l.height/2?g.style.top=u.top-l.top+"px":g.style.bottom=l.bottom-u.bottom+"px",Pr.DragDrop.instance.addGlass(()=>h()),Pr.DragDrop.instance.setGlassCursorOverride("default"),a.appendChild(g);const h=()=>{i.hidePortal(),Pr.DragDrop.instance.hideGlass(),a.removeChild(g),g.removeEventListener("mousedown",f),s.removeEventListener("mousedown",d)},f=p=>{p.stopPropagation()},d=p=>{h()};g.addEventListener("mousedown",f),s.addEventListener("mousedown",d),i.showPortal(di.createElement(Up,{currentDocument:s,onSelect:t,onHide:h,items:e,classNameMapper:c,layout:i,iconFactory:r,titleFactory:o}),g)}Yn.showPopup=$p;const Up=n=>{const{items:e,onHide:t,onSelect:i,classNameMapper:r,layout:o,iconFactory:a,titleFactory:c}=n,s=(l,g)=>{i(l),t(),g.stopPropagation()},u=e.map((l,g)=>di.createElement("div",{key:l.index,className:r(go.CLASSES.FLEXLAYOUT__POPUP_MENU_ITEM),"data-layout-path":"/popup-menu/tb"+g,onClick:h=>s(l,h),title:l.node.getHelpText()},l.node.getModel().isLegacyOverflowMenu()?l.node._getNameForOverflowMenu():di.createElement(zp.TabButtonStamp,{node:l.node,layout:o,iconFactory:a,titleFactory:c})));return di.createElement("div",{className:r(go.CLASSES.FLEXLAYOUT__POPUP_MENU),"data-layout-path":"/popup-menu"},u)};var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.useTabOverflow=void 0;const Ue=E,jp=be,Pa=Et(),Mr=de,Hp=(n,e,t,i)=>{const r=Ue.useRef(!0),o=Ue.useRef(!1),a=Ue.useRef(new jp.Rect(0,0,0,0)),c=Ue.useRef(null),[s,u]=Ue.useState(0),l=Ue.useRef(!1),[g,h]=Ue.useState([]),f=Ue.useRef(0);Ue.useLayoutEffect(()=>{l.current=!1},[n.getSelectedNode(),n.getRect().width,n.getRect().height]),Ue.useLayoutEffect(()=>{_()}),Ue.useEffect(()=>{const y=c.current;return y.addEventListener("wheel",d,{passive:!1}),()=>{y.removeEventListener("wheel",d)}},[]);const d=y=>{y.preventDefault()},p=y=>e===Mr.Orientation.HORZ?y.x:y.y,m=y=>e===Mr.Orientation.HORZ?y.getRight():y.getBottom(),b=y=>e===Mr.Orientation.HORZ?y.width:y.height,_=()=>{r.current===!0&&(o.current=!1);const w=n instanceof Pa.TabSetNode?n.getRect():n.getTabHeaderRect();let x=n.getChildren()[n.getChildren().length-1];const C=i.current===null?0:b(i.current.getBoundingClientRect());if(r.current===!0||f.current===0&&g.length!==0||w.width!==a.current.width||w.height!==a.current.height){f.current=g.length,a.current=w;const R=n instanceof Pa.TabSetNode?n.isEnableTabStrip()===!0:!0;let D=m(w)-C;if(t.current!==null&&(D-=b(t.current.getBoundingClientRect())),R&&n.getChildren().length>0){if(g.length===0&&s===0&&m(x.getTabRect())+2<D)return;let S=0;const T=n.getSelectedNode();if(T&&!l.current){const F=T.getTabRect(),P=p(F)-2,z=m(F)+2;b(F)+2*2>=D-p(w)?S=p(w)-P:(z>D||P<p(w))&&(P<p(w)&&(S=p(w)-P),z+S>D&&(S=D-z))}const O=Math.max(0,D-(m(x.getTabRect())+2+S)),M=Math.min(0,s+S+O),L=M-s,B=[];for(let F=0;F<n.getChildren().length;F++){const P=n.getChildren()[F];(p(P.getTabRect())+L<p(w)||m(P.getTabRect())+L>D)&&B.push({node:P,index:F})}B.length>0&&(o.current=!0),r.current=!1,h(B),u(M)}}else r.current=!0};return{selfRef:c,position:s,userControlledLeft:l,hiddenTabs:g,onMouseWheel:y=>{let w=0;Math.abs(y.deltaX)>Math.abs(y.deltaY)?w=-y.deltaX:w=-y.deltaY,y.deltaMode===1&&(w*=40),u(s+w),l.current=!0,y.stopPropagation()},tabsTruncated:o.current}};Vn.useTabOverflow=Hp;Object.defineProperty(er,"__esModule",{value:!0});er.BorderTabSet=void 0;const Te=E,Ma=Ye,Wp=tr,Yp=Yn,ka=Fe,za=lt,Xp=Vn,Vp=de,pe=ue,Gp=xe,Kp=n=>{const{border:e,layout:t,iconFactory:i,titleFactory:r,icons:o,path:a}=n,c=Te.useRef(null),s=Te.useRef(null),u=Te.useRef(null),{selfRef:l,position:g,userControlledLeft:h,hiddenTabs:f,onMouseWheel:d}=(0,Xp.useTabOverflow)(e,Vp.Orientation.flip(e.getOrientation()),c,u),p=F=>{(0,Gp.isAuxMouseEvent)(F)&&t.auxMouseClick(e,F)},m=F=>{t.showContextMenu(e,F)},b=F=>{F.stopPropagation()},_=F=>{const P=t.getShowOverflowMenu();if(P!==void 0)P(e,F,f,v);else{const z=s.current;(0,Yp.showPopup)(z,f,v,t,i,r)}F.stopPropagation()},v=F=>{t.doAction(ka.Actions.selectTab(F.node.getId())),h.current=!1},y=F=>{const P=e.getChildren()[e.getSelected()];P!==void 0&&t.doAction(ka.Actions.floatTab(P.getId())),F.stopPropagation()},w=t.getClassName;let x=e.getTabHeaderRect().styleWithPosition({});const C=[],R=F=>{let P=e.getSelected()===F,z=e.getChildren()[F];C.push(Te.createElement(Wp.BorderButton,{layout:t,border:e.getLocation().getName(),node:z,path:a+"/tb"+F,key:z.getId(),selected:P,iconFactory:i,titleFactory:r,icons:o})),F<e.getChildren().length-1&&C.push(Te.createElement("div",{key:"divider"+F,className:w(pe.CLASSES.FLEXLAYOUT__BORDER_TAB_DIVIDER)}))};for(let F=0;F<e.getChildren().length;F++)R(F);let D=w(pe.CLASSES.FLEXLAYOUT__BORDER)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(D+=" "+e.getClassName());let S=[];const T={headerContent:void 0,buttons:S,stickyButtons:[],headerButtons:[]};t.customizeTabSet(e,T),S=T.buttons;let O;if(f.length>0){const F=t.i18nName(za.I18nLabel.Overflow_Menu_Tooltip);let P;typeof o.more=="function"?P=o.more(e,f):P=Te.createElement(Te.Fragment,null,o.more,Te.createElement("div",{className:w(pe.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},f.length)),S.push(Te.createElement("button",{key:"overflowbutton",ref:s,className:w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:F,onClick:_,onMouseDown:b,onTouchStart:b},P))}const M=e.getSelected();if(M!==-1){const F=e.getChildren()[M];if(F!==void 0&&t.isSupportsPopout()&&F.isEnableFloat()&&!F.isFloating()){const P=t.i18nName(za.I18nLabel.Float_Tab);S.push(Te.createElement("button",{key:"float",title:P,className:w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:y,onMouseDown:b,onTouchStart:b},typeof o.popout=="function"?o.popout(F):o.popout))}}O=Te.createElement("div",{key:"toolbar",ref:c,className:w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName())},S),x=t.styleFont(x);let L={};const B=e.getBorderBarSize()-1;return e.getLocation()===Ma.DockLocation.LEFT?L={right:B,height:B,top:g}:e.getLocation()===Ma.DockLocation.RIGHT?L={left:B,height:B,top:g}:L={height:B,left:g},Te.createElement("div",{ref:l,dir:"ltr",style:x,className:D,"data-layout-path":a,onClick:p,onAuxClick:p,onContextMenu:m,onWheel:d},Te.createElement("div",{style:{height:B},className:w(pe.CLASSES.FLEXLAYOUT__BORDER_INNER)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName())},Te.createElement("div",{style:L,className:w(pe.CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+w(pe.CLASSES.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName())},C)),O)};er.BorderTabSet=Kp;var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.Splitter=void 0;const un=E,$a=Pt,Ua=Fe,ja=st(),Je=de,fn=ue,Jp=n=>{const{layout:e,node:t,path:i}=n,r=un.useRef([]),o=un.useRef(void 0),a=t.getParent(),c=v=>{$a.DragDrop.instance.setGlassCursorOverride(t.getOrientation()===Je.Orientation.HORZ?"ns-resize":"ew-resize"),$a.DragDrop.instance.startDrag(v,u,l,h,s,void 0,void 0,e.getCurrentDocument(),e.getRootDiv()),r.current=a._getSplitterBounds(t,!0);const y=e.getRootDiv();o.current=e.getCurrentDocument().createElement("div"),o.current.style.position="absolute",o.current.className=e.getClassName(fn.CLASSES.FLEXLAYOUT__SPLITTER_DRAG),o.current.style.cursor=t.getOrientation()===Je.Orientation.HORZ?"ns-resize":"ew-resize";const w=t.getRect();t.getOrientation()===Je.Orientation.VERT&&w.width<2?w.width=2:t.getOrientation()===Je.Orientation.HORZ&&w.height<2&&(w.height=2),w.positionElement(o.current),y.appendChild(o.current)},s=v=>{e.getRootDiv().removeChild(o.current)},u=()=>!0,l=v=>{const y=e.getDomRect(),w={x:v.clientX-y.left,y:v.clientY-y.top};o&&(t.getOrientation()===Je.Orientation.HORZ?o.current.style.top=f(w.y-4)+"px":o.current.style.left=f(w.x-4)+"px"),e.isRealtimeResize()&&g()},g=()=>{let v=0;if(o&&(t.getOrientation()===Je.Orientation.HORZ?v=o.current.offsetTop:v=o.current.offsetLeft),a instanceof ja.BorderNode){const y=a._calculateSplit(t,v);e.doAction(Ua.Actions.adjustBorderSplit(t.getParent().getId(),y))}else{const y=a._calculateSplit(t,v);y!==void 0&&e.doAction(Ua.Actions.adjustSplit(y))}},h=()=>{g(),e.getRootDiv().removeChild(o.current)},f=v=>{const y=r.current;let w=v;return v<y[0]&&(w=y[0]),v>y[1]&&(w=y[1]),w},d=e.getClassName;let p=t.getRect();const m=p.styleWithPosition({cursor:t.getOrientation()===Je.Orientation.HORZ?"ns-resize":"ew-resize"});let b=d(fn.CLASSES.FLEXLAYOUT__SPLITTER)+" "+d(fn.CLASSES.FLEXLAYOUT__SPLITTER_+t.getOrientation().getName());a instanceof ja.BorderNode?b+=" "+d(fn.CLASSES.FLEXLAYOUT__SPLITTER_BORDER):t.getModel().getMaximizedTabset()!==void 0&&(m.display="none");const _=t.getModel().getSplitterExtra();if(_===0)return un.createElement("div",{style:m,"data-layout-path":i,className:b,onTouchStart:c,onMouseDown:c});{let v=p.clone();v.x=0,v.y=0,t.getOrientation()===Je.Orientation.VERT?v.width+=_:v.height+=_;const y=v.styleWithPosition({cursor:t.getOrientation()===Je.Orientation.HORZ?"ns-resize":"ew-resize"}),w=d(fn.CLASSES.FLEXLAYOUT__SPLITTER_EXTRA);return un.createElement("div",{style:m,"data-layout-path":i,className:b},un.createElement("div",{style:y,className:w,onTouchStart:c,onMouseDown:c}))}};ir.Splitter=Jp;var rr={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.ErrorBoundary=void 0;const kr=E,Ha=ue;class qp extends kr.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?kr.createElement("div",{className:Ha.CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER},kr.createElement("div",{className:Ha.CLASSES.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT},this.props.message)):this.props.children}}Gn.ErrorBoundary=qp;Object.defineProperty(rr,"__esModule",{value:!0});rr.Tab=void 0;const hn=E,Zp=E,Qp=Fe,Wa=Et(),zr=ue,em=Gn,tm=lt,nm=st(),Ya=xe,im=n=>{const{layout:e,selected:t,node:i,factory:r,path:o}=n,[a,c]=hn.useState(!n.node.isEnableRenderOnDemand()||n.selected);hn.useLayoutEffect(()=>{!a&&t&&c(!0)});const s=()=>{const p=i.getParent();p.getType()===Wa.TabSetNode.TYPE&&(p.isActive()||e.doAction(Qp.Actions.setActiveTabset(p.getId())))},u=e.getClassName,l=i.getModel().isUseVisibility(),g=i.getParent(),h=i._styleWithPosition();t||(0,Ya.hideElement)(h,l),g instanceof Wa.TabSetNode&&i.getModel().getMaximizedTabset()!==void 0&&!g.isMaximized()&&(0,Ya.hideElement)(h,l);let f;a&&(f=r(i));let d=u(zr.CLASSES.FLEXLAYOUT__TAB);return g instanceof nm.BorderNode&&(d+=" "+u(zr.CLASSES.FLEXLAYOUT__TAB_BORDER),d+=" "+u(zr.CLASSES.FLEXLAYOUT__TAB_BORDER_+g.getLocation().getName())),hn.createElement("div",{className:d,"data-layout-path":o,onMouseDown:s,onTouchStart:s,style:h},hn.createElement(em.ErrorBoundary,{message:n.layout.i18nName(tm.I18nLabel.Error_rendering_component)},hn.createElement(Zp.Fragment,null,f)))};rr.Tab=im;var or={},ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.TabButton=void 0;const ht=E,rm=lt,$r=Fe,om=be,Xa=nr,gn=ue,Ur=xe,am=n=>{const{layout:e,node:t,selected:i,iconFactory:r,titleFactory:o,icons:a,path:c}=n,s=ht.useRef(null),u=ht.useRef(null),l=L=>{!(0,Ur.isAuxMouseEvent)(L)&&!e.getEditingTab()&&e.dragStart(L,void 0,t,t.isEnableDrag(),f,d)},g=L=>{(0,Ur.isAuxMouseEvent)(L)&&e.auxMouseClick(t,L)},h=L=>{e.showContextMenu(t,L)},f=()=>{e.doAction($r.Actions.selectTab(t.getId()))},d=L=>{t.isEnableRename()&&p()},p=()=>{e.setEditingTab(t),e.getCurrentDocument().body.addEventListener("mousedown",m),e.getCurrentDocument().body.addEventListener("touchstart",m)},m=L=>{L.target!==u.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",m),e.getCurrentDocument().body.removeEventListener("touchstart",m),e.setEditingTab(void 0))},b=()=>{const L=t.getCloseType();return!!(i||L===Xa.ICloseType.Always||L===Xa.ICloseType.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},_=L=>{b()?e.doAction($r.Actions.deleteTab(t.getId())):f()},v=L=>{L.stopPropagation()};ht.useLayoutEffect(()=>{y(),e.getEditingTab()===t&&u.current.select()});const y=()=>{const L=e.getDomRect(),B=s.current.getBoundingClientRect();t._setTabRect(new om.Rect(B.left-L.left,B.top-L.top,B.width,B.height))},w=L=>{L.stopPropagation()},x=L=>{L.keyCode===27?e.setEditingTab(void 0):L.keyCode===13&&(e.setEditingTab(void 0),e.doAction($r.Actions.renameTab(t.getId(),L.target.value)))},C=e.getClassName,R=t.getParent();let D=gn.CLASSES.FLEXLAYOUT__TAB_BUTTON,S=C(D);S+=" "+C(D+"_"+R.getTabLocation()),i?S+=" "+C(D+"--selected"):S+=" "+C(D+"--unselected"),t.getClassName()!==void 0&&(S+=" "+t.getClassName());const T=(0,Ur.getRenderStateEx)(e,t,r,o);let O=T.content?ht.createElement("div",{className:C(gn.CLASSES.FLEXLAYOUT__TAB_BUTTON_CONTENT)},T.content):null;const M=T.leading?ht.createElement("div",{className:C(gn.CLASSES.FLEXLAYOUT__TAB_BUTTON_LEADING)},T.leading):null;if(e.getEditingTab()===t&&(O=ht.createElement("input",{ref:u,className:C(gn.CLASSES.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":c+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:x,onMouseDown:w,onTouchStart:w})),t.isEnableClose()){const L=e.i18nName(rm.I18nLabel.Close_Tab);T.buttons.push(ht.createElement("div",{key:"close","data-layout-path":c+"/button/close",title:L,className:C(gn.CLASSES.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:v,onClick:_,onTouchStart:v},typeof a.close=="function"?a.close(t):a.close))}return ht.createElement("div",{ref:s,"data-layout-path":c,className:S,onMouseDown:l,onClick:g,onAuxClick:g,onContextMenu:h,onTouchStart:l,title:t.getHelpText()},M,O,T.buttons)};ar.TabButton=am;Object.defineProperty(or,"__esModule",{value:!0});or.TabSet=void 0;const ne=E,Xt=lt,ri=Fe,sm=Yn,lm=ar,cm=Vn,dm=de,ie=ue,jr=xe,um=n=>{const{node:e,layout:t,iconFactory:i,titleFactory:r,icons:o,path:a}=n,c=ne.useRef(null),s=ne.useRef(null),u=ne.useRef(null),l=ne.useRef(null),{selfRef:g,position:h,userControlledLeft:f,hiddenTabs:d,onMouseWheel:p,tabsTruncated:m}=(0,cm.useTabOverflow)(e,dm.Orientation.HORZ,c,l),b=U=>{const Z=t.getShowOverflowMenu();if(Z!==void 0)Z(e,U,d,_);else{const se=s.current;(0,sm.showPopup)(se,d,_,t,i,r)}U.stopPropagation()},_=U=>{t.doAction(ri.Actions.selectTab(U.node.getId())),f.current=!1},v=U=>{if(!(0,jr.isAuxMouseEvent)(U)){let Z=e.getName();if(Z===void 0?Z="":Z=": "+Z,t.doAction(ri.Actions.setActiveTabset(e.getId())),!t.getEditingTab()){const se=t.i18nName(Xt.I18nLabel.Move_Tabset,Z);e.getModel().getMaximizedTabset()!==void 0?t.dragStart(U,se,e,!1,Ae=>{},S):t.dragStart(U,se,e,e.isEnableDrag(),Ae=>{},S)}}},y=U=>{(0,jr.isAuxMouseEvent)(U)&&t.auxMouseClick(e,U)},w=U=>{t.showContextMenu(e,U)},x=U=>{U.stopPropagation()},C=U=>{e.canMaximize()&&t.maximize(e),U.stopPropagation()},R=U=>{t.doAction(ri.Actions.deleteTabset(e.getId())),U.stopPropagation()},D=U=>{O!==void 0&&t.doAction(ri.Actions.floatTab(O.getId())),U.stopPropagation()},S=U=>{e.canMaximize()&&t.maximize(e)},T=t.getClassName;u.current!==null&&u.current.scrollLeft!==0&&(u.current.scrollLeft=0);const O=e.getSelectedNode();let M=e._styleWithPosition();e.getModel().getMaximizedTabset()!==void 0&&!e.isMaximized()&&(0,jr.hideElement)(M,e.getModel().isUseVisibility());const L=[];if(e.isEnableTabStrip())for(let U=0;U<e.getChildren().length;U++){const Z=e.getChildren()[U];let se=e.getSelected()===U;L.push(ne.createElement(lm.TabButton,{layout:t,node:Z,path:a+"/tb"+U,key:Z.getId(),selected:se,iconFactory:i,titleFactory:r,icons:o})),U<e.getChildren().length-1&&L.push(ne.createElement("div",{key:"divider"+U,className:T(ie.CLASSES.FLEXLAYOUT__TABSET_TAB_DIVIDER)}))}const B=e.getName()!==void 0;let F=[],P=[],z=[];const I={headerContent:e.getName(),stickyButtons:F,buttons:P,headerButtons:z};t.customizeTabSet(e,I);const N=I.headerContent;F=I.stickyButtons,P=I.buttons,z=I.headerButtons,F.length>0&&(m?P=[...F,...P]:L.push(ne.createElement("div",{ref:l,key:"sticky_buttons_container",onMouseDown:x,onTouchStart:x,onDragStart:U=>{U.preventDefault()},className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},F)));let $;if(d.length>0){const U=t.i18nName(Xt.I18nLabel.Overflow_Menu_Tooltip);let Z;typeof o.more=="function"?Z=o.more(e,d):Z=ne.createElement(ne.Fragment,null,o.more,ne.createElement("div",{className:T(ie.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},d.length)),P.push(ne.createElement("button",{key:"overflowbutton","data-layout-path":a+"/button/overflow",ref:s,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+T(ie.CLASSES.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:U,onClick:b,onMouseDown:x,onTouchStart:x},Z))}if(O!==void 0&&t.isSupportsPopout()&&O.isEnableFloat()&&!O.isFloating()){const U=t.i18nName(Xt.I18nLabel.Float_Tab);P.push(ne.createElement("button",{key:"float","data-layout-path":a+"/button/float",title:U,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:D,onMouseDown:x,onTouchStart:x},typeof o.popout=="function"?o.popout(O):o.popout))}if(e.canMaximize()){const U=t.i18nName(Xt.I18nLabel.Restore),Z=t.i18nName(Xt.I18nLabel.Maximize);(B?z:P).push(ne.createElement("button",{key:"max","data-layout-path":a+"/button/max",title:e.isMaximized()?U:Z,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:C,onMouseDown:x,onTouchStart:x},e.isMaximized()?typeof o.restore=="function"?o.restore(e):o.restore:typeof o.maximize=="function"?o.maximize(e):o.maximize))}if(!e.isMaximized()&&e.isEnableClose()){const U=t.i18nName(Xt.I18nLabel.Close_Tabset);(B?z:P).push(ne.createElement("button",{key:"close","data-layout-path":a+"/button/close",title:U,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:R,onMouseDown:x,onTouchStart:x},typeof o.closeTabset=="function"?o.closeTabset(e):o.closeTabset))}$=ne.createElement("div",{key:"toolbar",ref:c,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:x,onTouchStart:x,onDragStart:U=>{U.preventDefault()}},P);let H,j,V=T(ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(V+=" "+e.getClassNameTabStrip()),V+=" "+ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&!B&&(V+=" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&!B&&(V+=" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_MAXIMIZED)),B){const U=ne.createElement("div",{key:"toolbar",ref:c,className:T(ie.CLASSES.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:x,onTouchStart:x,onDragStart:se=>{se.preventDefault()}},z);let Z=T(ie.CLASSES.FLEXLAYOUT__TABSET_HEADER);e.isActive()&&(Z+=" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Z+=" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_MAXIMIZED)),e.getClassNameHeader()!==void 0&&(Z+=" "+e.getClassNameHeader()),H=ne.createElement("div",{className:Z,style:{height:e.getHeaderHeight()+"px"},"data-layout-path":a+"/header",onMouseDown:v,onContextMenu:w,onClick:y,onAuxClick:y,onTouchStart:v},ne.createElement("div",{className:T(ie.CLASSES.FLEXLAYOUT__TABSET_HEADER_CONTENT)},N),U)}const G={height:e.getTabStripHeight()+"px"};j=ne.createElement("div",{className:V,style:G,"data-layout-path":a+"/tabstrip",onMouseDown:v,onContextMenu:w,onClick:y,onAuxClick:y,onTouchStart:v},ne.createElement("div",{ref:u,className:T(ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation())},ne.createElement("div",{style:{left:h},className:T(ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+T(ie.CLASSES.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation())},L)),$),M=t.styleFont(M);var k=void 0;if(e.getChildren().length===0){const U=t.getTabSetPlaceHolderCallback();U&&(k=U(e))}const Y=ne.createElement("div",{className:T(ie.CLASSES.FLEXLAYOUT__TABSET_CONTENT)},k);var q;return e.getTabLocation()==="top"?q=ne.createElement(ne.Fragment,null,H,j,Y):q=ne.createElement(ne.Fragment,null,H,Y,j),ne.createElement("div",{ref:g,dir:"ltr","data-layout-path":a,style:M,className:T(ie.CLASSES.FLEXLAYOUT__TABSET),onWheel:p},q)};or.TabSet=um;var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.FloatingWindow=void 0;const oi=E,fm=mo,hm=ue,gm=n=>{const{title:e,id:t,url:i,rect:r,onCloseWindow:o,onSetWindow:a,children:c}=n,s=oi.useRef(null),u=oi.useRef(null),[l,g]=oi.useState(void 0);return oi.useLayoutEffect(()=>{u.current&&clearTimeout(u.current);let h=!0;const f=r,d=Array.from(window.document.styleSheets).reduce((p,m)=>{let b;try{b=m.cssRules}catch{}try{return[...p,{href:m.href,type:m.type,rules:b?Array.from(b).map(_=>_.cssText):null}]}catch{return p}},[]);return s.current=window.open(i,t,`left=${f.x},top=${f.y},width=${f.width},height=${f.height}`),s.current!==null?(a(t,s.current),window.addEventListener("beforeunload",()=>{s.current&&(s.current.close(),s.current=null)}),s.current.addEventListener("load",()=>{if(h){const p=s.current.document;p.title=e;const m=p.createElement("div");m.className=hm.CLASSES.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,p.body.appendChild(m),pm(p,d).then(()=>{g(m)}),s.current.addEventListener("beforeunload",()=>{o(t)})}})):(console.warn(`Unable to open window ${i}`),o(t)),()=>{h=!1,u.current=setTimeout(()=>{s.current&&(s.current.close(),s.current=null)},0)}},[]),l!==void 0?(0,fm.createPortal)(c,l):null};sr.FloatingWindow=gm;function pm(n,e){const t=n.head,i=[];for(const r of e)if(r.href){const o=n.createElement("link");o.type=r.type,o.rel="stylesheet",o.href=r.href,t.appendChild(o),i.push(new Promise((a,c)=>{o.onload=()=>a(!0)}))}else if(r.rules){const o=n.createElement("style");for(const a of r.rules)o.appendChild(n.createTextNode(a));t.appendChild(o)}return Promise.all(i)}var lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.FloatingWindowTab=void 0;const Hr=E,mm=Gn,vm=lt,_m=E,bm=ue,ym=n=>{const{layout:e,node:t,factory:i}=n,r=e.getClassName,o=i(t);return Hr.createElement("div",{className:r(bm.CLASSES.FLEXLAYOUT__FLOATING_WINDOW_TAB)},Hr.createElement(mm.ErrorBoundary,{message:n.layout.i18nName(vm.I18nLabel.Error_rendering_component)},Hr.createElement(_m.Fragment,null,o)))};lr.FloatingWindowTab=ym;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.TabFloating=void 0;const gt=E,Va=Fe,Ga=Et(),Wr=ue,Yr=lt,Ka=xe,Tm=n=>{const{layout:e,selected:t,node:i,path:r}=n,o=()=>{i.getWindow()&&i.getWindow().focus()},a=()=>{e.doAction(Va.Actions.unFloatTab(i.getId()))},c=()=>{const b=i.getParent();b.getType()===Ga.TabSetNode.TYPE&&(b.isActive()||e.doAction(Va.Actions.setActiveTabset(b.getId())))},s=b=>{b.preventDefault(),o()},u=b=>{b.preventDefault(),a()},l=e.getClassName,g=i.getParent(),h=i._styleWithPosition();t||(0,Ka.hideElement)(h,i.getModel().isUseVisibility()),g instanceof Ga.TabSetNode&&i.getModel().getMaximizedTabset()!==void 0&&!g.isMaximized()&&(0,Ka.hideElement)(h,i.getModel().isUseVisibility());const f=e.i18nName(Yr.I18nLabel.Floating_Window_Message),d=e.i18nName(Yr.I18nLabel.Floating_Window_Show_Window),p=e.i18nName(Yr.I18nLabel.Floating_Window_Dock_Window),m=e.getOnRenderFloatingTabPlaceholder();return m?gt.createElement("div",{className:l(Wr.CLASSES.FLEXLAYOUT__TAB_FLOATING),onMouseDown:c,onTouchStart:c,style:h},m(a,o)):gt.createElement("div",{className:l(Wr.CLASSES.FLEXLAYOUT__TAB_FLOATING),"data-layout-path":r,onMouseDown:c,onTouchStart:c,style:h},gt.createElement("div",{className:l(Wr.CLASSES.FLEXLAYOUT__TAB_FLOATING_INNER)},gt.createElement("div",null,f),gt.createElement("div",null,gt.createElement("a",{href:"#",onClick:s},d)),gt.createElement("div",null,gt.createElement("a",{href:"#",onClick:u},p))))};cr.TabFloating=Tm;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.RestoreIcon=ze.PopoutIcon=ze.OverflowIcon=ze.MaximizeIcon=ze.CloseIcon=void 0;const ve=E,Kn={width:"1em",height:"1em",display:"flex",alignItems:"center"},wm=()=>ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kn,viewBox:"0 0 24 24"},ve.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),ve.createElement("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));ze.CloseIcon=wm;const Em=()=>ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kn,viewBox:"0 0 24 24",fill:"var(--color-icon)"},ve.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ve.createElement("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}));ze.MaximizeIcon=Em;const Sm=()=>ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kn,viewBox:"0 0 24 24",fill:"var(--color-icon)"},ve.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ve.createElement("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"}));ze.OverflowIcon=Sm;const xm=()=>ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kn,viewBox:"0 0 20 20",fill:"var(--color-icon)"},ve.createElement("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),ve.createElement("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"}));ze.PopoutIcon=xm;const Am=()=>ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Kn,viewBox:"0 0 24 24",fill:"var(--color-icon)"},ve.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ve.createElement("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"}));ze.RestoreIcon=Am;Object.defineProperty(qi,"__esModule",{value:!0});qi.Layout=void 0;const K=E,Lm=mo,je=Ye,pt=Pt,Vt=Fe,Dm=st(),Ja=kt,mt=wt,qa=Et(),ai=be,Xe=ue,Om=er,Za=ir,Qa=rr,Rm=or,es=sr,ts=lr,ns=cr,Xr=de,Gt=ze,Cm=Xn,Im={close:K.createElement(Gt.CloseIcon,null),closeTabset:K.createElement(Gt.CloseIcon,null),popout:K.createElement(Gt.PopoutIcon,null),maximize:K.createElement(Gt.MaximizeIcon,null),restore:K.createElement(Gt.RestoreIcon,null),more:K.createElement(Gt.OverflowIcon,null)},Nm=typeof window<"u"&&(window.document.documentMode||/Edge\//.test(window.navigator.userAgent)),Bm=typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches,Fm=Bm&&!Nm;class Pm extends K.Component{constructor(e){super(e),this.firstMove=!1,this.dragRectRendered=!0,this.dragDivText=void 0,this.edgeRectLength=100,this.edgeRectWidth=10,this.onModelChange=t=>{this.forceUpdate(),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)},this.updateRect=(t=this.getDomRect())=>{const i=new ai.Rect(0,0,t.width,t.height);!i.equals(this.state.rect)&&i.width!==0&&i.height!==0&&this.setState({rect:i})},this.updateLayoutMetrics=()=>{if(this.findHeaderBarSizeRef.current){const t=this.findHeaderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedHeaderBarSize&&this.setState({calculatedHeaderBarSize:t})}if(this.findTabBarSizeRef.current){const t=this.findTabBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedTabBarSize&&this.setState({calculatedTabBarSize:t})}if(this.findBorderBarSizeRef.current){const t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}},this.getClassName=t=>this.props.classNameMapper===void 0?t:this.props.classNameMapper(t),this.onCloseWindow=t=>{this.doAction(Vt.Actions.unFloatTab(t));try{this.props.model.getNodeById(t)._setWindow(void 0)}catch{}},this.onSetWindow=(t,i)=>{this.props.model.getNodeById(t)._setWindow(i)},this.onCancelAdd=()=>{var t,i;this.selfRef.current.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(i=(t=this.customDrop)===null||t===void 0?void 0:t.invalidated)===null||i===void 0||i.call(t)}catch(o){console.error(o)}pt.DragDrop.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0},this.onCancelDrag=t=>{var i,r;if(t){const o=this.selfRef.current;try{o.removeChild(this.outlineDiv)}catch{}try{o.removeChild(this.dragDiv)}catch{}this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(r=(i=this.customDrop)===null||i===void 0?void 0:i.invalidated)===null||r===void 0||r.call(i)}catch(a){console.error(a)}pt.DragDrop.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0}this.setState({showHiddenBorder:je.DockLocation.CENTER})},this.onDragDivMouseDown=t=>{t.preventDefault(),this.dragStart(t,this.dragDivText,mt.TabNode._fromJson(this.newTabJson,this.props.model,!1),!0,void 0,void 0)},this.dragStart=(t,i,r,o,a,c)=>{o?(this.dragNode=r,this.dragDivText=i,pt.DragDrop.instance.startDrag(t,this.onDragStart,this.onDragMove,this.onDragEnd,this.onCancelDrag,a,c,this.currentDocument,this.selfRef.current)):pt.DragDrop.instance.startDrag(t,void 0,void 0,void 0,void 0,a,c,this.currentDocument,this.selfRef.current)},this.dragRectRender=(t,i,r,o)=>{let a;if(t!==void 0?a=K.createElement("div",{style:{whiteSpace:"pre"}},t.replace("<br>",`
`)):i&&i instanceof mt.TabNode&&(a=K.createElement(Cm.TabButtonStamp,{node:i,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory})),this.props.onRenderDragRect!==void 0){const c=this.props.onRenderDragRect(a,i,r);c!==void 0&&(a=c)}this.dragDiv.style.visibility="hidden",this.dragRectRendered=!1,this.showPortal(K.createElement(Mm,{onRendered:()=>{this.dragRectRendered=!0,o?.()}},a),this.dragDiv)},this.showPortal=(t,i)=>{const r=(0,Lm.createPortal)(t,i);this.setState({portal:r})},this.hidePortal=()=>{this.setState({portal:void 0})},this.onDragStart=()=>{this.dropInfo=void 0,this.customDrop=void 0;const t=this.selfRef.current;return this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(Xe.CLASSES.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden",t.appendChild(this.outlineDiv),this.dragDiv==null&&(this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(Xe.CLASSES.FLEXLAYOUT__DRAG_RECT),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragRectRender(this.dragDivText,this.dragNode,this.newTabJson),t.appendChild(this.dragDiv)),this.props.model.getMaximizedTabset()===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.dragNode!==void 0&&this.dragNode instanceof mt.TabNode&&this.dragNode.getTabRect()!==void 0&&this.dragNode.getTabRect().positionElement(this.outlineDiv),this.firstMove=!0,!0},this.onDragMove=t=>{if(this.firstMove===!1){const s=this.props.model._getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${s}s, left ${s}s, width ${s}s, height ${s}s`}this.firstMove=!1;const i=this.selfRef.current.getBoundingClientRect(),r={x:t.clientX-i.left,y:t.clientY-i.top};this.checkForBorderToShow(r.x,r.y);const o=this.dragDiv.getBoundingClientRect();let a=r.x-o.width/2;a+o.width>i.width&&(a=i.width-o.width),a=Math.max(0,a),this.dragDiv.style.left=a+"px",this.dragDiv.style.top=r.y+5+"px",this.dragRectRendered&&this.dragDiv.style.visibility==="hidden"&&(this.dragDiv.style.visibility="visible");let c=this.props.model._findDropTargetNode(this.dragNode,r.x,r.y);c&&(this.props.onTabDrag?this.handleCustomTabDrag(c,r,t):(this.dropInfo=c,this.outlineDiv.className=this.getClassName(c.className),c.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))},this.onDragEnd=t=>{const i=this.selfRef.current;if(i.removeChild(this.outlineDiv),i.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),pt.DragDrop.instance.hideGlass(),this.dropInfo)if(this.customDrop){this.newTabJson=void 0;try{const{callback:r,dragging:o,over:a,x:c,y:s,location:u}=this.customDrop;r(o,a,c,s,u),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0)}catch(r){console.error(r)}}else if(this.newTabJson!==void 0){const r=this.doAction(Vt.Actions.addNode(this.newTabJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(r,t),this.fnNewNodeDropped=void 0),this.newTabJson=void 0}else this.dragNode!==void 0&&this.doAction(Vt.Actions.moveNode(this.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.setState({showHiddenBorder:je.DockLocation.CENTER})},this.props.model._setChangeListener(this.onModelChange),this.tabIds=[],this.selfRef=K.createRef(),this.findHeaderBarSizeRef=K.createRef(),this.findTabBarSizeRef=K.createRef(),this.findBorderBarSizeRef=K.createRef(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Fm,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons=Object.assign(Object.assign({},Im),e.icons),this.state={rect:new ai.Rect(0,0,0,0),calculatedHeaderBarSize:25,calculatedTabBarSize:26,calculatedBorderBarSize:30,editingTab:void 0,showHiddenBorder:je.DockLocation.CENTER,showEdges:!1},this.onDragEnter=this.onDragEnter.bind(this)}styleFont(e){return this.props.font&&(this.selfRef.current&&(this.props.font.size&&this.selfRef.current.style.setProperty("--font-size",this.props.font.size),this.props.font.family&&this.selfRef.current.style.setProperty("--font-family",this.props.font.family)),this.props.font.style&&(e.fontStyle=this.props.font.style),this.props.font.weight&&(e.fontWeight=this.props.font.weight)),e}doAction(e){if(this.props.onAction!==void 0){const t=this.props.onAction(e);return t!==void 0?this.props.model.doAction(t):void 0}else return this.props.model.doAction(e)}componentDidMount(){this.updateRect(),this.updateLayoutMetrics(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.resizeObserver=new ResizeObserver(e=>{this.updateRect(e[0].contentRect)}),this.resizeObserver.observe(this.selfRef.current)}componentDidUpdate(){this.updateLayoutMetrics(),this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel._setChangeListener(void 0),this.props.model._setChangeListener(this.onModelChange),this.previousModel=this.props.model)}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current.getBoundingClientRect()}getRootDiv(){return this.selfRef.current}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){var e;return(e=this.props.realtimeResize)!==null&&e!==void 0?e:!1}onTabDrag(...e){var t,i;return(i=(t=this.props).onTabDrag)===null||i===void 0?void 0:i.call(t,...e)}getPopoutURL(){return this.popoutURL}componentWillUnmount(){var e;(e=this.resizeObserver)===null||e===void 0||e.unobserve(this.selfRef.current)}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}render(){if(!this.selfRef.current)return K.createElement("div",{ref:this.selfRef,className:this.getClassName(Xe.CLASSES.FLEXLAYOUT__LAYOUT)},this.metricsElements());this.props.model._setPointerFine(window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches);const e=[],t=[],i=[],r={},o=[],a={headerBarSize:this.state.calculatedHeaderBarSize,tabBarSize:this.state.calculatedTabBarSize,borderBarSize:this.state.calculatedBorderBarSize};this.props.model._setShowHiddenBorder(this.state.showHiddenBorder),this.centerRect=this.props.model._layout(this.state.rect,a),this.renderBorder(this.props.model.getBorderSet(),e,r,i,o),this.renderChildren("",this.props.model.getRoot(),t,r,i,o);const c=[],s={};for(const l of this.tabIds)r[l]&&(c.push(l),s[l]=l);this.tabIds=c;for(const l of Object.keys(r))s[l]||this.tabIds.push(l);const u=[];if(this.state.showEdges){const l=this.centerRect,g=this.edgeRectLength,h=this.edgeRectWidth,f=this.edgeRectLength/2,d=this.getClassName(Xe.CLASSES.FLEXLAYOUT__EDGE_RECT),p=50;u.push(K.createElement("div",{key:"North",style:{top:l.y,left:l.x+l.width/2-f,width:g,height:h,borderBottomLeftRadius:p,borderBottomRightRadius:p},className:d})),u.push(K.createElement("div",{key:"West",style:{top:l.y+l.height/2-f,left:l.x,width:h,height:g,borderTopRightRadius:p,borderBottomRightRadius:p},className:d})),u.push(K.createElement("div",{key:"South",style:{top:l.y+l.height-h,left:l.x+l.width/2-f,width:g,height:h,borderTopLeftRadius:p,borderTopRightRadius:p},className:d})),u.push(K.createElement("div",{key:"East",style:{top:l.y+l.height/2-f,left:l.x+l.width-h,width:h,height:g,borderTopLeftRadius:p,borderBottomLeftRadius:p},className:d}))}return K.createElement("div",{ref:this.selfRef,className:this.getClassName(Xe.CLASSES.FLEXLAYOUT__LAYOUT),onDragEnter:this.props.onExternalDrag?this.onDragEnter:void 0},t,this.tabIds.map(l=>r[l]),e,o,u,i,this.metricsElements(),this.state.portal)}metricsElements(){const e=this.styleFont({visibility:"hidden"});return K.createElement(K.Fragment,null,K.createElement("div",{key:"findHeaderBarSize",ref:this.findHeaderBarSizeRef,style:e,className:this.getClassName(Xe.CLASSES.FLEXLAYOUT__TABSET_HEADER_SIZER)},"FindHeaderBarSize"),K.createElement("div",{key:"findTabBarSize",ref:this.findTabBarSizeRef,style:e,className:this.getClassName(Xe.CLASSES.FLEXLAYOUT__TABSET_SIZER)},"FindTabBarSize"),K.createElement("div",{key:"findBorderBarSize",ref:this.findBorderBarSizeRef,style:e,className:this.getClassName(Xe.CLASSES.FLEXLAYOUT__BORDER_SIZER)},"FindBorderBarSize"))}renderBorder(e,t,i,r,o){for(const a of e.getBorders()){const c=`/border/${a.getLocation().getName()}`;if(a.isShowing()){t.push(K.createElement(Om.BorderTabSet,{key:`border_${a.getLocation().getName()}`,path:c,border:a,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons}));const s=a._getDrawChildren();let u=0,l=0;for(const g of s){if(g instanceof Ja.SplitterNode){let h=c+"/s";o.push(K.createElement(Za.Splitter,{key:g.getId(),layout:this,node:g,path:h}))}else if(g instanceof mt.TabNode){let h=c+"/t"+l++;if(this.supportsPopout&&g.isFloating()){const f=this._getScreenRect(g),d=g._getAttr("borderWidth"),p=g._getAttr("borderHeight");d!==-1&&a.getLocation().getOrientation()===Xr.Orientation.HORZ?f.width=d:p!==-1&&a.getLocation().getOrientation()===Xr.Orientation.VERT&&(f.height=p),r.push(K.createElement(es.FloatingWindow,{key:g.getId(),url:this.popoutURL,rect:f,title:g.getName(),id:g.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},K.createElement(ts.FloatingWindowTab,{layout:this,node:g,factory:this.props.factory}))),i[g.getId()]=K.createElement(ns.TabFloating,{key:g.getId(),layout:this,path:h,node:g,selected:u===a.getSelected()})}else i[g.getId()]=K.createElement(Qa.Tab,{key:g.getId(),layout:this,path:h,node:g,selected:u===a.getSelected(),factory:this.props.factory})}u++}}}}renderChildren(e,t,i,r,o,a){const c=t._getDrawChildren();let s=0,u=0,l=0;for(const g of c)if(g instanceof Ja.SplitterNode){const h=e+"/s"+s++;a.push(K.createElement(Za.Splitter,{key:g.getId(),layout:this,path:h,node:g}))}else if(g instanceof qa.TabSetNode){const h=e+"/ts"+l++;i.push(K.createElement(Rm.TabSet,{key:g.getId(),layout:this,path:h,node:g,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons})),this.renderChildren(h,g,i,r,o,a)}else if(g instanceof mt.TabNode){const h=e+"/t"+u++,f=g.getParent().getChildren()[g.getParent().getSelected()];if(f===void 0&&console.warn("undefined selectedTab should not happen"),this.supportsPopout&&g.isFloating()){const d=this._getScreenRect(g);o.push(K.createElement(es.FloatingWindow,{key:g.getId(),url:this.popoutURL,rect:d,title:g.getName(),id:g.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},K.createElement(ts.FloatingWindowTab,{layout:this,node:g,factory:this.props.factory}))),r[g.getId()]=K.createElement(ns.TabFloating,{key:g.getId(),layout:this,path:h,node:g,selected:g===f})}else r[g.getId()]=K.createElement(Qa.Tab,{key:g.getId(),layout:this,path:h,node:g,selected:g===f,factory:this.props.factory})}else{const h=e+(g.getOrientation()===Xr.Orientation.HORZ?"/r":"/c")+l++;this.renderChildren(h,g,i,r,o,a)}}_getScreenRect(e){const t=e.getRect().clone(),i=this.selfRef.current.getBoundingClientRect(),r=Math.min(80,this.currentWindow.outerHeight-this.currentWindow.innerHeight),o=Math.min(80,this.currentWindow.outerWidth-this.currentWindow.innerWidth);return t.x=t.x+i.x+this.currentWindow.screenX+o,t.y=t.y+i.y+this.currentWindow.screenY+r,t}addTabToTabSet(e,t){this.props.model.getNodeById(e)!==void 0&&this.doAction(Vt.Actions.addNode(t,e,je.DockLocation.CENTER,-1))}addTabToActiveTabSet(e){const t=this.props.model.getActiveTabset();t!==void 0&&this.doAction(Vt.Actions.addNode(e,t.getId(),je.DockLocation.CENTER,-1))}addTabWithDragAndDrop(e,t,i){this.fnNewNodeDropped=i,this.newTabJson=t,this.dragStart(void 0,e,mt.TabNode._fromJson(t,this.props.model,!1),!0,void 0,void 0)}moveTabWithDragAndDrop(e,t){this.dragStart(void 0,t,e,!0,void 0,void 0)}addTabWithDragAndDropIndirect(e,t,i){this.fnNewNodeDropped=i,this.newTabJson=t,pt.DragDrop.instance.addGlass(this.onCancelAdd),this.dragDivText=e,this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(Xe.CLASSES.FLEXLAYOUT__DRAG_RECT),this.dragDiv.addEventListener("mousedown",this.onDragDivMouseDown),this.dragDiv.addEventListener("touchstart",this.onDragDivMouseDown,{passive:!1}),this.dragRectRender(this.dragDivText,void 0,this.newTabJson,()=>{if(this.dragDiv){this.dragDiv.style.visibility="visible";const o=this.dragDiv.getBoundingClientRect(),a=new ai.Rect(0,0,o?.width,o?.height);a.centerInRect(this.state.rect),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragDiv.style.left=a.x+"px",this.dragDiv.style.top=a.y+"px"}}),this.selfRef.current.appendChild(this.dragDiv)}handleCustomTabDrag(e,t,i){var r,o,a;let c=(r=this.customDrop)===null||r===void 0?void 0:r.invalidated;const s=(o=this.customDrop)===null||o===void 0?void 0:o.callback;this.customDrop=void 0;const u=this.newTabJson||(this.dragNode instanceof mt.TabNode?this.dragNode:void 0);if(u&&(e.node instanceof qa.TabSetNode||e.node instanceof Dm.BorderNode)&&e.index===-1){const l=e.node.getSelectedNode(),g=l?.getRect();if(l&&g?.contains(t.x,t.y)){let h;try{const f=this.onTabDrag(u,l,t.x-g.x,t.y-g.y,e.location,()=>this.onDragMove(i));f&&(h={rect:new ai.Rect(f.x+g.x,f.y+g.y,f.width,f.height),callback:f.callback,invalidated:f.invalidated,dragging:u,over:l,x:t.x-g.x,y:t.y-g.y,location:e.location,cursor:f.cursor})}catch(f){console.error(f)}h?.callback===s&&(c=void 0),this.customDrop=h}}this.dropInfo=e,this.outlineDiv.className=this.getClassName(this.customDrop?Xe.CLASSES.FLEXLAYOUT__OUTLINE_RECT:e.className),this.customDrop?this.customDrop.rect.positionElement(this.outlineDiv):e.rect.positionElement(this.outlineDiv),pt.DragDrop.instance.setGlassCursorOverride((a=this.customDrop)===null||a===void 0?void 0:a.cursor),this.outlineDiv.style.visibility="visible";try{c?.()}catch(l){console.error(l)}}onDragEnter(e){if(pt.DragDrop.instance.isDragging())return;const t=this.props.onExternalDrag(e);t&&(this.fnNewNodeDropped=t.onDrop,this.newTabJson=t.json,this.dragStart(e,t.dragText,mt.TabNode._fromJson(t.json,this.props.model,!1),!0,void 0,void 0))}checkForBorderToShow(e,t){const i=this.props.model._getOuterInnerRects().outer,r=i.getCenter(),o=this.edgeRectWidth,a=this.edgeRectLength/2;let c=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===je.DockLocation.CENTER&&(t>r.y-a&&t<r.y+a||e>r.x-a&&e<r.x+a)&&(c=!0);let s=je.DockLocation.CENTER;c||(e<=i.x+o?s=je.DockLocation.LEFT:e>=i.getRight()-o?s=je.DockLocation.RIGHT:t<=i.y+o?s=je.DockLocation.TOP:t>=i.getBottom()-o&&(s=je.DockLocation.BOTTOM)),s!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:s})}maximize(e){this.doAction(Vt.Actions.maximizeToggle(e.getId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let i;return this.props.i18nMapper&&(i=this.props.i18nMapper(e,t)),i===void 0&&(i=e+(t===void 0?"":t)),i}getOnRenderFloatingTabPlaceholder(){return this.props.onRenderFloatingTabPlaceholder}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}}qi.Layout=Pm;const Mm=n=>(K.useEffect(()=>{var e;(e=n.onRendered)===null||e===void 0||e.call(n)},[n]),K.createElement(K.Fragment,null,n.children));var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.BorderSet=void 0;const Vr=de,km=st();class Po{static _fromJson(e,t){const i=new Po(t);return i._borders=e.map(r=>km.BorderNode._fromJson(r,t)),i}constructor(e){this._model=e,this._borders=[]}getBorders(){return this._borders}_forEachNode(e){for(const t of this._borders){e(t,0);for(const i of t.getChildren())i._forEachNode(e,1)}}_toJson(){return this._borders.map(e=>e.toJson())}_layoutBorder(e,t){const i=e.outer,r=this._model.getRoot();let o=Math.max(0,i.height-r.getMinHeight()),a=Math.max(0,i.width-r.getMinWidth()),c=0,s=0,u=0,l=0;const g=this._borders.filter(d=>d.isShowing());for(const d of g){d._setAdjustedSize(d.getSize());const p=d.getSelected()!==-1;d.getLocation().getOrientation()===Vr.Orientation.HORZ?(s+=d.getBorderBarSize(),p&&(a-=this._model.getSplitterSize(),s+=d.getSize(),l+=d.getSize())):(c+=d.getBorderBarSize(),p&&(o-=this._model.getSplitterSize(),c+=d.getSize(),u+=d.getSize()))}let h=0,f=!1;for(;s>a&&l>0||c>o&&u>0;){const d=g[h];if(d.getSelected()!==-1){const p=d._getAdjustedSize();s>a&&l>0&&d.getLocation().getOrientation()===Vr.Orientation.HORZ&&p>0&&p>d.getMinSize()?(d._setAdjustedSize(p-1),s--,l--,f=!0):c>o&&u>0&&d.getLocation().getOrientation()===Vr.Orientation.VERT&&p>0&&p>d.getMinSize()&&(d._setAdjustedSize(p-1),c--,u--,f=!0)}if(h=(h+1)%g.length,h===0)if(f)f=!1;else break}for(const d of g)e.outer=d._layoutBorderOuter(e.outer,t);e.inner=e.outer;for(const d of g)e.inner=d._layoutBorderInner(e.inner,t);return e}_findDropTargetNode(e,t,i){for(const r of this._borders)if(r.isShowing()){const o=r.canDrop(e,t,i);if(o!==void 0)return o}}}Jn.BorderSet=Po;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});var kl={};Object.defineProperty(kl,"__esModule",{value:!0});var zl={};Object.defineProperty(zl,"__esModule",{value:!0});var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.Model=void 0;const J=rt,zm=ot,Gr=Ye,is=de,rs=be,we=Fe,pn=st(),os=Jn,Kt=Bo(),vt=wt,Ve=Et(),Kr=Fo();class Ce{static fromJson(e){const t=new Ce;return Ce._attributeDefinitions.fromJson(e.global,t._attributes),e.borders&&(t._borders=os.BorderSet._fromJson(e.borders,t)),t._root=Kt.RowNode._fromJson(e.layout,t),t._tidy(),t}static _createAttributeDefinitions(){const e=new zm.AttributeDefinitions;return e.add("legacyOverflowMenu",!1).setType(J.Attribute.BOOLEAN),e.add("splitterSize",-1).setType(J.Attribute.NUMBER),e.add("splitterExtra",0).setType(J.Attribute.NUMBER),e.add("enableEdgeDock",!0).setType(J.Attribute.BOOLEAN),e.add("rootOrientationVertical",!1).setType(J.Attribute.BOOLEAN),e.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("enableUseVisibility",!1).setType(J.Attribute.BOOLEAN),e.add("tabEnableClose",!0).setType(J.Attribute.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnableFloat",!1).setType(J.Attribute.BOOLEAN),e.add("tabEnableDrag",!0).setType(J.Attribute.BOOLEAN),e.add("tabEnableRename",!0).setType(J.Attribute.BOOLEAN),e.add("tabClassName",void 0).setType(J.Attribute.STRING),e.add("tabIcon",void 0).setType(J.Attribute.STRING),e.add("tabEnableRenderOnDemand",!0).setType(J.Attribute.BOOLEAN),e.add("tabDragSpeed",.3).setType(J.Attribute.NUMBER),e.add("tabBorderWidth",-1).setType(J.Attribute.NUMBER),e.add("tabBorderHeight",-1).setType(J.Attribute.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetEnableClose",!1).setType(J.Attribute.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(J.Attribute.STRING),e.add("tabSetClassNameHeader",void 0).setType(J.Attribute.STRING),e.add("tabSetEnableTabStrip",!0).setType(J.Attribute.BOOLEAN),e.add("tabSetHeaderHeight",0).setType(J.Attribute.NUMBER),e.add("tabSetTabStripHeight",0).setType(J.Attribute.NUMBER),e.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabSetMinWidth",0).setType(J.Attribute.NUMBER),e.add("tabSetMinHeight",0).setType(J.Attribute.NUMBER),e.add("borderSize",200).setType(J.Attribute.NUMBER),e.add("borderMinSize",0).setType(J.Attribute.NUMBER),e.add("borderBarSize",0).setType(J.Attribute.NUMBER),e.add("borderEnableDrop",!0).setType(J.Attribute.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(J.Attribute.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(J.Attribute.BOOLEAN),e.add("borderClassName",void 0).setType(J.Attribute.STRING),e.add("borderEnableAutoHide",!1).setType(J.Attribute.BOOLEAN),e}constructor(){this._borderRects={inner:rs.Rect.empty(),outer:rs.Rect.empty()},this._attributes={},this._idMap={},this._borders=new os.BorderSet(this),this._pointerFine=!0,this._showHiddenBorder=Gr.DockLocation.CENTER}_setChangeListener(e){this._changeListener=e}getActiveTabset(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet}_getShowHiddenBorder(){return this._showHiddenBorder}_setShowHiddenBorder(e){this._showHiddenBorder=e}_setActiveTabset(e){this._activeTabSet=e}getMaximizedTabset(){return this._maximizedTabSet}_setMaximizedTabset(e){this._maximizedTabSet=e}getRoot(){return this._root}isRootOrientationVertical(){return this._attributes.rootOrientationVertical}isUseVisibility(){return this._attributes.enableUseVisibility}getBorderSet(){return this._borders}_getOuterInnerRects(){return this._borderRects}_getPointerFine(){return this._pointerFine}_setPointerFine(e){this._pointerFine=e}visitNodes(e){this._borders._forEachNode(e),this._root._forEachNode(e,0)}getNodeById(e){return this._idMap[e]}doAction(e){let t;switch(e.type){case we.Actions.ADD_NODE:{const i=new vt.TabNode(this,e.data.json,!0),r=this._idMap[e.data.toNode];(r instanceof Ve.TabSetNode||r instanceof pn.BorderNode||r instanceof Kt.RowNode)&&(r.drop(i,Gr.DockLocation.getByName(e.data.location),e.data.index,e.data.select),t=i);break}case we.Actions.MOVE_NODE:{const i=this._idMap[e.data.fromNode];if(i instanceof vt.TabNode||i instanceof Ve.TabSetNode){const r=this._idMap[e.data.toNode];(r instanceof Ve.TabSetNode||r instanceof pn.BorderNode||r instanceof Kt.RowNode)&&r.drop(i,Gr.DockLocation.getByName(e.data.location),e.data.index,e.data.select)}break}case we.Actions.DELETE_TAB:{const i=this._idMap[e.data.node];i instanceof vt.TabNode&&i._delete();break}case we.Actions.DELETE_TABSET:{const i=this._idMap[e.data.node];if(i instanceof Ve.TabSetNode){const r=[...i.getChildren()];for(let o=0;o<r.length;o++){const a=r[o];a.isEnableClose()&&a._delete()}i.getChildren().length===0&&i._delete(),this._tidy()}break}case we.Actions.FLOAT_TAB:{const i=this._idMap[e.data.node];i instanceof vt.TabNode&&(i._setFloating(!0),(0,Kr.adjustSelectedIndexAfterFloat)(i));break}case we.Actions.UNFLOAT_TAB:{const i=this._idMap[e.data.node];i instanceof vt.TabNode&&(i._setFloating(!1),(0,Kr.adjustSelectedIndexAfterDock)(i));break}case we.Actions.RENAME_TAB:{const i=this._idMap[e.data.node];i instanceof vt.TabNode&&i._setName(e.data.text);break}case we.Actions.SELECT_TAB:{const i=this._idMap[e.data.tabNode];if(i instanceof vt.TabNode){const r=i.getParent(),o=r.getChildren().indexOf(i);r instanceof pn.BorderNode?r.getSelected()===o?r._setSelected(-1):r._setSelected(o):r instanceof Ve.TabSetNode&&(r.getSelected()!==o&&r._setSelected(o),this._activeTabSet=r)}break}case we.Actions.SET_ACTIVE_TABSET:{const i=this._idMap[e.data.tabsetNode];i instanceof Ve.TabSetNode&&(this._activeTabSet=i);break}case we.Actions.ADJUST_SPLIT:{const i=this._idMap[e.data.node1],r=this._idMap[e.data.node2];(i instanceof Ve.TabSetNode||i instanceof Kt.RowNode)&&(r instanceof Ve.TabSetNode||r instanceof Kt.RowNode)&&(this._adjustSplitSide(i,e.data.weight1,e.data.pixelWidth1),this._adjustSplitSide(r,e.data.weight2,e.data.pixelWidth2));break}case we.Actions.ADJUST_BORDER_SPLIT:{const i=this._idMap[e.data.node];i instanceof pn.BorderNode&&i._setSize(e.data.pos);break}case we.Actions.MAXIMIZE_TOGGLE:{const i=this._idMap[e.data.node];i instanceof Ve.TabSetNode&&(i===this._maximizedTabSet?this._maximizedTabSet=void 0:(this._maximizedTabSet=i,this._activeTabSet=i));break}case we.Actions.UPDATE_MODEL_ATTRIBUTES:{this._updateAttrs(e.data.json);break}case we.Actions.UPDATE_NODE_ATTRIBUTES:{this._idMap[e.data.node]._updateAttrs(e.data.json);break}}return this._updateIdMap(),this._changeListener!==void 0&&this._changeListener(e),t}_updateIdMap(){this._idMap={},this.visitNodes(e=>this._idMap[e.getId()]=e)}_adjustSplitSide(e,t,i){e._setWeight(t),e.getWidth()!=null&&e.getOrientation()===is.Orientation.VERT?e._updateAttrs({width:i}):e.getHeight()!=null&&e.getOrientation()===is.Orientation.HORZ&&e._updateAttrs({height:i})}toJson(){const e={};return Ce._attributeDefinitions.toJson(e,this._attributes),this.visitNodes(t=>{t._fireEvent("save",void 0)}),{global:e,borders:this._borders._toJson(),layout:this._root.toJson()}}getSplitterSize(){let e=this._attributes.splitterSize;return e===-1&&(e=this._pointerFine?8:12),e}isLegacyOverflowMenu(){return this._attributes.legacyOverflowMenu}getSplitterExtra(){return this._attributes.splitterExtra}isEnableEdgeDock(){return this._attributes.enableEdgeDock}_addNode(e){const t=e.getId();if(this._idMap[t]!==void 0)throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);e.getType()!=="splitter"&&(this._idMap[t]=e)}_layout(e,t){var i;return this._borderRects=this._borders._layoutBorder({outer:e,inner:e},t),e=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets")),(i=this._root)===null||i===void 0||i.calcMinSize(),this._root._layout(e,t),e}_findDropTargetNode(e,t,i){let r=this._root._findDropTargetNode(e,t,i);return r===void 0&&(r=this._borders._findDropTargetNode(e,t,i)),r}_tidy(){this._root._tidy()}_updateAttrs(e){Ce._attributeDefinitions.update(e,this._attributes)}_nextUniqueId(){return"#"+(0,Kr.randomUUID)()}_getAttribute(e){return this._attributes[e]}setOnAllowDrop(e){this._onAllowDrop=e}_getOnAllowDrop(){return this._onAllowDrop}setOnCreateTabSet(e){this._onCreateTabSet=e}_getOnCreateTabSet(){return this._onCreateTabSet}static toTypescriptInterfaces(){console.log(Ce._attributeDefinitions.toTypescriptInterface("Global",void 0)),console.log(Kt.RowNode.getAttributeDefinitions().toTypescriptInterface("Row",Ce._attributeDefinitions)),console.log(Ve.TabSetNode.getAttributeDefinitions().toTypescriptInterface("TabSet",Ce._attributeDefinitions)),console.log(vt.TabNode.getAttributeDefinitions().toTypescriptInterface("Tab",Ce._attributeDefinitions)),console.log(pn.BorderNode.getAttributeDefinitions().toTypescriptInterface("Border",Ce._attributeDefinitions))}toString(){return JSON.stringify(this.toJson())}}dr.Model=Ce;Ce._attributeDefinitions=Ce._createAttributeDefinitions();(function(n){var e=qn&&qn.__createBinding||(Object.create?function(i,r,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(r,o);(!c||("get"in c?!r.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(i,a,c)}:function(i,r,o,a){a===void 0&&(a=o),i[a]=r[o]}),t=qn&&qn.__exportStar||function(i,r){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&e(r,i,o)};Object.defineProperty(n,"__esModule",{value:!0}),t(qi,n),t(Wn,n),t(Fe,n),t(st(),n),t(Jn,n),t(nr,n),t(Ml,n),t(kl,n),t(zl,n),t(dr,n),t(at,n),t(Bo(),n),t(kt,n),t(wt,n),t(Et(),n),t(Ye,n),t(Pt,n),t(Mt,n),t(lt,n),t(de,n),t(be,n),t(ue,n)})(Ot);function zt(){const[n,e]=le(yu),[t]=le(Tu),{updateCurrentFile:i}=en();E.useEffect(()=>{const h=mu();e(h)},[]);const r=E.useCallback((h,f=[])=>(h.type==="tab"?f.push(h):h.children?.forEach(d=>{r(d,f)}),f),[]),o=E.useCallback(h=>{const f=h.layout.children;let d=f[0];for(const p of f)if(p.active){d=p;break}return d},[]),a=E.useCallback(h=>{const f=h.layout.children;let d=f[0].children[0];for(const p of f)if(p.active){d=p.children[p.selected||0];break}return d},[]),c=E.useCallback((h,f)=>{if(!h||!f)return;const d=f.toJson();if(r(d.layout).findIndex(b=>b.id===h.id)<0){s(h,f);const b=f.toJson();e(b),pr(JSON.stringify(b))}else f.doAction(Ot.Actions.selectTab(h.id))},[]),s=E.useCallback((h,f)=>{if(!f)return;const d={id:h.id,name:h.name,type:"tab",config:h},p=f.toJson(),m=o(p);f.doAction(Ot.Actions.addNode(d,m.id||"",Ot.DockLocation.CENTER,0,!0))},[]),u=E.useCallback(()=>{if(!t)return;const h=t.toJson(),d=(h&&r(h.layout))?.find(p=>p.config.type==="welcome");d?.id?t.doAction(Ot.Actions.selectTab(d.id)):s(Ss.config,t)},[t]),l=E.useCallback(async(h,f)=>{if(!f)return;f.doAction(Ot.Actions.deleteTab(h));const d=f.toJson();e(d),pr(JSON.stringify(d));const p=a(d),m=p?.id?await Ne.getFile(p.id):void 0;i(m)},[]),g=E.useCallback((h,f,d)=>{if(!d)return;d.doAction(Ot.Actions.renameTab(h,f));const p=d.toJson();e(p),pr(JSON.stringify(p))},[]);return{tabJsonModel:n,model:t,addTab:s,switchToWelcomePage:u,updateTabJsonModelWhenCurrentFileChanged:c,setTabJsonModel:e,deleteTab:l,renameTabName:g,getTabList:r}}function ur(){const{getFileTree:n}=Tt(),{updateCurrentFile:e}=en(),{addOpenKeys:t}=No(),{updateTabJsonModelWhenCurrentFileChanged:i}=zt();return{addFile:E.useCallback(async(o,a,c,s,u)=>{if(!c)return;const l=await Ne.addFile(o,a,s,u);return s&&t([s]),In(l.id),n(),Pl(),e(l),i(l,c),l},[])}}function $l(){const{updateCurrentFile:n}=en(),{getFileTree:e}=Tt();return{addFolder:E.useCallback(async(i,r)=>{const o=await Ne.addFolder(i,r);In(o.id),n(void 0),Pl(),e()},[])}}const $m=({className:n})=>A.jsx("svg",{className:n,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",stroke:"currentColor",fill:"currentColor",children:A.jsx("path",{d:"M306.005333 117.632L444.330667 256h135.296l138.368-138.325333a42.666667 42.666667 0 0 1 60.373333 60.373333L700.330667 256H789.333333A149.333333 149.333333 0 0 1 938.666667 405.333333v341.333334a149.333333 149.333333 0 0 1-149.333334 149.333333h-554.666666A149.333333 149.333333 0 0 1 85.333333 746.666667v-341.333334A149.333333 149.333333 0 0 1 234.666667 256h88.96L245.632 177.962667a42.666667 42.666667 0 0 1 60.373333-60.373334zM789.333333 341.333333h-554.666666a64 64 0 0 0-63.701334 57.856L170.666667 405.333333v341.333334a64 64 0 0 0 57.856 63.701333L234.666667 810.666667h554.666666a64 64 0 0 0 63.701334-57.856L853.333333 746.666667v-341.333334A64 64 0 0 0 789.333333 341.333333zM341.333333 469.333333a42.666667 42.666667 0 0 1 42.666667 42.666667v85.333333a42.666667 42.666667 0 0 1-85.333333 0v-85.333333a42.666667 42.666667 0 0 1 42.666666-42.666667z m341.333334 0a42.666667 42.666667 0 0 1 42.666666 42.666667v85.333333a42.666667 42.666667 0 0 1-85.333333 0v-85.333333a42.666667 42.666667 0 0 1 42.666667-42.666667z"})}),Um=({className:n})=>A.jsx("svg",{className:n,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"200",height:"200",children:A.jsx("path",{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"})}),Mo=({className:n})=>A.jsxs("svg",{className:`w-4 h-4 font-black ${n}`,stroke:"currentColor",fill:"currentColor",width:"32",height:"32",viewBox:"-4 0 40 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[A.jsxs("g",{clipPath:"url(#clip0_1094_102908)",children:[A.jsx("path",{strokeWidth:5,d:"M0.501953 4.4032C0.501953 2.4611 2.01005 0.886719 3.87037 0.886719H29.1335C30.9939 0.886719 32.502 2.4611 32.502 4.4032V29.3702C32.502 31.3123 30.9939 32.8867 29.1335 32.8867H3.87037C2.01005 32.8867 0.501953 31.3123 0.501953 29.3702V4.4032Z",fill:"transparent"}),A.jsx("path",{strokeWidth:1,d:"M19.1433 10.0387C19.1433 10.8121 18.879 11.4683 18.3503 12.0073C17.8217 12.5463 17.1781 12.8158 16.4196 12.8158C15.6381 12.8158 14.983 12.5463 14.4544 12.0073C13.9258 11.4683 13.6614 10.8121 13.6614 10.0387C13.6614 9.2654 13.9258 8.60922 14.4544 8.07022C14.983 7.53122 15.6381 7.26172 16.4196 7.26172C17.1781 7.26172 17.8217 7.53122 18.3503 8.07022C18.879 8.60922 19.1433 9.2654 19.1433 10.0387ZM13.627 19.771C13.627 18.9977 13.8913 18.3415 14.4199 17.8025C14.9716 17.2401 15.6381 16.9588 16.4196 16.9588C17.1551 16.9588 17.7987 17.2401 18.3503 17.8025C18.9019 18.3415 19.2237 18.9508 19.3157 19.6304C19.4995 20.8959 19.2697 22.1496 18.6261 23.3917C18.0055 24.6337 17.1091 25.5828 15.9369 26.239C15.2933 26.614 14.7647 26.6023 14.351 26.2039C13.9602 25.8289 14.0752 25.3836 14.6957 24.8681C15.0405 24.6103 15.3278 24.2822 15.5577 23.8838C15.7875 23.4854 15.9369 23.0753 16.0059 22.6535C16.0289 22.466 15.9484 22.3723 15.7645 22.3723C15.3048 22.3488 14.8336 22.0911 14.351 21.5989C13.8683 21.1068 13.627 20.4975 13.627 19.771Z",fill:"currentColor"})]}),A.jsx("defs",{children:A.jsx("clipPath",{id:"clip0_1094_102908",children:A.jsx("rect",{width:"32",height:"32",fill:"transparent",transform:"translate(0.501953 0.886719)"})})})]});let Jr;function jm(n){const{t:e}=We(),{deleteFile:t,deleteFolder:i}=n,{addFile:r}=ur(),{addFolder:o}=$l(),[a,c]=E.useState(!1),s=E.useCallback((l,g,h,f,d,p)=>{if(!(f&&d))return;const m=yt?[{key:"open_directory",label:e("operation.openDirectory"),icon:A.jsx(Hh,{className:"w-4"}),onClick:({domEvent:_})=>{_.stopPropagation(),window.api.showItemInFolder(l.id,d)}}]:[],b=[{key:"rename",label:e("operation.rename"),icon:A.jsx(jh,{className:"w-4"}),onClick:({domEvent:_})=>{_.stopPropagation(),g.startRenamingItem(),In(l.id)}},...m,{key:"delete",label:e("operation.delete"),icon:A.jsx(Jh,{className:"w-4"}),onClick:({domEvent:_})=>{_.stopPropagation(),Jr=p.map(v=>d[v].data),c(!0)}}];return h?[{key:"addexcalidraw",label:e("operation.addBoard"),icon:A.jsx(Lo,{className:"w-4"}),onClick:async({domEvent:_})=>{_.stopPropagation(),_.preventDefault(),r("New Board","board",f,l.id)}},{key:"addtldraw",label:e("operation.addTldraw"),icon:A.jsx(Mo,{className:"w-4"}),onClick:async({domEvent:_})=>{_.stopPropagation(),_.preventDefault(),r("New Tldraw","tldraw",f,l.id)}},{key:"addnote",label:e("operation.addNote"),icon:A.jsx(Ao,{className:"w-4"}),onClick:async({domEvent:_})=>{_.stopPropagation(),_.preventDefault(),r("New Note","note",f,l.id)}},{key:"addfolder",label:e("operation.addFolder"),icon:A.jsx(fl,{className:"w-4"}),onClick:async({domEvent:_})=>{_.stopPropagation(),o("New Folder",l.id)}},...b]:[...b,{key:"copy_revezone_link",label:e("operation.copyRevezoneLink"),icon:A.jsx($h,{className:"w-4"}),onClick:({domEvent:_})=>{_.stopPropagation(),navigator.clipboard.writeText(`revezone://${l.id}`)}}]},[]);return{isModalOpen:a,getFileTreeContextMenu:s,getDeleteFileModal:l=>A.jsx(vo,{title:`${e("confirm.confirmDelete")} ${Jr?.map(g=>g.name).join(",")} ?`,open:a,onOk:async()=>{for await(const g of Jr)g.name.startsWith("folder_")?l&&await i(g,l):l&&await t(g,l);c(!1)},onCancel:()=>c(!1)})}}function Ul(){const{currentFile:n,updateCurrentFile:e}=en(),{deleteTab:t}=zt(),{getFileTree:i}=Tt();return{deleteFile:E.useCallback(async(o,a)=>{switch(await Ne.deleteFile(o.id),await t(o.id,a),o.id===n?.id&&e(void 0),o.type){case"board":await Io.deleteBoard(o.id);break;case"tldraw":await Fl.deleteTldraw(o.id);break;case"note":await Co.deletePage(o.id);break}await i()},[Ne,n])}}function Hm(){const{deleteFile:n}=Ul(),{getFileTree:e}=Tt(),t=E.useCallback((r,o,a=[])=>{const c=o[r]?.children||[];return a=[...a,...c],c.forEach(s=>{if(o[s]?.children){const u=t(s,o,a);a=[...a,...u]}}),Array.from(new Set(a))},[]);return{deleteFolder:E.useCallback(async(r,o)=>{const a=await Ne.getFileTree();if(!a)return;const c=t(r.id,a,[]);for await(const s of c)if(s.startsWith("file_")){const u=a[s].data;await n(u,o)}else s.startsWith("folder_")&&await Ne.deleteFolder(s);await Ne.deleteFolder(r.id),await e()},[Ne])}}function Wm(){const[n,e]=le(yo),[t,i]=le(Ms),{fileTree:r,getFileTree:o}=Tt(),{openKeys:a,addOpenKeys:c,removeOpenKey:s}=No(),{updateTabJsonModelWhenCurrentFileChanged:u,renameTabName:l,model:g}=zt(),{updateCurrentFile:h}=en(),{deleteFile:f}=Ul(),{deleteFolder:d}=Hm();E.useEffect(()=>{o()},[]);const{getFileTreeContextMenu:p,getDeleteFileModal:m}=jm({deleteFile:f,deleteFolder:d}),b=E.useCallback(S=>{c([S.data.id])},[a]),_=E.useCallback(S=>{s(S.data.id)},[a]),v=E.useCallback(async S=>{if(S.length===1&&S[0].startsWith("file_")){const T=r[S[0]].data;await h(T),u(T,g)}else e(S);oe("select_menu",{key:S.join(","),name:S.map(T=>r[T]?.data.name).join(",")})},[r,g]),y=E.useCallback(S=>{i(S.data.id)},[]),w=E.useCallback(async(S,T)=>{In(""),await Ne.updateFileOrFolderName(S.data,T),S.isFolder||await l(S.data.id,T,g),o()},[g]),x=E.useCallback((S,T)=>(Object.keys(T).forEach(O=>{T[O].children=T[O].children?.filter(M=>!S.includes(String(M)))}),T),[]),C=E.useCallback(async(S,T,O)=>{const M=JSON.parse(JSON.stringify(O)),L=S.map(P=>P.data.id).filter(P=>!!P);O=x(L,O);const B=O[T.parentItem].children||[],F=[...B.slice(0,T.childIndex),...L,...B.slice(T.childIndex)];O[T.parentItem].children=F,await Ne.updateFileTree(O),window.api?.dragAndDrop(S,T.parentItem,M),o()},[]),R=E.useCallback(async(S,T,O)=>{const M=JSON.parse(JSON.stringify(O)),L=S.map(P=>P.data.id).filter(P=>!!P);O=x(L,O);const B=O[T.targetItem].children||[],F=[...L,...B];O[T.targetItem].children=F,await Ne.updateFileTree(O),window.api?.dragAndDrop(S,T.targetItem,M),o()},[]),D=E.useCallback(async(S,T)=>{switch(T.targetType){case"between-items":C(S,T,r);break;case"item":R(S,T,r);break}},[r]);return A.jsxs("div",{className:"revezone-menu-container w-[calc(100%-2rem)]",children:[A.jsx("div",{className:"menu-list border-slate-100 px-1 pt-2",children:A.jsx(wg,{items:r,getItemTitle:S=>`${S.data.name}`,viewState:{["revezone-file-tree"]:{selectedItems:n,expandedItems:a,focusedItem:t}},canDragAndDrop:!0,canDropOnFolder:!0,canReorderItems:!0,canRename:!0,canSearch:!0,onSelectItems:v,onExpandItem:b,onCollapseItem:_,onFocusItem:y,onDrop:D,onRenameItem:w,renderTreeContainer:({children:S,containerProps:T})=>A.jsx("div",{...T,children:S}),renderItemsContainer:({children:S,containerProps:T})=>A.jsx("ul",{...T,children:S}),renderItem:({item:S,depth:T,children:O,title:M,context:L,arrow:B})=>{const F=L.isRenaming?"div":"button",P=L.isRenaming?void 0:"button";return A.jsxs("li",{...L.itemContainerWithChildrenProps,className:"rct-tree-item-li",children:[A.jsxs("div",{...L.itemContainerWithoutChildrenProps,style:{paddingLeft:`${(T+1)*.5}rem`},className:["rct-tree-item-title-container",S.isFolder&&"rct-tree-item-title-container-isFolder",L.isSelected&&"rct-tree-item-title-container-selected",L.isExpanded&&"rct-tree-item-title-container-expanded",L.isFocused&&"rct-tree-item-title-container-focused",L.isDraggingOver&&"rct-tree-item-title-container-dragging-over",L.isSearchMatching&&"rct-tree-item-title-container-search-match"].join(" "),children:[B,A.jsxs(F,{type:P,...L.interactiveElementProps,className:"rct-tree-item-button flex justify-between items-center",children:[A.jsx(On,{trigger:["contextMenu"],menu:{items:p(S.data,L,!!S.isFolder,g,r,n)},children:A.jsxs("div",{className:`flex items-center flex-1 menu-tree-item-child w-11/12 ${S.data.id}`,onDoubleClick:z=>{z.stopPropagation(),In(S.data.id),L.startRenamingItem()},onBlur:z=>{if(z.stopPropagation(),Bs()){const I=z.target;w(S,I.value)}},children:[A.jsxs("div",{className:"flex items-center",children:[S.isFolder?A.jsx(Wh,{className:"w-4 h-4"}):null,S.data.type==="note"?A.jsx(Ao,{className:"w-4 h-4"}):null,S.data.type==="board"?A.jsx(Lo,{className:"w-4 h-4"}):null,S.data.type==="tldraw"?A.jsx(Mo,{className:"w-3 h-3"}):null]}),A.jsx("div",{className:"ml-2 truncate pr-2 text-sm",children:M})]})}),A.jsx(On,{trigger:["click"],menu:{items:p(S.data,L,!!S.isFolder,g,r)},onClick:z=>z.stopPropagation(),children:A.jsx("div",{className:"w-8 h-6 flex items-center justify-center",onClick:z=>z.stopPropagation(),children:A.jsx(gl,{className:"w-3 h-3 cursor-pointer text-gray-500"})})})]})]}),O]})},children:A.jsx(jg,{treeId:"revezone-file-tree",rootItem:"root",treeLabel:"FileTree"})})}),m(g)]})}let po={};function qr(n={}){po={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...n}}function W(n){return n?po[n]:po}function si(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e}function jl(n){const e='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return n.flatMap(t=>{const i=t.matches(e),r=Array.from(t.querySelectorAll(e));return[...i?[t]:[],...r]}).filter(t=>getComputedStyle(t).pointerEvents!=="none"&&Vm(t))}function Hl(n){if(!n||Xm(n))return;const e=W("smoothScroll");n.scrollIntoView({behavior:!e||Ym(n)?"auto":"smooth",inline:"center",block:"center"})}function Ym(n){if(!n||!n.parentElement)return;const e=n.parentElement;return e.scrollHeight>e.clientHeight}function Xm(n){const e=n.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Vm(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)}let Ai={};function ce(n,e){Ai[n]=e}function X(n){return n?Ai[n]:Ai}function as(){Ai={}}let Li={};function li(n,e){Li[n]=e}function Nt(n){var e;(e=Li[n])==null||e.call(Li)}function Gm(){Li={}}function Km(n,e,t,i){let r=X("__activeStagePosition");const o=r||t.getBoundingClientRect(),a=i.getBoundingClientRect(),c=si(n,o.x,a.x-o.x,e),s=si(n,o.y,a.y-o.y,e),u=si(n,o.width,a.width-o.width,e),l=si(n,o.height,a.height-o.height,e);r={x:c,y:s,width:u,height:l},Yl(r),ce("__activeStagePosition",r)}function Wl(n){if(!n)return;const e=n.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height};ce("__activeStagePosition",t),Yl(t)}function Jm(){const n=X("__activeStagePosition"),e=X("__overlaySvg");if(!n)return;if(!e){console.warn("No stage svg found.");return}const t=window.innerWidth,i=window.innerHeight;e.setAttribute("viewBox",`0 0 ${t} ${i}`)}function qm(n){const e=Zm(n);document.body.appendChild(e),Gl(e,t=>{t.target.tagName==="path"&&Nt("overlayClick")}),ce("__overlaySvg",e)}function Yl(n){const e=X("__overlaySvg");if(!e){qm(n);return}const t=e.firstElementChild;if(t?.tagName!=="path")throw new Error("no path element found in stage svg");t.setAttribute("d",Xl(n))}function Zm(n){const e=window.innerWidth,t=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",Xl(n)),r.style.fill=W("overlayColor")||"rgb(0,0,0)",r.style.opacity=`${W("overlayOpacity")}`,r.style.pointerEvents="auto",r.style.cursor="auto",i.appendChild(r),i}function Xl(n){const e=window.innerWidth,t=window.innerHeight,i=W("stagePadding")||0,r=W("stageRadius")||0,o=n.width+i*2,a=n.height+i*2,c=Math.min(r,o/2,a/2),s=Math.floor(Math.max(c,0)),u=n.x-i+s,l=n.y-i,g=o-s*2,h=a-s*2;return`M${e},0L0,0L0,${t}L${e},${t}L${e},0Z
    M${u},${l} h${g} a${s},${s} 0 0 1 ${s},${s} v${h} a${s},${s} 0 0 1 -${s},${s} h-${g} a${s},${s} 0 0 1 -${s},-${s} v-${h} a${s},${s} 0 0 1 ${s},-${s} z`}function Qm(){const n=X("__overlaySvg");n&&n.remove()}function ev(){const n=document.getElementById("driver-dummy-element");if(n)return n;let e=document.createElement("div");return e.id="driver-dummy-element",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.opacity="0",e.style.position="fixed",e.style.top="50%",e.style.left="50%",document.body.appendChild(e),e}function ss(n){const{element:e}=n;let t=typeof e=="string"?document.querySelector(e):e;t||(t=ev()),nv(t,n)}function tv(){const n=X("__activeElement"),e=X("__activeStep");n&&(Wl(n),Jm(),Jl(n,e))}function nv(n,e){const t=Date.now(),i=X("__activeStep"),r=X("__activeElement")||n,o=!r||r===n,a=n.id==="driver-dummy-element",c=r.id==="driver-dummy-element",s=W("animate"),u=e.onHighlightStarted||W("onHighlightStarted"),l=e?.onHighlighted||W("onHighlighted"),g=i?.onDeselected||W("onDeselected"),h=W(),f=X();!o&&g&&g(c?void 0:r,i,{config:h,state:f}),u&&u(a?void 0:n,e,{config:h,state:f});const d=!o&&s;let p=!1;sv(),ce("previousStep",i),ce("previousElement",r),ce("activeStep",e),ce("activeElement",n);const m=()=>{if(X("__transitionCallback")!==m)return;const b=Date.now()-t,_=400-b<=400/2;e.popover&&_&&!p&&d&&(ls(n,e),p=!0),W("animate")&&b<400?Km(b,400,r,n):(Wl(n),l&&l(a?void 0:n,e,{config:W(),state:X()}),ce("__transitionCallback",void 0),ce("__previousStep",i),ce("__previousElement",r),ce("__activeStep",e),ce("__activeElement",n)),window.requestAnimationFrame(m)};ce("__transitionCallback",m),window.requestAnimationFrame(m),Hl(n),!d&&e.popover&&ls(n,e),r.classList.remove("driver-active-element","driver-no-interaction"),r.removeAttribute("aria-haspopup"),r.removeAttribute("aria-expanded"),r.removeAttribute("aria-controls"),W("disableActiveInteraction")&&n.classList.add("driver-no-interaction"),n.classList.add("driver-active-element"),n.setAttribute("aria-haspopup","dialog"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls","driver-popover-content")}function iv(){var n;(n=document.getElementById("driver-dummy-element"))==null||n.remove(),document.querySelectorAll(".driver-active-element").forEach(e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")})}function Bn(){const n=X("__resizeTimeout");n&&window.cancelAnimationFrame(n),ce("__resizeTimeout",window.requestAnimationFrame(tv))}function rv(n){var e;if(!X("isInitialized")||!(n.key==="Tab"||n.keyCode===9))return;const t=X("__activeElement"),i=(e=X("popover"))==null?void 0:e.wrapper,r=jl([...i?[i]:[],...t?[t]:[]]),o=r[0],a=r[r.length-1];if(n.preventDefault(),n.shiftKey){const c=r[r.indexOf(document.activeElement)-1]||a;c?.focus()}else{const c=r[r.indexOf(document.activeElement)+1]||o;c?.focus()}}function Vl(n){(W("allowKeyboardControl")??!0)&&(n.key==="Escape"?Nt("escapePress"):n.key==="ArrowRight"?Nt("arrowRightPress"):n.key==="ArrowLeft"&&Nt("arrowLeftPress"))}function Gl(n,e,t){const i=(r,o)=>{const a=r.target;n.contains(a)&&((!t||t(a))&&(r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation()),o?.(r))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",r=>{i(r,e)},!0)}function ov(){window.addEventListener("keyup",Vl,!1),window.addEventListener("keydown",rv,!1),window.addEventListener("resize",Bn),window.addEventListener("scroll",Bn)}function av(){window.removeEventListener("keyup",Vl),window.removeEventListener("resize",Bn),window.removeEventListener("scroll",Bn)}function sv(){const n=X("popover");n&&(n.wrapper.style.display="none")}function ls(n,e){var t,i;let r=X("popover");r&&document.body.removeChild(r.wrapper),r=cv(),document.body.appendChild(r.wrapper);const{title:o,description:a,showButtons:c,disableButtons:s,showProgress:u,nextBtnText:l=W("nextBtnText")||"Next &rarr;",prevBtnText:g=W("prevBtnText")||"&larr; Previous",progressText:h=W("progressText")||"{current} of {total}"}=e.popover||{};r.nextButton.innerHTML=l,r.previousButton.innerHTML=g,r.progress.innerHTML=h,o?(r.title.innerText=o,r.title.style.display="block"):r.title.style.display="none",a?(r.description.innerHTML=a,r.description.style.display="block"):r.description.style.display="none";const f=c||W("showButtons"),d=u||W("showProgress")||!1,p=f?.includes("next")||f?.includes("previous")||d;r.closeButton.style.display=f.includes("close")?"block":"none",p?(r.footer.style.display="flex",r.progress.style.display=d?"block":"none",r.nextButton.style.display=f.includes("next")?"block":"none",r.previousButton.style.display=f.includes("previous")?"block":"none"):r.footer.style.display="none";const m=s||W("disableButtons")||[];m!=null&&m.includes("next")&&(r.nextButton.disabled=!0,r.nextButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("previous")&&(r.previousButton.disabled=!0,r.previousButton.classList.add("driver-popover-btn-disabled")),m!=null&&m.includes("close")&&(r.closeButton.disabled=!0,r.closeButton.classList.add("driver-popover-btn-disabled"));const b=r.wrapper;b.style.display="block",b.style.left="",b.style.top="",b.style.bottom="",b.style.right="",b.id="driver-popover-content",b.setAttribute("role","dialog"),b.setAttribute("aria-labelledby","driver-popover-title"),b.setAttribute("aria-describedby","driver-popover-description");const _=r.arrow;_.className="driver-popover-arrow";const v=((t=e.popover)==null?void 0:t.popoverClass)||W("popoverClass")||"";b.className=`driver-popover ${v}`.trim(),Gl(r.wrapper,C=>{var R,D,S;const T=C.target,O=((R=e.popover)==null?void 0:R.onNextClick)||W("onNextClick"),M=((D=e.popover)==null?void 0:D.onPrevClick)||W("onPrevClick"),L=((S=e.popover)==null?void 0:S.onCloseClick)||W("onCloseClick");if(T.classList.contains("driver-popover-next-btn"))return O?O(n,e,{config:W(),state:X()}):Nt("nextClick");if(T.classList.contains("driver-popover-prev-btn"))return M?M(n,e,{config:W(),state:X()}):Nt("prevClick");if(T.classList.contains("driver-popover-close-btn"))return L?L(n,e,{config:W(),state:X()}):Nt("closeClick")},C=>!(r!=null&&r.description.contains(C))&&!(r!=null&&r.title.contains(C))&&C.className.includes("driver-popover")),ce("popover",r);const y=((i=e.popover)==null?void 0:i.onPopoverRender)||W("onPopoverRender");y&&y(r,{config:W(),state:X()}),Jl(n,e),Hl(b);const w=n.classList.contains("driver-dummy-element"),x=jl([b,...w?[]:[n]]);x.length>0&&x[0].focus()}function Kl(){const n=X("popover");if(!(n!=null&&n.wrapper))return;const e=n.wrapper.getBoundingClientRect(),t=W("stagePadding")||0,i=W("popoverOffset")||0;return{width:e.width+t+i,height:e.height+t+i,realWidth:e.width,realHeight:e.height}}function cs(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return n==="start"?Math.max(Math.min(t.top-r,window.innerHeight-i.realHeight-o.width),o.width):n==="end"?Math.max(Math.min(t.top-i?.realHeight+t.height+r,window.innerHeight-i?.realHeight-o.width),o.width):n==="center"?Math.max(Math.min(t.top+t.height/2-i?.realHeight/2,window.innerHeight-i?.realHeight-o.width),o.width):0}function ds(n,e){const{elementDimensions:t,popoverDimensions:i,popoverPadding:r,popoverArrowDimensions:o}=e;return n==="start"?Math.max(Math.min(t.left-r,window.innerWidth-i.realWidth-o.width),o.width):n==="end"?Math.max(Math.min(t.left-i?.realWidth+t.width+r,window.innerWidth-i?.realWidth-o.width),o.width):n==="center"?Math.max(Math.min(t.left+t.width/2-i?.realWidth/2,window.innerWidth-i?.realWidth-o.width),o.width):0}function Jl(n,e){const t=X("popover");if(!t)return;const{align:i="start",side:r="left"}=e?.popover||{},o=i,a=n.id==="driver-dummy-element"?"over":r,c=W("stagePadding")||0,s=Kl(),u=t.arrow.getBoundingClientRect(),l=n.getBoundingClientRect(),g=l.top-s.height;let h=g>=0;const f=window.innerHeight-(l.bottom+s.height);let d=f>=0;const p=l.left-s.width;let m=p>=0;const b=window.innerWidth-(l.right+s.width);let _=b>=0;const v=!h&&!d&&!m&&!_;let y=a;if(a==="top"&&h?_=m=d=!1:a==="bottom"&&d?_=m=h=!1:a==="left"&&m?_=h=d=!1:a==="right"&&_&&(m=h=d=!1),a==="over"){const w=window.innerWidth/2-s.realWidth/2,x=window.innerHeight/2-s.realHeight/2;t.wrapper.style.left=`${w}px`,t.wrapper.style.right="auto",t.wrapper.style.top=`${x}px`,t.wrapper.style.bottom="auto"}else if(v){const w=window.innerWidth/2-s?.realWidth/2,x=10;t.wrapper.style.left=`${w}px`,t.wrapper.style.right="auto",t.wrapper.style.bottom=`${x}px`,t.wrapper.style.top="auto"}else if(m){const w=Math.min(p,window.innerWidth-s?.realWidth-u.width),x=cs(o,{elementDimensions:l,popoverDimensions:s,popoverPadding:c,popoverArrowDimensions:u});t.wrapper.style.left=`${w}px`,t.wrapper.style.top=`${x}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",y="left"}else if(_){const w=Math.min(b,window.innerWidth-s?.realWidth-u.width),x=cs(o,{elementDimensions:l,popoverDimensions:s,popoverPadding:c,popoverArrowDimensions:u});t.wrapper.style.right=`${w}px`,t.wrapper.style.top=`${x}px`,t.wrapper.style.bottom="auto",t.wrapper.style.left="auto",y="right"}else if(h){const w=Math.min(g,window.innerHeight-s.realHeight-u.width);let x=ds(o,{elementDimensions:l,popoverDimensions:s,popoverPadding:c,popoverArrowDimensions:u});t.wrapper.style.top=`${w}px`,t.wrapper.style.left=`${x}px`,t.wrapper.style.bottom="auto",t.wrapper.style.right="auto",y="top"}else if(d){const w=Math.min(f,window.innerHeight-s?.realHeight-u.width);let x=ds(o,{elementDimensions:l,popoverDimensions:s,popoverPadding:c,popoverArrowDimensions:u});t.wrapper.style.left=`${x}px`,t.wrapper.style.bottom=`${w}px`,t.wrapper.style.top="auto",t.wrapper.style.right="auto",y="bottom"}v?t.arrow.classList.add("driver-popover-arrow-none"):lv(o,y,n)}function lv(n,e,t){const i=X("popover");if(!i)return;const r=t.getBoundingClientRect(),o=Kl(),a=i.arrow,c=o.width,s=window.innerWidth,u=r.width,l=r.left,g=o.height,h=window.innerHeight,f=r.top,d=r.height;a.className="driver-popover-arrow";let p=e,m=n;e==="top"?(l+u<=0?(p="right",m="end"):l+u-c<=0&&(p="top",m="start"),l>=s?(p="left",m="end"):l+c>=s&&(p="top",m="end")):e==="bottom"?(l+u<=0?(p="right",m="start"):l+u-c<=0&&(p="bottom",m="start"),l>=s?(p="left",m="start"):l+c>=s&&(p="bottom",m="end")):e==="left"?(f+d<=0?(p="bottom",m="end"):f+d-g<=0&&(p="left",m="start"),f>=h?(p="top",m="end"):f+g>=h&&(p="left",m="end")):e==="right"&&(f+d<=0?(p="bottom",m="start"):f+d-g<=0&&(p="right",m="start"),f>=h?(p="top",m="start"):f+g>=h&&(p="right",m="end")),p?(a.classList.add(`driver-popover-arrow-side-${p}`),a.classList.add(`driver-popover-arrow-align-${m}`)):a.classList.add("driver-popover-arrow-none")}function cv(){const n=document.createElement("div");n.classList.add("driver-popover");const e=document.createElement("div");e.classList.add("driver-popover-arrow");const t=document.createElement("header");t.id="driver-popover-title",t.classList.add("driver-popover-title"),t.style.display="none",t.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const r=document.createElement("button");r.type="button",r.classList.add("driver-popover-close-btn"),r.setAttribute("aria-label","Close"),r.innerHTML="&times;";const o=document.createElement("footer");o.classList.add("driver-popover-footer");const a=document.createElement("span");a.classList.add("driver-popover-progress-text"),a.innerText="";const c=document.createElement("span");c.classList.add("driver-popover-navigation-btns");const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-prev-btn"),s.innerHTML="&larr; Previous";const u=document.createElement("button");return u.type="button",u.classList.add("driver-popover-next-btn"),u.innerHTML="Next &rarr;",c.appendChild(s),c.appendChild(u),o.appendChild(a),o.appendChild(c),n.appendChild(r),n.appendChild(e),n.appendChild(t),n.appendChild(i),n.appendChild(o),{wrapper:n,arrow:e,title:t,description:i,footer:o,previousButton:s,nextButton:u,closeButton:r,footerButtons:c,progress:a}}function dv(){var n;const e=X("popover");e&&((n=e.wrapper.parentElement)==null||n.removeChild(e.wrapper))}function uv(n={}){qr(n);function e(){W("allowClose")&&u()}function t(){const l=X("activeIndex"),g=W("steps")||[];if(typeof l>"u")return;const h=l+1;g[h]?s(h):u()}function i(){const l=X("activeIndex"),g=W("steps")||[];if(typeof l>"u")return;const h=l-1;g[h]?s(h):u()}function r(l){(W("steps")||[])[l]?s(l):u()}function o(){var l;if(X("__transitionCallback"))return;const g=X("activeIndex"),h=X("__activeStep"),f=X("__activeElement");if(typeof g>"u"||typeof h>"u"||typeof X("activeIndex")>"u")return;const d=((l=h.popover)==null?void 0:l.onPrevClick)||W("onPrevClick");if(d)return d(f,h,{config:W(),state:X()});i()}function a(){var l;if(X("__transitionCallback"))return;const g=X("activeIndex"),h=X("__activeStep"),f=X("__activeElement");if(typeof g>"u"||typeof h>"u")return;const d=((l=h.popover)==null?void 0:l.onNextClick)||W("onNextClick");if(d)return d(f,h,{config:W(),state:X()});t()}function c(){X("isInitialized")||(ce("isInitialized",!0),document.body.classList.add("driver-active",W("animate")?"driver-fade":"driver-simple"),ov(),li("overlayClick",e),li("escapePress",e),li("arrowLeftPress",o),li("arrowRightPress",a))}function s(l=0){var g,h,f,d,p,m,b,_;const v=W("steps");if(!v){console.error("No steps to drive through"),u();return}if(!v[l]){u();return}ce("__activeOnDestroyed",document.activeElement),ce("activeIndex",l);const y=v[l],w=v[l+1],x=v[l-1],C=((g=y.popover)==null?void 0:g.doneBtnText)||W("doneBtnText")||"Done",R=W("allowClose"),D=typeof((h=y.popover)==null?void 0:h.showProgress)<"u"?(f=y.popover)==null?void 0:f.showProgress:W("showProgress"),S=(((d=y.popover)==null?void 0:d.progressText)||W("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${l+1}`).replace("{{total}}",`${v.length}`),T=((p=y.popover)==null?void 0:p.showButtons)||W("showButtons"),O=["next","previous",...R?["close"]:[]].filter(F=>!(T!=null&&T.length)||T.includes(F)),M=((m=y.popover)==null?void 0:m.onNextClick)||W("onNextClick"),L=((b=y.popover)==null?void 0:b.onPrevClick)||W("onPrevClick"),B=((_=y.popover)==null?void 0:_.onCloseClick)||W("onCloseClick");ss({...y,popover:{showButtons:O,nextBtnText:w?void 0:C,disableButtons:[...x?[]:["previous"]],showProgress:D,progressText:S,onNextClick:M||(()=>{w?s(l+1):u()}),onPrevClick:L||(()=>{s(l-1)}),onCloseClick:B||(()=>{u()}),...y?.popover||{}}})}function u(l=!0){const g=X("__activeElement"),h=X("__activeStep"),f=X("__activeOnDestroyed"),d=W("onDestroyStarted");if(l&&d){const b=!g||g?.id==="driver-dummy-element";d(b?void 0:g,h,{config:W(),state:X()});return}const p=h?.onDeselected||W("onDeselected"),m=W("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),av(),dv(),iv(),Qm(),Gm(),as(),g&&h){const b=g.id==="driver-dummy-element";p&&p(b?void 0:g,h,{config:W(),state:X()}),m&&m(b?void 0:g,h,{config:W(),state:X()})}f&&f.focus()}return{isActive:()=>X("isInitialized")||!1,refresh:Bn,drive:(l=0)=>{c(),s(l)},setConfig:qr,setSteps:l=>{as(),qr({...W(),steps:l})},getConfig:W,getState:X,getActiveIndex:()=>X("activeIndex"),isFirstStep:()=>X("activeIndex")===0,isLastStep:()=>{const l=W("steps")||[],g=X("activeIndex");return g!==void 0&&g===l.length-1},getActiveStep:()=>X("activeStep"),getActiveElement:()=>X("activeElement"),getPreviousElement:()=>X("previousElement"),getPreviousStep:()=>X("previousStep"),moveNext:t,movePrevious:i,moveTo:r,hasNextStep:()=>{const l=W("steps")||[],g=X("activeIndex");return g!==void 0&&l[g+1]},hasPreviousStep:()=>{const l=W("steps")||[],g=X("activeIndex");return g!==void 0&&l[g-1]},highlight:l=>{c(),ss({...l,popover:l.popover?{showButtons:[],showProgress:!1,progressText:"",...l.popover}:void 0})},destroy:()=>{u(!1)}}}function ql(){const[n,e]=le(Ci),{i18n:t}=We();E.useEffect(()=>{const r=hu()||ru;t.changeLanguage(r),e(r)},[]);const i=E.useCallback(r=>{e(r),t.changeLanguage(r),fu(r),oe("switch_language",{code:r})},[]);return A.jsx(ui,{size:"small",value:n,onClick:r=>r.stopPropagation(),onChange:i,className:"revezone-language-select items-center w-auto whitespace-nowrap text-sm",bordered:!1,children:Xd.map(r=>A.jsx(ui.Option,{value:r.key,children:A.jsx("span",{className:"text-sm",children:r.label})},r.key))})}function fv(){const[n]=le(yo),[e]=le(Fs),[t]=le(Ps);return{currentFolderId:E.useMemo(()=>{let r=n.filter(o=>o.startsWith("folder_"))?.[0];return!r&&t&&Object.values(e).forEach(o=>{o.children?.includes(t.id)&&(r=o.data.id)}),r},[n,e,t])}}var hv=function(){var n=tc(E.useState({}),2),e=n[1];return E.useCallback(function(){return e({})},[])};const gv=hv;function Zl({className:n="",from:e}){const{t}=We();return A.jsx("a",{className:"reve-text-link",href:"https://github.com/revezone/revezone/releases",target:"_blank",rel:"noreferrer",title:t("welcome.downloadApp"),onClick:()=>{oe(`${e}_click_downloadapp`,{})},children:A.jsx(ul,{className:`w-4 h-4 ${yt?null:"animate-bounce"} ${n}`})})}const us=window.electron?.process.env.registeredFonts,pv=us&&JSON.parse(us),mv=({setSystemSettingVisible:n})=>{const{t:e}=We(),t=gv(),[i,r]=E.useState(pv),[o,a]=E.useState(gu()==="true"),[c,s]=E.useState(uu()),u=E.useCallback(()=>{window.api&&window.api.loadCustomFonts()},[]);E.useEffect(()=>{pu(String(o))},[o]),E.useEffect(()=>{c&&sa(c)},[c]);const l=E.useCallback(async(h,f)=>{r(f),f.find(d=>d.name===c)||s(null),setTimeout(()=>{t()},0)},[]);E.useEffect(()=>{window.api&&window.api.onLoadCustomFontSuccess(l),window.api&&window.api.onRemoveCustomFontSuccess(l)},[]);const g=h=>{window.api?.removeCustomFont(h)};return yt?A.jsx("div",{children:A.jsxs("div",{className:"divide-y",children:[A.jsxs("div",{className:"w-full py-2",children:[A.jsxs("p",{className:"mr-2 font-normal",children:[e("customFont.fontsLoaded"),":"]}),i?.length?A.jsx(A.Fragment,{children:A.jsx("div",{className:"pl-4 overflow-scroll",style:{maxHeight:200},children:i?.map(h=>A.jsxs("div",{className:"py-2",children:[A.jsxs("p",{className:" text-gray-700 flex items-center",children:[A.jsx("span",{children:h.name}),A.jsx(_o,{title:e("customFont.deleteFont"),description:`${e("customFont.confirmDeleteFont")} ${h.name} ?`,onConfirm:()=>{g(h.path)},okText:"Yes",cancelText:"No",children:A.jsx(Qh,{className:"w-4 h-4 cursor-pointer ml-2"})})]}),A.jsx("p",{className:"text-xs text-gray-400 whitespace-nowrap",children:h.path})]},h.name))})}):A.jsx("span",{className:"text-gray-500 pl-4",children:e("customFont.emptyTip")}),A.jsx("div",{className:"pt-2",children:A.jsx(Zr,{size:"small",onClick:u,children:e("customFont.loadFontFile")})})]}),A.jsxs("div",{className:"py-2",children:[A.jsxs("p",{className:"mr-2 mb-2 font-normal",children:[e("customFont.enableCustomFontInBoard"),":"]}),A.jsx("p",{className:"mb-3",children:A.jsx(nc,{className:"bg-gray-300",checked:o,onChange:h=>{a(h),sa("")}})}),o?A.jsx("div",{className:"mb-2",children:A.jsx(ui,{className:"w-80",value:c,onChange:h=>{s(h),n(!1),window.api?.switchFontfamily(h),wo.emit("switch_font_family")},children:i?.map(h=>A.jsx(ui.Option,{value:h.name,children:h.name},h.name))})}):null,A.jsx("p",{className:"mt-2 text-orange-300",children:e("customFont.fontFirstLoadTip")})]})]})}):A.jsxs("div",{className:"text-gray-500 h-36 flex items-center",children:[A.jsx("span",{className:"mr-2",children:e("customFont.onlineVersionTip")}),A.jsx(Zl,{from:"systemsetting"})]})},vv=window.electron?.process.env.USER_FILES_STORAGE_PATH;function Ql(){const[n,e]=E.useState(vv),{t}=We();return E.useEffect(()=>{window.api?.customStoragePathSuccess((i,r)=>{e(r)})},[]),yt?A.jsxs("div",{children:[A.jsxs("p",{className:"mb-6",children:[A.jsxs("span",{className:"mr-2",children:[t("operation.storagePath"),":"]}),A.jsx("span",{className:"text-slate-500",children:n})]}),A.jsxs("div",{children:[A.jsx(_o,{placement:"bottom",title:t("storagePath.changePath"),description:t("storagePath.changePathConfirm"),onConfirm:()=>{window.api?.customStoragePath()},children:A.jsx(Zr,{size:"small",className:"mr-2",children:t("storagePath.changePath")})}),A.jsx(Zr,{size:"small",onClick:()=>{window.api?.openStoragePath(n)},children:t("storagePath.openPath")})]})]}):A.jsx("div",{className:"text-gray-500 h-36 flex items-center",children:A.jsx("span",{className:"mr-2",children:t("storagePath.storagePathNotice")})})}function _v({visible:n,setSystemSettingVisible:e,onCancel:t}){const{t:i}=We();return A.jsx(vo,{width:800,open:n,onCancel:t,footer:null,wrapClassName:`os-is-${Js.toLowerCase()}`,children:A.jsx(ic,{tabPosition:"left",items:[{key:"custom_fonts",label:i("menu.customFont"),children:A.jsx(mv,{setSystemSettingVisible:e})},{key:"storage_path",label:i("operation.storagePath"),children:A.jsx("div",{children:A.jsx(Ql,{})})}]})})}function bv(n){const{size:e="middle",className:t=""}=n,{addFile:i}=ur(),{addFolder:r}=$l(),{t:o}=We(),{model:a}=zt(),[c]=le(Ci),[s,u]=E.useState(!1),l=E.useMemo(()=>[{key:"issue",title:o("help.issue"),icon:A.jsx(kh,{className:"w-4"}),label:A.jsx("a",{href:"https://github.com/revezone/revezone/issues/new",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_issue",{})},children:o("help.issue")})},{key:"twitter",title:o("links.twitter"),icon:A.jsx(qh,{className:"w-4"}),label:A.jsx("a",{href:"https://twitter.com/therevezone",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_twitter",{})},children:o("links.twitter")})},{key:"authorBilibili",title:o("links.authorBilibili"),icon:A.jsx($m,{className:"w-4 h-4"}),label:A.jsx("a",{href:"https://space.bilibili.com/393134139",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_bilibili",{})},children:o("links.authorBilibili")})},{key:"buymeacoffee",title:o("links.buyMeACoffee"),icon:A.jsx(Uh,{className:"w-4"}),label:A.jsx("a",{href:"https://www.buymeacoffee.com/korbinzhao",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_buycoffee",{})},children:o("links.buyMeACoffee")})},{key:"feedmycat",title:o("links.feedMyCat"),icon:A.jsx(zh,{className:"w-4"}),label:A.jsx("a",{href:"https://afdian.net/a/wantian",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_feedcat",{})},children:o("links.feedMyCat")})},{key:"downloadApp",title:o("links.downloadApp"),icon:A.jsx(ul,{className:"w-4 animate-bounce"}),label:A.jsx("a",{href:"https://github.com/revezone/revezone/releases",target:"_blank",rel:"noreferrer",onClick:()=>{oe("bottombar_click_downloadapp",{})},children:o("links.downloadApp")})}],[c]),{currentFolderId:g}=fv(),h=E.useCallback(()=>{switch(e){case"small":return"w-5 h-5";case"middle":return"w-5 h-5";case"large":return"w-6 h-6";default:return"w-5 h-5"}},[e]);return A.jsxs("div",{className:`flex flex-col items-center justify-between h-[calc(100%-80px)] p-2 w-8 border-r ${t}`,children:[A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx("span",{title:o("operation.addFolder"),className:"operation-item flex items-center mb-5 cursor-pointer",onClick:f=>{f.stopPropagation(),r("New Folder")},children:A.jsx(St,{title:o("operation.addFolder"),placement:"right",children:A.jsx(fl,{className:`${h()} text-current`})})}),A.jsx("span",{title:o("operation.addBoard"),id:"add-board-button",className:"operation-item flex items-center mb-5 cursor-pointer relative",onClick:f=>{f.stopPropagation(),i("New Excalidarw","board",a,g)},children:A.jsx(St,{title:o("operation.addBoard"),placement:"right",children:A.jsx(Lo,{className:`${h()} text-current cursor-pointer menu-icon`})})}),A.jsx("span",{title:o("operation.addTldraw"),id:"add-tldraw-button",className:"operation-item flex items-center mb-5 cursor-pointer relative",onClick:f=>{f.stopPropagation(),i("New Tldraw","tldraw",a,g)},children:A.jsx(St,{title:o("operation.addTldraw"),placement:"right",children:A.jsx("span",{children:A.jsx(Mo,{className:"w-5 h-5 text-current cursor-pointer menu-icon"})})})}),A.jsx("span",{title:o("operation.addNote"),className:"operation-item flex items-center mb-5 cursor-pointer",onClick:f=>{f.stopPropagation(),i("New Note","note",a,g)},children:A.jsx(St,{title:o("operation.addNote"),placement:"right",children:A.jsx(Ao,{className:`${h()} text-current cursor-pointer menu-icon`})})})]}),A.jsxs("div",{className:"flex flex-col items-center pb-4",children:[A.jsx(St,{title:o("links.downloadApp"),placement:"right",children:A.jsx("span",{children:A.jsx(Zl,{from:"bottombar",className:"mb-3 w-4 h-4"})})}),A.jsx("a",{id:"give-star-button",className:"mb-3 reve-text-link",href:"https://github.com/revezone/revezone",target:"_blank",rel:"noreferrer",title:o("operation.giveAStar"),onClick:()=>{oe("bottombar_click_github",{})},children:A.jsx(St,{title:o("operation.giveAStar"),placement:"right",children:A.jsx("span",{children:A.jsx(Um,{className:"w-4 h-4"})})})}),A.jsx("span",{title:"Setting",className:"reve-text-link mb-3",children:A.jsx(St,{title:o("operation.systemSetting"),placement:"right",children:A.jsx(Kh,{id:"system-setting-button",className:"w-4 h-4 cursor-pointer",onClick:()=>{u(!0),oe("bottombar_click_systemsetting",{})}})})}),A.jsx("span",{title:"Help",className:"reve-text-link",children:A.jsx(On,{menu:{items:l},children:A.jsx(hl,{className:"w-4 h-4 cursor-pointer"})})}),A.jsx(_v,{visible:s,setSystemSettingVisible:u,onCancel:()=>u(!1)})]})]})}const fs=n=>{switch(n){case"small":return"text-xl";case"middle":return"text-3xl";case"large":return"text-5xl"}},yv=n=>{switch(n){case"small":return"w-6 h-6 mr-0.5";case"middle":return"w-10 h-10 mr-75";case"large":return"w-16 h-16 mr-1"}};function Tv({size:n="small",className:e="",url:t,onClick:i}){return A.jsxs("div",{className:`flex items-center text-xl font-mono cursor-pointer ${fs(n)} ${e}`,onClick:()=>{i?.(),oe("click_logo",{}),t&&window.open(t)},children:[A.jsx("img",{className:yv(n),src:"https://img.alicdn.com/imgextra/i2/O1CN01Ei2rTp1x7sUnWKWj3_!!6000000006397-2-tps-720-720.png",alt:""}),A.jsx("span",{className:`tracking-wider bg-clip-text text-transparent text-sky-500 bg-gradient-to-r 
      from-sky-300 to-sky-600 decoration-cyan-100 underline-offset-2  underline font-semibold 
      ${fs(n)}`,children:"evezone"})]})}const wv=()=>{const{t:n}=We(),[e]=le(Ci),t=E.useCallback(()=>{oe("publicbeta_show_notice",{})},[]);return A.jsx(_o,{trigger:"hover",title:n("publicBeta.title"),description:A.jsxs("p",{className:"w-60 whitespace-pre-wrap",onMouseEnter:t,children:[A.jsx("span",{children:n("publicBeta.description")}),e.startsWith("zh")?A.jsx("img",{className:"w-25 h-25",src:"https://img.alicdn.com/imgextra/i4/O1CN01rXBaQt1bGC8tJAAit_!!6000000003437-0-tps-1074-885.jpg",alt:""}):null]}),children:A.jsx(hl,{className:"w-4 h-4 ml-1 cursor-pointer"})})},Ev=/^(.+)(\.[a-zA-Z0-9]+)$/;function Sv(){const{t:n}=We(),{addFile:e}=ur(),{model:t}=zt(),{fileTree:i}=Tt(),r=E.useCallback(async a=>{const c=await a.getFile(),s=await c.text(),u=c.name.match(Ev),l=u?.[1];switch(u?.[2]){case".excalidraw":await e(l,"board",t,"root",s);break;case".tldr":await e(l,"tldraw",t,"root",s);break}},[]),o=E.useCallback(async()=>{const a=await window.showOpenFilePicker({multiple:!0});for await(const c of a)await r(c)},[i,t]);return A.jsx("div",{onClick:o,children:n("operation.import")})}function xv(){const{t:n}=We(),{switchToWelcomePage:e,model:t}=zt(),i=E.useCallback(()=>{e()},[t]),r=[{key:"local",icon:A.jsx(ba,{className:"w-4 mr-1"}),label:n("storage.local")},{key:"cloud",icon:A.jsx(Zh,{className:"w-4 mr-1"}),disabled:!0,label:n("storage.cloud")}];return A.jsxs("div",{className:"flex flex-col mb-1 pl-2 pt-0 justify-between",children:[A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(Tv,{size:"small",onClick:i}),A.jsxs("span",{className:"text-sm whitespace-nowrap",children:[" - ",n("text.alpha")]}),A.jsx(wv,{})]})}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"mr-2 whitespace-nowrap",children:A.jsx(On,{menu:{items:r},children:A.jsxs("span",{className:"text-slate-500 flex items-center cursor-pointer text-sm",children:[A.jsx(ba,{className:"w-4 mr-1"}),n("storage.local")]})})}),A.jsx(ql,{})]}),A.jsx(On,{trigger:["hover"],menu:{items:[{key:"import",label:A.jsx(Sv,{}),icon:A.jsx(Xh,{className:"w-4 h-4"})}]},children:A.jsx(gl,{className:"w-3 h-3 cursor-pointer mr-6"})})]})]})}const hs="is_user_guide_showed",gs=[20,80];function Av({children:n}){const e=h=>{document.cookie=`react-resizable-panels:layout=${JSON.stringify(h)}`},[t,i]=le(_u);le(bu);const{t:r}=We(),[o,a]=E.useState(!1),[c,s]=E.useState(!1),u=E.useCallback(async()=>{await _i.getCommonData(hs)!=="true"&&(await _i.updateCommonData(hs,"true"),a(!0))},[]);E.useEffect(()=>{u()},[]),E.useEffect(()=>{if(!c)return;uv({showProgress:!0,allowClose:!0,steps:[{element:"#add-board-button",popover:{title:r("operation.addBoard"),description:r("description.addBoardDesc")}},{element:"#system-setting-button",popover:{title:r("operation.systemSetting"),description:r("description.systemSettingDesc")}},{element:"#add-tldraw-button",popover:{title:r("operation.addTldraw"),description:r("description.addTldrawDesc")}}]}).drive()},[c]);const l=E.useCallback(()=>{i(!t),window.api?.toggleTrafficLight(t),oe("click_collapsebutton",{collapsed:t})},[t]),g=E.useCallback(()=>{s(!0),a(!1)},[]);return A.jsxs(cl,{className:"revezone-layout",direction:"horizontal",onLayout:e,children:[t?null:A.jsxs(A.Fragment,{children:[A.jsxs(ro,{defaultSize:gs[0],minSize:10,maxSize:50,id:"sidebar",order:1,className:"relative",children:[A.jsx("div",{className:"revezone-topleft-toolbar",children:A.jsx(Vh,{className:"panel-left-button w-5 text-current cursor-pointer",onClick:l})}),A.jsx(xv,{}),A.jsxs("div",{className:"flex h-full w-full border-t",children:[A.jsx(bv,{}),A.jsx(Wm,{})]})]}),A.jsx(dl,{className:"w-2 bg-gray-100 flex justify-center items-center",children:A.jsx("div",{className:"flex flex-col",children:A.jsx(Yh,{className:"w-3 h-3 text-gray-500"})})})]}),A.jsxs(ro,{defaultSize:gs[1],order:2,children:[t&&A.jsx(Gh,{onClick:l,className:"w-5 text-current cursor-pointer mt-1 ml-3 absolute z-50"}),n]}),A.jsxs(vo,{open:o,title:r("userGuideModel.title"),onOk:g,onCancel:g,children:[A.jsx("p",{className:"border-b mt-2"}),A.jsxs("p",{className:"flex items-center mt-6",children:[A.jsxs("span",{className:"mr-1",children:[r("operation.switchLanguage"),":"]}),A.jsx(ql,{})]}),A.jsx("p",{className:"border-b mt-6"}),yt?A.jsx("p",{className:"flex flex-col items-start mt-6",children:A.jsx(Ql,{})}):null]})]})}const Lv=E.lazy(()=>hc(()=>import("./index-d60d1f04.js"),["./index-d60d1f04.js","./tldraw-8740689d.js","./antd-6b0c2e5e.js","./revesuite-fd4a8878.js","./revemate-381229c3.js","./revemate-e17dae36.css","./index-75d91649.css"],import.meta.url));let ps=!1,ms=!1;const Dv=Ks();function Ov(){const[n]=le(Ci),{addFile:e}=ur(),{model:t,updateTabJsonModelWhenCurrentFileChanged:i}=zt(),{updateCurrentFile:r}=en(),{fileTree:o}=Tt();E.useEffect(()=>{vh()},[]),E.useEffect(()=>{!t||ps||(ps=!0,window.api?.openFileSuccess((s,u,l)=>{const g=lp(u),h=g&&cp(g),f=g&&dp(g),d=f&&up(f);h&&d?e(h,d,t,"root",l):zo.error(`File ${u} unrecognized!`)}))},[t]);const a=E.useCallback(async(s,u,l)=>{const g=s?.split("revezone://")[1],h=u[g]?.data;if(!h){zo.error(`File ${s} not exsited!`);return}await r(h),i(h,l)},[]);E.useEffect(()=>{if(!(!t||!(o&&JSON.stringify(o)!=="{}"))){if(!ms){ms=!0;const s=window.electron?.process.env.DEEP_LINKING_URL;s&&a(s,o,t)}window.api?.removeAllRevezoneLinkListeners(),window.api?.openRevezoneLinkSuccess(async(s,u)=>{a(u,o,t)})}},[o,t]);const c=E.useCallback(()=>{switch(n){case"zh-CN":return Ef;case"zh-TW":return jf;default:return lh}},[n]);return A.jsx(rc,{locale:c(),theme:ch,children:A.jsx("div",{className:`revezone-app-container os-is-${Dv.toLowerCase()} ${yt?"is-in-revezone-native-app":"is-in-browser"}`,children:A.jsx(Av,{children:A.jsx(rf,{children:A.jsx(Lv,{})})})})})}Qr.createRoot(document.getElementById("root")).render(A.jsx(ee.StrictMode,{children:A.jsx(Ov,{})}));export{$m as B,zh as C,Zl as D,Ao as F,Um as G,Tv as L,wv as P,qh as T,Ss as W,en as a,Co as b,ae as c,zt as d,Tt as e,Fs as f,Bv as g,Io as h,wo as i,Ks as j,We as k,Ci as l,yt as m,Uh as n,Bl as o,Ot as p,Ne as q,Mo as r,oe as s,Fl as t,le as u,Lo as v,pr as w,Tu as x,_u as y};
